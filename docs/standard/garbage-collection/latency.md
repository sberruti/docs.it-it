---
title: Modalità di latenza
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- garbage collection, intrusiveness
- garbage collection, latency modes
ms.assetid: 96278bb7-6eab-4612-8594-ceebfc887d81
ms.openlocfilehash: a8eaf0c80aa32978eead80c51a905cbcd66a537b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/15/2020
ms.locfileid: "74283600"
---
# <a name="latency-modes"></a><span data-ttu-id="fc539-102">Modalità di latenza</span><span class="sxs-lookup"><span data-stu-id="fc539-102">Latency modes</span></span>

<span data-ttu-id="fc539-103">Per recuperare gli oggetti, il Garbage Collector (GC) deve arrestare tutti i thread in esecuzione in un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="fc539-103">To reclaim objects, the garbage collector (GC) must stop all the executing threads in an application.</span></span> <span data-ttu-id="fc539-104">Il periodo di tempo durante il quale il Garbage Collector è attivo viene definito *latenza*.</span><span class="sxs-lookup"><span data-stu-id="fc539-104">The period of time during which the garbage collector is active is referred to as its *latency*.</span></span>

<span data-ttu-id="fc539-105">In alcune situazioni, ad esempio quando un'applicazione recupera dati o visualizza contenuto, un'operazione completa di Garbage Collection può verificarsi in un momento critico e può ostacolare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="fc539-105">In some situations, such as when an application retrieves data or displays content, a full garbage collection can occur at a critical time and impede performance.</span></span> <span data-ttu-id="fc539-106">È possibile rettificare l'ingerenza del Garbage Collector impostando la proprietà <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> su uno dei valori <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fc539-106">You can adjust the intrusiveness of the garbage collector by setting the <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> property to one of the <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> values.</span></span>

## <a name="low-latency-settings"></a><span data-ttu-id="fc539-107">Impostazioni a bassa latenza</span><span class="sxs-lookup"><span data-stu-id="fc539-107">Low latency settings</span></span>

<span data-ttu-id="fc539-108">L'utilizzo di un'impostazione di latenza "bassa" significa che il Garbage Collector si intromette meno nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="fc539-108">Using a "low" latency setting means the garbage collector intrudes less in your application.</span></span> <span data-ttu-id="fc539-109">L'operazione di Garbage Collection è più conservativa del recupero della memoria.</span><span class="sxs-lookup"><span data-stu-id="fc539-109">Garbage collection is more conservative about reclaiming memory.</span></span>

<span data-ttu-id="fc539-110">Tramite l'enumerazione <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> vengono fornite due impostazioni a bassa latenza:</span><span class="sxs-lookup"><span data-stu-id="fc539-110">The <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> enumeration provides two low latency settings:</span></span>

- <span data-ttu-id="fc539-111">[GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency) elimina le raccolte di generazione 2 ed esegue solo le raccolte 0 e 1 di generazione.</span><span class="sxs-lookup"><span data-stu-id="fc539-111">[GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency) suppresses generation 2 collections and performs only generation 0 and 1 collections.</span></span> <span data-ttu-id="fc539-112">Può essere usato solo per brevi periodi di tempo.</span><span class="sxs-lookup"><span data-stu-id="fc539-112">It can be used only for short periods of time.</span></span> <span data-ttu-id="fc539-113">In caso di lunghi periodi, se viene usata una quantità elevata di memoria, tramite il Garbage Collector verrà attivata una raccolta mediante la quale è possibile mettere in pausa brevemente l'applicazione e interrompere un'operazione critica rispetto al tempo.</span><span class="sxs-lookup"><span data-stu-id="fc539-113">Over longer periods, if the system is under memory pressure, the garbage collector will trigger a collection, which can briefly pause the application and disrupt a time-critical operation.</span></span> <span data-ttu-id="fc539-114">Questa impostazione è disponibile solo per le operazioni di Garbage Collection per workstation.</span><span class="sxs-lookup"><span data-stu-id="fc539-114">This setting is available only for workstation garbage collection.</span></span>

- <span data-ttu-id="fc539-115">[GCLatencyMode.SustainedLowLatency](xref:System.Runtime.GCLatencyMode.SustainedLowLatency) elimina le raccolte di generazione 2 in primo piano ed esegue solo le raccolte di generazione 0, 1 e di generazione in background 2.</span><span class="sxs-lookup"><span data-stu-id="fc539-115">[GCLatencyMode.SustainedLowLatency](xref:System.Runtime.GCLatencyMode.SustainedLowLatency) suppresses foreground generation 2 collections and performs only generation 0, 1, and background generation 2 collections.</span></span> <span data-ttu-id="fc539-116">Può essere usato per periodi di tempo più lunghi ed è disponibile per le operazioni di Garbage Collection per workstation e per server.</span><span class="sxs-lookup"><span data-stu-id="fc539-116">It can be used for longer periods of time, and is available for both workstation and server garbage collection.</span></span> <span data-ttu-id="fc539-117">Questa impostazione non può essere utilizzata se l'operazione di Garbage Collection in background è disabilitata.</span><span class="sxs-lookup"><span data-stu-id="fc539-117">This setting cannot be used if background garbage collection is disabled.</span></span>

<span data-ttu-id="fc539-118">Durante i periodi di bassa latenza, le raccolte di generazione 2 vengono soppresse eccetto nei seguenti casi:</span><span class="sxs-lookup"><span data-stu-id="fc539-118">During low latency periods, generation 2 collections are suppressed unless the following occurs:</span></span>

- <span data-ttu-id="fc539-119">Il sistema riceve una notifica di memoria insufficiente dal sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="fc539-119">The system receives a low memory notification from the operating system.</span></span>

- <span data-ttu-id="fc539-120">Il codice dell'applicazione induce <xref:System.GC.Collect%2A?displayProperty=nameWithType> una raccolta chiamando `generation` il metodo e specificando 2 per il parametro.</span><span class="sxs-lookup"><span data-stu-id="fc539-120">Application code induces a collection by calling the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method and specifying 2 for the `generation` parameter.</span></span>

## <a name="scenarios"></a><span data-ttu-id="fc539-121">Scenari</span><span class="sxs-lookup"><span data-stu-id="fc539-121">Scenarios</span></span>

<span data-ttu-id="fc539-122">Nella tabella seguente sono elencati <xref:System.Runtime.GCLatencyMode> gli scenari dell'applicazione per l'utilizzo dei valori:</span><span class="sxs-lookup"><span data-stu-id="fc539-122">The following table lists the application scenarios for using the <xref:System.Runtime.GCLatencyMode> values:</span></span>

|<span data-ttu-id="fc539-123">Modalità di latenza</span><span class="sxs-lookup"><span data-stu-id="fc539-123">Latency mode</span></span>|<span data-ttu-id="fc539-124">Scenari applicativi</span><span class="sxs-lookup"><span data-stu-id="fc539-124">Application scenarios</span></span>|
|------------------|---------------------------|
|<xref:System.Runtime.GCLatencyMode.Batch>|<span data-ttu-id="fc539-125">Per le applicazioni che non dispongono di interfaccia utente o operazioni sul lato server.</span><span class="sxs-lookup"><span data-stu-id="fc539-125">For applications that have no user interface (UI) or server-side operations.</span></span><br /><br /><span data-ttu-id="fc539-126">Quando l'operazione di Garbage Collection in background è disabilitata, questa è la modalità predefinita per l'operazione di Garbage Collection per workstation e server.</span><span class="sxs-lookup"><span data-stu-id="fc539-126">When background garbage collection is disabled, this is the default mode for workstation and server garbage collection.</span></span> <span data-ttu-id="fc539-127"><xref:System.Runtime.GCLatencyMode.Batch>Mode esegue anche l'override dell'impostazione [gcConcurrent,](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) ovvero impedisce raccolte in background o simultanee.</span><span class="sxs-lookup"><span data-stu-id="fc539-127"><xref:System.Runtime.GCLatencyMode.Batch> mode also overrides the [gcConcurrent](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) setting, that is, it prevents background or concurrent collections.</span></span>|
|<xref:System.Runtime.GCLatencyMode.Interactive>|<span data-ttu-id="fc539-128">Per la maggior parte delle applicazioni che hanno una interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="fc539-128">For most applications that have a UI.</span></span><br /><br /><span data-ttu-id="fc539-129">Questa è la modalità predefinita per la procedura di Garbage Collection per workstation e server.</span><span class="sxs-lookup"><span data-stu-id="fc539-129">This is the default mode for workstation and server garbage collection.</span></span> <span data-ttu-id="fc539-130">Tuttavia, se un'app è ospitata, le impostazioni del Garbage Collector del processo di hosting hanno la precedenza.</span><span class="sxs-lookup"><span data-stu-id="fc539-130">However, if an app is hosted, the garbage collector settings of the hosting process take precedence.</span></span>|
|<xref:System.Runtime.GCLatencyMode.LowLatency>|<span data-ttu-id="fc539-131">Per le applicazioni con operazioni a breve termine, per cui il tempo riveste un'importanza significativa, durante le quali le interruzioni del Garbage Collector potrebbero rivelarsi dannose.</span><span class="sxs-lookup"><span data-stu-id="fc539-131">For applications that have short-term, time-sensitive operations during which interruptions from the garbage collector could be disruptive.</span></span> <span data-ttu-id="fc539-132">Ad esempio, le applicazioni che eseguono il rendering di animazioni o funzioni di acquisizione dati.</span><span class="sxs-lookup"><span data-stu-id="fc539-132">For example, applications that render animations or data acquisition functions.</span></span>|
|<xref:System.Runtime.GCLatencyMode.SustainedLowLatency>|<span data-ttu-id="fc539-133">Per le applicazioni con operazioni per cui i tempi sono importanti per una durata contenuta, ma potenzialmente lunga, durante la quale le interruzioni del Garbage Collector potrebbero rivelarsi dannose.</span><span class="sxs-lookup"><span data-stu-id="fc539-133">For applications that have time-sensitive operations for a contained but potentially longer duration of time during which interruptions from the garbage collector could be disruptive.</span></span> <span data-ttu-id="fc539-134">Ad esempio, le applicazioni per cui sono richiesti tempi di risposta rapidi come i cambiamenti dei dati di mercato durante le ore di negoziazione.</span><span class="sxs-lookup"><span data-stu-id="fc539-134">For example, applications that need quick response times as market data changes during trading hours.</span></span><br /><br /><span data-ttu-id="fc539-135">Questa modalità comporta dimensioni dell'heap gestito maggiori rispetto ad altre.</span><span class="sxs-lookup"><span data-stu-id="fc539-135">This mode results in a larger managed heap size than other modes.</span></span> <span data-ttu-id="fc539-136">Poiché non consente di comprimere l'heap gestito, è possibile avere una maggiore frammentazione.</span><span class="sxs-lookup"><span data-stu-id="fc539-136">Because it does not compact the managed heap, higher fragmentation is possible.</span></span> <span data-ttu-id="fc539-137">Assicurarsi che sia disponibile memoria sufficiente.</span><span class="sxs-lookup"><span data-stu-id="fc539-137">Ensure that sufficient memory is available.</span></span>|

## <a name="guidelines-for-using-low-latency"></a><span data-ttu-id="fc539-138">Linee guida per l'utilizzo della bassa latenza</span><span class="sxs-lookup"><span data-stu-id="fc539-138">Guidelines for using low latency</span></span>

<span data-ttu-id="fc539-139">Quando si utilizza la modalità [GCLatencyMode.LowLatency,](xref:System.Runtime.GCLatencyMode.LowLatency) considerare le linee guida seguenti:When you use GCLatencyMode.LowLatency mode, consider the following guidelines:</span><span class="sxs-lookup"><span data-stu-id="fc539-139">When you use [GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency) mode, consider the following guidelines:</span></span>

- <span data-ttu-id="fc539-140">Mantenere il periodo di tempo in bassa latenza più brevemente possibile.</span><span class="sxs-lookup"><span data-stu-id="fc539-140">Keep the period of time in low latency as short as possible.</span></span>

- <span data-ttu-id="fc539-141">Evitare di allocare quantità di memoria elevate durante i periodi di bassa latenza.</span><span class="sxs-lookup"><span data-stu-id="fc539-141">Avoid allocating high amounts of memory during low latency periods.</span></span> <span data-ttu-id="fc539-142">Possono verificarsi notifiche di memoria insufficiente perché le operazioni di Garbage Collection recuperano meno oggetti.</span><span class="sxs-lookup"><span data-stu-id="fc539-142">Low memory notifications can occur because garbage collection reclaims fewer objects.</span></span>

- <span data-ttu-id="fc539-143">In modalità a bassa latenza, ridurre al minimo il numero di nuove allocazioni, in particolare le allocazioni nell'heap oggetti grandi e negli oggetti bloccati.</span><span class="sxs-lookup"><span data-stu-id="fc539-143">While in the low latency mode, minimize the number of new allocations, in particular allocations onto the large object heap and pinned objects.</span></span>

- <span data-ttu-id="fc539-144">Tenere presenti i thread che potrebbero essere in corso di allocazione.</span><span class="sxs-lookup"><span data-stu-id="fc539-144">Be aware of threads that could be allocating.</span></span> <span data-ttu-id="fc539-145">Poiché <xref:System.Runtime.GCSettings.LatencyMode%2A> l'impostazione della <xref:System.OutOfMemoryException> proprietà è a livello di processo, le eccezioni possono essere generate in qualsiasi thread allocato.</span><span class="sxs-lookup"><span data-stu-id="fc539-145">Because the <xref:System.Runtime.GCSettings.LatencyMode%2A> property setting is process-wide, <xref:System.OutOfMemoryException> exceptions can be generated on any thread that is allocating.</span></span>

- <span data-ttu-id="fc539-146">Eseguire il wrapping del codice a bassa latenza nelle aree a esecuzione vincolata.</span><span class="sxs-lookup"><span data-stu-id="fc539-146">Wrap the low latency code in constrained execution regions.</span></span> <span data-ttu-id="fc539-147">Per ulteriori informazioni, consultate Aree a [esecuzione vincolata.](../../../docs/framework/performance/constrained-execution-regions.md)</span><span class="sxs-lookup"><span data-stu-id="fc539-147">For more information, see [Constrained execution regions](../../../docs/framework/performance/constrained-execution-regions.md).</span></span>

- <span data-ttu-id="fc539-148">È possibile forzare le operazioni di Garbage Collection di generazione 2 durante un periodo di bassa latenza chiamando il metodo <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fc539-148">You can force generation 2 collections during a low latency period by calling the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType> method.</span></span>

## <a name="see-also"></a><span data-ttu-id="fc539-149">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="fc539-149">See also</span></span>

- <xref:System.GC?displayProperty=nameWithType>
- [<span data-ttu-id="fc539-150">Raccolte indotte</span><span class="sxs-lookup"><span data-stu-id="fc539-150">Induced Collections</span></span>](../../../docs/standard/garbage-collection/induced.md)
- [<span data-ttu-id="fc539-151">Garbage Collection</span><span class="sxs-lookup"><span data-stu-id="fc539-151">Garbage Collection</span></span>](../../../docs/standard/garbage-collection/index.md)
