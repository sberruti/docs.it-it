---
title: Lavorare con la notarizzazione di catalina di macOS
description: Come gestire i problemi di notarizzazione e certificato con macOS quando installi il runtime di .NET Core, l'SDK e le app create con .NET Core.
author: thraka
ms.author: adegeo
ms.date: 02/14/2020
ms.openlocfilehash: be39c1ea56699f84736a2b37bc958507b16e826b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/14/2020
ms.locfileid: "79146749"
---
# <a name="macos-catalina-notarization-and-the-impact-on-net-core-downloads-and-projects"></a><span data-ttu-id="86a36-103">notarazione catalina di macOS e impatto sui download e progetti di .NET Core</span><span class="sxs-lookup"><span data-stu-id="86a36-103">macOS Catalina Notarization and the impact on .NET Core downloads and projects</span></span>

<span data-ttu-id="86a36-104">A partire da macOS Catalina (versione 10.15), tutti i software creati dopo il 1 giugno 2019 e distribuiti con l'ID sviluppatore devono essere notarizzati.</span><span class="sxs-lookup"><span data-stu-id="86a36-104">Beginning with macOS Catalina (version 10.15), all software built after June 1, 2019, and distributed with Developer ID, must be notarized.</span></span> <span data-ttu-id="86a36-105">Questo requisito si applica al runtime .NET Core, a .NET Core SDK e al software creato con .NET Core.</span><span class="sxs-lookup"><span data-stu-id="86a36-105">This requirement applies to the .NET Core runtime, .NET Core SDK, and software created with .NET Core.</span></span> <span data-ttu-id="86a36-106">In questo articolo vengono descritti gli scenari comuni che è possibile affrontare con la notarizzazione di .NET Core e macOS.</span><span class="sxs-lookup"><span data-stu-id="86a36-106">This article describes the common scenarios you may face with .NET Core and macOS notarization.</span></span>

## <a name="installing-net-core"></a><span data-ttu-id="86a36-107">Installazione di .NET Core</span><span class="sxs-lookup"><span data-stu-id="86a36-107">Installing .NET Core</span></span>

<span data-ttu-id="86a36-108">I programmi di installazione per .NET Core (sia runtime che SDK) versioni 3.1, 3.0 e 2.1, sono stati notarizzati dal 18 febbraio 2020.</span><span class="sxs-lookup"><span data-stu-id="86a36-108">The installers for .NET Core (both runtime and SDK) versions 3.1, 3.0, and 2.1, have been notarized since February 18, 2020.</span></span> <span data-ttu-id="86a36-109">Le versioni rilasciate precedenti non sono notificate.</span><span class="sxs-lookup"><span data-stu-id="86a36-109">Prior released versions aren't notarized.</span></span> <span data-ttu-id="86a36-110">È possibile installare manualmente una versione non notarizzata di .NET Core scaricando prima il programma di installazione e quindi utilizzando il `sudo installer` comando .</span><span class="sxs-lookup"><span data-stu-id="86a36-110">You can manually install a non-notarized version of .NET Core by first downloading the installer, and then using the `sudo installer` command.</span></span> <span data-ttu-id="86a36-111">Per ulteriori informazioni, consultate [Scaricare e installare manualmente per macOS.](sdk.md?pivots=os-macos#download-and-manually-install)</span><span class="sxs-lookup"><span data-stu-id="86a36-111">For more information, see [Download and manually install for macOS](sdk.md?pivots=os-macos#download-and-manually-install).</span></span>

<span data-ttu-id="86a36-112">A partire dalle versioni seguenti, i programmi di installazione di .NET Core sono degni di notarizzazione:</span><span class="sxs-lookup"><span data-stu-id="86a36-112">Beginning with the following versions, the .NET Core installers are notarized:</span></span>

- <span data-ttu-id="86a36-113">Runtime di .NET Core</span><span class="sxs-lookup"><span data-stu-id="86a36-113">.NET Core Runtime</span></span>
  - <span data-ttu-id="86a36-114">2.1.16</span><span class="sxs-lookup"><span data-stu-id="86a36-114">2.1.16</span></span>
  - <span data-ttu-id="86a36-115">3.0.3</span><span class="sxs-lookup"><span data-stu-id="86a36-115">3.0.3</span></span>
  - <span data-ttu-id="86a36-116">3.1.2</span><span class="sxs-lookup"><span data-stu-id="86a36-116">3.1.2</span></span>

- <span data-ttu-id="86a36-117">.NET Core SDK</span><span class="sxs-lookup"><span data-stu-id="86a36-117">.NET Core SDK</span></span>
  - <span data-ttu-id="86a36-118">2.1.512</span><span class="sxs-lookup"><span data-stu-id="86a36-118">2.1.512</span></span>
  - <span data-ttu-id="86a36-119">3.0.103</span><span class="sxs-lookup"><span data-stu-id="86a36-119">3.0.103</span></span>
  - <span data-ttu-id="86a36-120">3.1.102</span><span class="sxs-lookup"><span data-stu-id="86a36-120">3.1.102</span></span>

## <a name="apphost-is-disabled-by-default"></a><span data-ttu-id="86a36-121">appHost è disabilitato per impostazione predefinita</span><span class="sxs-lookup"><span data-stu-id="86a36-121">appHost is disabled by default</span></span>

<span data-ttu-id="86a36-122">Per impostazione predefinita, le versioni non notarizzate di .NET Core SDK 3.0 e versioni successive producono un eseguibile Mach-O nativo (noto come **appHost**) quando il progetto viene compilato, pubblicato o eseguito.</span><span class="sxs-lookup"><span data-stu-id="86a36-122">By default, non-notarized versions of the .NET Core SDK 3.0 and above produce a native Mach-O executable (known as the **appHost**) when your project compiles, publishes, or is run.</span></span> <span data-ttu-id="86a36-123">Questo eseguibile è un modo pratico per eseguire l'app.</span><span class="sxs-lookup"><span data-stu-id="86a36-123">This executable is a convenient way to run your app.</span></span> <span data-ttu-id="86a36-124">In caso contrario, l'app deve essere avviata eseguendo `dotnet <filename.dll>`.</span><span class="sxs-lookup"><span data-stu-id="86a36-124">Otherwise, your app must be started by running `dotnet <filename.dll>`.</span></span> <span data-ttu-id="86a36-125">Quando appHost è abilitato, il `dotnet run` comando viene richiamato nel contesto di appHost.</span><span class="sxs-lookup"><span data-stu-id="86a36-125">When the appHost is enabled, the `dotnet run` command is invoked in the context of the appHost.</span></span> <span data-ttu-id="86a36-126">Per ulteriori informazioni, consultate [Contesto dell'appHost.](#context-of-the-apphost)</span><span class="sxs-lookup"><span data-stu-id="86a36-126">For more information, see [Context of the appHost](#context-of-the-apphost).</span></span>

<span data-ttu-id="86a36-127">A partire dalle versioni notarized di .NET Core SDK 3.0 e versioni successive, l'eseguibile appHost non viene generato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="86a36-127">Starting with the notarized versions of the .NET Core SDK 3.0 and above, the appHost executable isn't generated by default.</span></span> <span data-ttu-id="86a36-128">È possibile attivare la [`UseAppHost`](../project-sdk/msbuild-props.md#useapphost) generazione di appHost con l'impostazione booleana nel file di progetto.</span><span class="sxs-lookup"><span data-stu-id="86a36-128">You can turn on appHost generation with the [`UseAppHost`](../project-sdk/msbuild-props.md#useapphost) boolean setting in the project file.</span></span> <span data-ttu-id="86a36-129">È anche possibile attivare/disattivare l'appHost con il `-p:UseAppHost` parametro nella riga di comando per il comando specifico `dotnet` eseguito:</span><span class="sxs-lookup"><span data-stu-id="86a36-129">You can also toggle the appHost with the `-p:UseAppHost` parameter on the command line for the specific `dotnet` command you run:</span></span>

- <span data-ttu-id="86a36-130">File di progetto</span><span class="sxs-lookup"><span data-stu-id="86a36-130">Project file</span></span>

  ```xml
  <PropertyGroup>
    <UseAppHost>true</UseAppHost>
  </PropertyGroup>
  ```

- <span data-ttu-id="86a36-131">Parametro della riga di comando</span><span class="sxs-lookup"><span data-stu-id="86a36-131">Command-line parameter</span></span>

  ```dotnetcli
  dotnet run -p:UseAppHost=true
  ```

<span data-ttu-id="86a36-132">Un appHost viene sempre creato quando si pubblica l'app [indipendente.](../deploying/index.md#publish-self-contained)</span><span class="sxs-lookup"><span data-stu-id="86a36-132">An appHost is always created when you publish your app [self-contained](../deploying/index.md#publish-self-contained).</span></span>

<span data-ttu-id="86a36-133">Per ulteriori informazioni `UseAppHost` sull'impostazione, vedere [Proprietà MSBuild per Microsoft.NET.Sdk](../project-sdk/msbuild-props.md#useapphost).</span><span class="sxs-lookup"><span data-stu-id="86a36-133">For more information about the `UseAppHost` setting, see [MSBuild properties for Microsoft.NET.Sdk](../project-sdk/msbuild-props.md#useapphost).</span></span>

### <a name="context-of-the-apphost"></a><span data-ttu-id="86a36-134">Contesto dell'appHost</span><span class="sxs-lookup"><span data-stu-id="86a36-134">Context of the appHost</span></span>

<span data-ttu-id="86a36-135">Quando l'appHost è abilitato nel progetto `dotnet run` e si usa il comando per eseguire l'app, l'app viene richiamata `dotnet` nel contesto di appHost e non nell'host predefinito (l'host predefinito è il comando).</span><span class="sxs-lookup"><span data-stu-id="86a36-135">When the appHost is enabled in your project, and you use the `dotnet run` command to run your app, the app is invoked in the context of the appHost and not the default host (the default host is the `dotnet` command).</span></span> <span data-ttu-id="86a36-136">Se l'appHost è disabilitato `dotnet run` nel progetto, il comando esegue l'app nel contesto dell'host predefinito.</span><span class="sxs-lookup"><span data-stu-id="86a36-136">If the appHost is disabled in your project, the `dotnet run` command runs your app in the context of the default host.</span></span> <span data-ttu-id="86a36-137">Anche se l'appHost è disabilitato, la pubblicazione dell'app come autonoma genera un eseguibile appHost e gli utenti usano tale eseguibile per eseguire l'app.</span><span class="sxs-lookup"><span data-stu-id="86a36-137">Even if the appHost is disabled, publishing your app as self-contained generates an appHost executable, and users use that executable to run your app.</span></span> <span data-ttu-id="86a36-138">L'esecuzione `dotnet <filename.dll>` dell'app con richiama l'app con l'host predefinito, il runtime condiviso.</span><span class="sxs-lookup"><span data-stu-id="86a36-138">Running your app with `dotnet <filename.dll>` invokes the app with the default host, the shared runtime.</span></span>

<span data-ttu-id="86a36-139">Quando viene richiamata un'app che usa appHost, la partizione del certificato a cui accede l'app è diversa dall'host predefinito notarizzato.</span><span class="sxs-lookup"><span data-stu-id="86a36-139">When an app using the appHost is invoked, the certificate partition accessed by the app is different from the notarized default host.</span></span> <span data-ttu-id="86a36-140">Se l'app deve accedere ai certificati `dotnet run` installati tramite l'host predefinito, usa `dotnet <filename.dll>` il comando per eseguire l'app dal relativo file di progetto oppure usa il comando per avviare direttamente l'app.</span><span class="sxs-lookup"><span data-stu-id="86a36-140">If your app must access the certificates installed through the default host, use the `dotnet run` command to run your app from its project file, or use the `dotnet <filename.dll>` command to start the app directly.</span></span>

<span data-ttu-id="86a36-141">Ulteriori informazioni su questo scenario sono disponibili nella sezione [ASP.NET Core, macOS e certificati.](#aspnet-core-and-macos-and-certificates)</span><span class="sxs-lookup"><span data-stu-id="86a36-141">More information about this scenario is provided in the [ASP.NET Core and macOS and certificates](#aspnet-core-and-macos-and-certificates) section.</span></span>

## <a name="aspnet-core-and-macos-and-certificates"></a><span data-ttu-id="86a36-142">ASP.NET Core e macOS e certificati</span><span class="sxs-lookup"><span data-stu-id="86a36-142">ASP.NET Core and macOS and certificates</span></span>

<span data-ttu-id="86a36-143">.NET Core offre la possibilità di gestire i certificati <xref:System.Security.Cryptography.X509Certificates> nel portachiavi di macOS con la classe.</span><span class="sxs-lookup"><span data-stu-id="86a36-143">.NET Core provides the ability to manage certificates in the macOS Keychain with the <xref:System.Security.Cryptography.X509Certificates> class.</span></span> <span data-ttu-id="86a36-144">L'accesso al portachiavi macOS utilizza l'identità delle applicazioni come chiave primaria per decidere quale partizione prendere in considerazione.</span><span class="sxs-lookup"><span data-stu-id="86a36-144">Access to the macOS Keychain uses the applications identity as the primary key when deciding which partition to consider.</span></span> <span data-ttu-id="86a36-145">Ad esempio, le applicazioni non firmate archiviano i segreti nella partizione non firmata, ma le applicazioni firmate archiviano i segreti solo nelle partizioni a cui possono accedere.</span><span class="sxs-lookup"><span data-stu-id="86a36-145">For example, unsigned applications store secrets in the unsigned partition, but signed applications store their secrets in partitions only they can access.</span></span> <span data-ttu-id="86a36-146">L'origine di esecuzione che richiama l'app decide quale partizione usare.</span><span class="sxs-lookup"><span data-stu-id="86a36-146">The source of execution that invokes your app decides which partition to use.</span></span>

<span data-ttu-id="86a36-147">.NET Core fornisce tre origini di esecuzione: `dotnet` [appHost](#apphost-is-disabled-by-default), host predefinito (il comando) e un host personalizzato.</span><span class="sxs-lookup"><span data-stu-id="86a36-147">.NET Core provides three sources of execution: [appHost](#apphost-is-disabled-by-default), default host (the `dotnet` command), and a custom host.</span></span> <span data-ttu-id="86a36-148">Ogni modello di esecuzione può avere identità diverse, firmate o non firmate, e hanno accesso a partizioni diverse all'interno del portachiavi.</span><span class="sxs-lookup"><span data-stu-id="86a36-148">Each execution model may have different identities, either signed or unsigned, and has access to different partitions within the Keychain.</span></span> <span data-ttu-id="86a36-149">I certificati importati da una modalità potrebbero non essere accessibili da un'altra.</span><span class="sxs-lookup"><span data-stu-id="86a36-149">Certificates imported by one mode may not be accessible from another.</span></span> <span data-ttu-id="86a36-150">Ad esempio, le versioni notarizzate di .NET Core hanno un host predefinito firmato.</span><span class="sxs-lookup"><span data-stu-id="86a36-150">For example, the notarized versions of .NET Core have a default host that is signed.</span></span> <span data-ttu-id="86a36-151">I certificati vengono importati in una partizione sicura in base alla relativa identità.</span><span class="sxs-lookup"><span data-stu-id="86a36-151">Certificates are imported into a secure partition based on its identity.</span></span> <span data-ttu-id="86a36-152">Questi certificati non sono accessibili da un appHost generato, poiché appHost non è firmato.</span><span class="sxs-lookup"><span data-stu-id="86a36-152">These certificates aren't accessible from a generated appHost, as the appHost is unsigned.</span></span>

<span data-ttu-id="86a36-153">Un altro esempio, per impostazione predefinita, ASP.NET Core importa un certificato SSL predefinito tramite l'host predefinito.</span><span class="sxs-lookup"><span data-stu-id="86a36-153">Another example, by default, ASP.NET Core imports a default SSL certificate through the default host.</span></span> <span data-ttu-id="86a36-154">ASP.NET applicazioni Core che usano un appHost non avranno accesso a questo certificato e riceveranno un errore quando .NET Core rileva che il certificato non è accessibile.</span><span class="sxs-lookup"><span data-stu-id="86a36-154">ASP.NET Core applications that use an appHost won't have access to this certificate and will receive an error when .NET Core detects the certificate isn't accessible.</span></span> <span data-ttu-id="86a36-155">Il messaggio di errore fornisce istruzioni su come risolvere il problema.</span><span class="sxs-lookup"><span data-stu-id="86a36-155">The error message provides instructions on how to fix this problem.</span></span>

<span data-ttu-id="86a36-156">Se è necessaria la condivisione dei certificati, macOS fornisce opzioni di configurazione con l'utilità. `security`</span><span class="sxs-lookup"><span data-stu-id="86a36-156">If certificate sharing is required, macOS provides configuration options with the `security` utility.</span></span>

<span data-ttu-id="86a36-157">Per ulteriori informazioni su come risolvere i problemi relativi ai certificati ASP.NET Core, vedere [Applicare HTTPS in ASP.NET Core](/aspnet/core/security/enforcing-ssl?view=aspnetcore-3.1&tabs=visual-studio#troubleshoot-certificate-problems).</span><span class="sxs-lookup"><span data-stu-id="86a36-157">For more information on how to troubleshoot ASP.NET Core certificate issues, see [Enforce HTTPS in ASP.NET Core](/aspnet/core/security/enforcing-ssl?view=aspnetcore-3.1&tabs=visual-studio#troubleshoot-certificate-problems).</span></span>

## <a name="default-entitlements"></a><span data-ttu-id="86a36-158">Diritti predefiniti</span><span class="sxs-lookup"><span data-stu-id="86a36-158">Default entitlements</span></span>

<span data-ttu-id="86a36-159">L'host predefinito di .NET Core (il `dotnet` comando) dispone di un set di permessi predefiniti.</span><span class="sxs-lookup"><span data-stu-id="86a36-159">.NET Core’s default host (the `dotnet` command) has a set of default entitlements.</span></span> <span data-ttu-id="86a36-160">Questi diritti sono necessari per il corretto funzionamento di .NET Core.These entitlements are required for proper operation of .NET Core.</span><span class="sxs-lookup"><span data-stu-id="86a36-160">These entitlements are required for proper operation of .NET Core.</span></span> <span data-ttu-id="86a36-161">È possibile che l'applicazione necessiti di diritti aggiuntivi, nel qual caso sarà necessario generare e usare un [appHost](#apphost-is-disabled-by-default) e quindi aggiungere i permessi necessari in locale.</span><span class="sxs-lookup"><span data-stu-id="86a36-161">It's possible that your application may need additional entitlements, in which case you'll need to generate and use an [appHost](#apphost-is-disabled-by-default) and then add the necessary entitlements locally.</span></span>

<span data-ttu-id="86a36-162">Set predefinito di permessi per .NET Core:</span><span class="sxs-lookup"><span data-stu-id="86a36-162">Default set of entitlements for .NET Core:</span></span>

- `com.apple.security.cs.allow-jit`
- `com.apple.security.cs.allow-unsigned-executable-memory`
- `com.apple.security.cs.allow-dyld-environment-variables`
- `com.apple.security.cs.disable-library-validation`

## <a name="notarize-a-net-core-app"></a><span data-ttu-id="86a36-163">Annotare un'app .NET Core</span><span class="sxs-lookup"><span data-stu-id="86a36-163">Notarize a .NET Core app</span></span>

<span data-ttu-id="86a36-164">Se vuoi che l'applicazione venga eseguita su macOS Catalina (versione 10.15) o successiva, ti consigliamo di annotare la tua app.</span><span class="sxs-lookup"><span data-stu-id="86a36-164">If you want your application to run on macOS Catalina (version 10.15) or higher, you'll want to notarize your app.</span></span> <span data-ttu-id="86a36-165">L'appHost inviato con l'applicazione per la notarizzazione deve essere usato con almeno gli stessi permessi predefiniti per .NET Core.The appHost you submit with your application for notarization should be used with at least the same [default entitlements](#default-entitlements) for .NET Core.</span><span class="sxs-lookup"><span data-stu-id="86a36-165">The appHost you submit with your application for notarization should be used with at least the same [default entitlements](#default-entitlements) for .NET Core.</span></span>

## <a name="next-steps"></a><span data-ttu-id="86a36-166">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="86a36-166">Next steps</span></span>

- <span data-ttu-id="86a36-167">[Dipendenze e requisiti di .NET Core.](dependencies.md)</span><span class="sxs-lookup"><span data-stu-id="86a36-167">[.NET Core dependencies and requirements](dependencies.md).</span></span>
- <span data-ttu-id="86a36-168">[Installare .NET Core SDK](sdk.md).</span><span class="sxs-lookup"><span data-stu-id="86a36-168">[Install the .NET Core SDK](sdk.md).</span></span>
- [<span data-ttu-id="86a36-169">Installare .NET Core Runtime</span><span class="sxs-lookup"><span data-stu-id="86a36-169">Install the .NET Core Runtime</span></span>](runtime.md)
