---
title: Uso dell'autenticazione di macOS Catalina
description: Come gestire i problemi di autenticazione e autenticazione con macOS quando si installa il runtime, l'SDK e le app di .NET Core compilati con .NET Core.
author: thraka
ms.author: adegeo
ms.date: 02/14/2020
ms.openlocfilehash: b16ef4074f829246df0aedebf7ffe4df75faed51
ms.sourcegitcommit: 00aa62e2f469c2272a457b04e66b4cc3c97a800b
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/28/2020
ms.locfileid: "78165365"
---
# <a name="macos-catalina-notarization-and-the-impact-on-net-core-downloads-and-projects"></a><span data-ttu-id="93cb6-103">Autenticazione di macOS Catalina e l'effetto sui download e sui progetti di .NET Core</span><span class="sxs-lookup"><span data-stu-id="93cb6-103">macOS Catalina Notarization and the impact on .NET Core downloads and projects</span></span>

<span data-ttu-id="93cb6-104">A partire da macOS Catalina (versione 10,15), tutto il software creato dopo il 1 ° giugno 2019 e distribuito con ID sviluppatore deve essere autenticato.</span><span class="sxs-lookup"><span data-stu-id="93cb6-104">Beginning with macOS Catalina (version 10.15), all software built after June 1, 2019, and distributed with Developer ID, must be notarized.</span></span> <span data-ttu-id="93cb6-105">Questo requisito si applica al runtime di .NET Core, alla .NET Core SDK e al software creato con .NET Core.</span><span class="sxs-lookup"><span data-stu-id="93cb6-105">This requirement applies to the .NET Core runtime, .NET Core SDK, and software created with .NET Core.</span></span> <span data-ttu-id="93cb6-106">Questo articolo descrive gli scenari comuni che si possono incontrare con l'autenticazione di .NET Core e macOS.</span><span class="sxs-lookup"><span data-stu-id="93cb6-106">This article describes the common scenarios you may face with .NET Core and macOS notarization.</span></span>

## <a name="installing-net-core"></a><span data-ttu-id="93cb6-107">Installazione di .NET Core</span><span class="sxs-lookup"><span data-stu-id="93cb6-107">Installing .NET Core</span></span>

<span data-ttu-id="93cb6-108">I programmi di installazione per .NET Core (Runtime e SDK) versioni 3,1, 3,0 e 2,1 sono stati autenticati dal 18 febbraio 2020.</span><span class="sxs-lookup"><span data-stu-id="93cb6-108">The installers for .NET Core (both runtime and SDK) versions 3.1, 3.0, and 2.1, have been notarized since February 18, 2020.</span></span> <span data-ttu-id="93cb6-109">Le versioni precedenti rilasciate non vengono autenticate.</span><span class="sxs-lookup"><span data-stu-id="93cb6-109">Prior released versions aren't notarized.</span></span> <span data-ttu-id="93cb6-110">È possibile installare manualmente una versione non autenticata di .NET Core scaricando prima il programma di installazione e quindi usando il comando `sudo installer`.</span><span class="sxs-lookup"><span data-stu-id="93cb6-110">You can manually install a non-notarized version of .NET Core by first downloading the installer, and then using the `sudo installer` command.</span></span> <span data-ttu-id="93cb6-111">Per altre informazioni, vedere [scaricare e installare manualmente per MacOS](sdk.md?pivots=os-macos#download-and-manually-install).</span><span class="sxs-lookup"><span data-stu-id="93cb6-111">For more information, see [Download and manually install for macOS](sdk.md?pivots=os-macos#download-and-manually-install).</span></span>

<span data-ttu-id="93cb6-112">A partire dalle versioni seguenti, i programmi di installazione di .NET Core sono autenticati:</span><span class="sxs-lookup"><span data-stu-id="93cb6-112">Beginning with the following versions, the .NET Core installers are notarized:</span></span>

- <span data-ttu-id="93cb6-113">Runtime di .NET Core</span><span class="sxs-lookup"><span data-stu-id="93cb6-113">.NET Core Runtime</span></span>
  - <span data-ttu-id="93cb6-114">2.1.16</span><span class="sxs-lookup"><span data-stu-id="93cb6-114">2.1.16</span></span>
  - <span data-ttu-id="93cb6-115">3.0.3</span><span class="sxs-lookup"><span data-stu-id="93cb6-115">3.0.3</span></span>
  - <span data-ttu-id="93cb6-116">3.1.2</span><span class="sxs-lookup"><span data-stu-id="93cb6-116">3.1.2</span></span>

- <span data-ttu-id="93cb6-117">.NET Core SDK</span><span class="sxs-lookup"><span data-stu-id="93cb6-117">.NET Core SDK</span></span>
  - <span data-ttu-id="93cb6-118">2.1.512</span><span class="sxs-lookup"><span data-stu-id="93cb6-118">2.1.512</span></span>
  - <span data-ttu-id="93cb6-119">3.0.103</span><span class="sxs-lookup"><span data-stu-id="93cb6-119">3.0.103</span></span>
  - <span data-ttu-id="93cb6-120">3.1.102</span><span class="sxs-lookup"><span data-stu-id="93cb6-120">3.1.102</span></span>

## <a name="apphost-is-disabled-by-default"></a><span data-ttu-id="93cb6-121">appHost è disabilitato per impostazione predefinita</span><span class="sxs-lookup"><span data-stu-id="93cb6-121">appHost is disabled by default</span></span>

<span data-ttu-id="93cb6-122">Per impostazione predefinita, le versioni non autenticate di .NET Core SDK 3,0 e versioni successive producono un eseguibile nativo di Mach-O (noto come **APPHOST**) quando il progetto viene compilato, pubblicato o eseguito.</span><span class="sxs-lookup"><span data-stu-id="93cb6-122">By default, non-notarized versions of the .NET Core SDK 3.0 and above produce a native Mach-O executable (known as the **appHost**) when your project compiles, publishes, or is run.</span></span> <span data-ttu-id="93cb6-123">Questo eseguibile è un modo pratico per eseguire l'app.</span><span class="sxs-lookup"><span data-stu-id="93cb6-123">This executable is a convenient way to run your app.</span></span> <span data-ttu-id="93cb6-124">In caso contrario, l'app deve essere avviata eseguendo `dotnet <filename.dll>`.</span><span class="sxs-lookup"><span data-stu-id="93cb6-124">Otherwise, your app must be started by running `dotnet <filename.dll>`.</span></span> <span data-ttu-id="93cb6-125">Quando appHost è abilitato, il comando `dotnet run` viene richiamato nel contesto di appHost.</span><span class="sxs-lookup"><span data-stu-id="93cb6-125">When the appHost is enabled, the `dotnet run` command is invoked in the context of the appHost.</span></span> <span data-ttu-id="93cb6-126">Per ulteriori informazioni, vedere [contesto di APPHOST](#context-of-the-apphost).</span><span class="sxs-lookup"><span data-stu-id="93cb6-126">For more information, see [Context of the appHost](#context-of-the-apphost).</span></span>

<span data-ttu-id="93cb6-127">A partire dalle versioni autenticate di .NET Core SDK 3,0 e versioni successive, l'eseguibile appHost non viene generato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="93cb6-127">Starting with the notarized versions of the .NET Core SDK 3.0 and above, the appHost executable isn't generated by default.</span></span> <span data-ttu-id="93cb6-128">È possibile attivare la generazione di appHost con l'impostazione booleana [`UseAppHost`](../project-sdk/msbuild-props.md#useapphost) nel file di progetto.</span><span class="sxs-lookup"><span data-stu-id="93cb6-128">You can turn on appHost generation with the [`UseAppHost`](../project-sdk/msbuild-props.md#useapphost) boolean setting in the project file.</span></span> <span data-ttu-id="93cb6-129">È anche possibile impostare il appHost con il parametro `-p:UseAppHost` nella riga di comando per il comando `dotnet` specifico eseguito:</span><span class="sxs-lookup"><span data-stu-id="93cb6-129">You can also toggle the appHost with the `-p:UseAppHost` parameter on the command line for the specific `dotnet` command you run:</span></span>

- <span data-ttu-id="93cb6-130">File di progetto</span><span class="sxs-lookup"><span data-stu-id="93cb6-130">Project file</span></span>

  ```xml
  <PropertyGroup>
    <UseAppHost>true</UseAppHost>
  </PropertyGroup>
  ```

- <span data-ttu-id="93cb6-131">Parametro della riga di comando</span><span class="sxs-lookup"><span data-stu-id="93cb6-131">Command-line parameter</span></span>

  ```dotnetcli
  dotnet run -p:UseAppHost=true
  ```

<span data-ttu-id="93cb6-132">Quando si pubblica l'app [autonoma](../deploying/index.md#publish-self-contained), viene sempre creato un APPHOST.</span><span class="sxs-lookup"><span data-stu-id="93cb6-132">An appHost is always created when you publish your app [self-contained](../deploying/index.md#publish-self-contained).</span></span>

<span data-ttu-id="93cb6-133">Per ulteriori informazioni sull'impostazione di `UseAppHost`, vedere [Proprietà MSBuild per Microsoft. NET. SDK](../project-sdk/msbuild-props.md#useapphost).</span><span class="sxs-lookup"><span data-stu-id="93cb6-133">For more information about the `UseAppHost` setting, see [MSBuild properties for Microsoft.NET.Sdk](../project-sdk/msbuild-props.md#useapphost).</span></span>

### <a name="context-of-the-apphost"></a><span data-ttu-id="93cb6-134">Contesto di appHost</span><span class="sxs-lookup"><span data-stu-id="93cb6-134">Context of the appHost</span></span>

<span data-ttu-id="93cb6-135">Quando il appHost è abilitato nel progetto e si usa il comando `dotnet run` per eseguire l'app, l'app viene richiamata nel contesto di appHost e non nell'host predefinito (l'host predefinito è il comando `dotnet`).</span><span class="sxs-lookup"><span data-stu-id="93cb6-135">When the appHost is enabled in your project, and you use the `dotnet run` command to run your app, the app is invoked in the context of the appHost and not the default host (the default host is the `dotnet` command).</span></span> <span data-ttu-id="93cb6-136">Se il appHost è disabilitato nel progetto, il `dotnet run` comando esegue l'applicazione nel contesto dell'host predefinito.</span><span class="sxs-lookup"><span data-stu-id="93cb6-136">If the appHost is disabled in your project, the `dotnet run` command runs your app in the context of the default host.</span></span> <span data-ttu-id="93cb6-137">Anche se il appHost è disabilitato, la pubblicazione dell'applicazione come autonoma genera un eseguibile appHost e gli utenti usano tale eseguibile per eseguire l'app.</span><span class="sxs-lookup"><span data-stu-id="93cb6-137">Even if the appHost is disabled, publishing your app as self-contained generates an appHost executable, and users use that executable to run your app.</span></span> <span data-ttu-id="93cb6-138">L'esecuzione dell'app con `dotnet <filename.dll>` richiama l'app con l'host predefinito, il runtime condiviso.</span><span class="sxs-lookup"><span data-stu-id="93cb6-138">Running your app with `dotnet <filename.dll>` invokes the app with the default host, the shared runtime.</span></span>

<span data-ttu-id="93cb6-139">Quando viene richiamata un'app che usa il appHost, la partizione del certificato a cui accede l'app è diversa dall'host predefinito autenticato.</span><span class="sxs-lookup"><span data-stu-id="93cb6-139">When an app using the appHost is invoked, the certificate partition accessed by the app is different from the notarized default host.</span></span> <span data-ttu-id="93cb6-140">Se l'app deve accedere ai certificati installati tramite l'host predefinito, usare il comando `dotnet run` per eseguire l'app dal file di progetto oppure usare il comando `dotnet <filename.dll>` per avviare direttamente l'app.</span><span class="sxs-lookup"><span data-stu-id="93cb6-140">If your app must access the certificates installed through the default host, use the `dotnet run` command to run your app from its project file, or use the `dotnet <filename.dll>` command to start the app directly.</span></span>

<span data-ttu-id="93cb6-141">Altre informazioni su questo scenario sono disponibili nella sezione [ASP.NET Core e MacOS e sui certificati](#aspnet-core-and-macos-and-certificates) .</span><span class="sxs-lookup"><span data-stu-id="93cb6-141">More information about this scenario is provided in the [ASP.NET Core and macOS and certificates](#aspnet-core-and-macos-and-certificates) section.</span></span>

## <a name="aspnet-core-and-macos-and-certificates"></a><span data-ttu-id="93cb6-142">ASP.NET Core e macOS e certificati</span><span class="sxs-lookup"><span data-stu-id="93cb6-142">ASP.NET Core and macOS and certificates</span></span>

<span data-ttu-id="93cb6-143">.NET Core consente di gestire i certificati nel keychain di macOS con la classe <xref:System.Security.Cryptography.X509Certificates>.</span><span class="sxs-lookup"><span data-stu-id="93cb6-143">.NET Core provides the ability to manage certificates in the macOS Keychain with the <xref:System.Security.Cryptography.X509Certificates> class.</span></span> <span data-ttu-id="93cb6-144">L'accesso al keychain di macOS usa l'identità delle applicazioni come chiave primaria per decidere quale partizione prendere in considerazione.</span><span class="sxs-lookup"><span data-stu-id="93cb6-144">Access to the macOS Keychain uses the applications identity as the primary key when deciding which partition to consider.</span></span> <span data-ttu-id="93cb6-145">Ad esempio, le applicazioni non firmate archiviano i segreti nella partizione senza segno, ma le applicazioni firmate archiviano i segreti solo nelle partizioni a cui possono accedere.</span><span class="sxs-lookup"><span data-stu-id="93cb6-145">For example, unsigned applications store secrets in the unsigned partition, but signed applications store their secrets in partitions only they can access.</span></span> <span data-ttu-id="93cb6-146">L'origine di esecuzione che richiama l'app decide quale partizione usare.</span><span class="sxs-lookup"><span data-stu-id="93cb6-146">The source of execution that invokes your app decides which partition to use.</span></span>

<span data-ttu-id="93cb6-147">.NET Core fornisce tre origini di esecuzione: [APPHOST](#apphost-is-disabled-by-default), host predefinito (il comando `dotnet`) e un host personalizzato.</span><span class="sxs-lookup"><span data-stu-id="93cb6-147">.NET Core provides three sources of execution: [appHost](#apphost-is-disabled-by-default), default host (the `dotnet` command), and a custom host.</span></span> <span data-ttu-id="93cb6-148">Ogni modello di esecuzione può avere identità diverse, con segno o senza segno e ha accesso a partizioni diverse all'interno del keychain.</span><span class="sxs-lookup"><span data-stu-id="93cb6-148">Each execution model may have different identities, either signed or unsigned, and has access to different partitions within the Keychain.</span></span> <span data-ttu-id="93cb6-149">I certificati importati da una modalità potrebbero non essere accessibili da un altro.</span><span class="sxs-lookup"><span data-stu-id="93cb6-149">Certificates imported by one mode may not be accessible from another.</span></span> <span data-ttu-id="93cb6-150">Ad esempio, le versioni autenticate di .NET Core hanno un host predefinito firmato.</span><span class="sxs-lookup"><span data-stu-id="93cb6-150">For example, the notarized versions of .NET Core have a default host that is signed.</span></span> <span data-ttu-id="93cb6-151">I certificati vengono importati in una partizione sicura in base alla relativa identità.</span><span class="sxs-lookup"><span data-stu-id="93cb6-151">Certificates are imported into a secure partition based on its identity.</span></span> <span data-ttu-id="93cb6-152">Questi certificati non sono accessibili da un appHost generato, perché appHost non è firmato.</span><span class="sxs-lookup"><span data-stu-id="93cb6-152">These certificates aren't accessible from a generated appHost, as the appHost is unsigned.</span></span>

<span data-ttu-id="93cb6-153">Un altro esempio, per impostazione predefinita, ASP.NET Core importa un certificato SSL predefinito tramite l'host predefinito.</span><span class="sxs-lookup"><span data-stu-id="93cb6-153">Another example, by default, ASP.NET Core imports a default SSL certificate through the default host.</span></span> <span data-ttu-id="93cb6-154">ASP.NET Core applicazioni che usano un appHost non avranno accesso a questo certificato e riceveranno un errore quando .NET Core rileva che il certificato non è accessibile.</span><span class="sxs-lookup"><span data-stu-id="93cb6-154">ASP.NET Core applications that use an appHost won't have access to this certificate and will receive an error when .NET Core detects the certificate isn't accessible.</span></span> <span data-ttu-id="93cb6-155">Nel messaggio di errore vengono fornite istruzioni su come risolvere il problema.</span><span class="sxs-lookup"><span data-stu-id="93cb6-155">The error message provides instructions on how to fix this problem.</span></span>

<span data-ttu-id="93cb6-156">Se è richiesta la condivisione del certificato, macOS fornisce le opzioni di configurazione con l'utilità `security`.</span><span class="sxs-lookup"><span data-stu-id="93cb6-156">If certificate sharing is required, macOS provides configuration options with the `security` utility.</span></span>

<span data-ttu-id="93cb6-157">Per ulteriori informazioni su come risolvere i problemi relativi al certificato ASP.NET Core, vedere [enforce HTTPS in ASP.NET Core](/aspnet/core/security/enforcing-ssl?view=aspnetcore-3.1&tabs=visual-studio#troubleshoot-certificate-problems).</span><span class="sxs-lookup"><span data-stu-id="93cb6-157">For more information on how to troubleshoot ASP.NET Core certificate issues, see [Enforce HTTPS in ASP.NET Core](/aspnet/core/security/enforcing-ssl?view=aspnetcore-3.1&tabs=visual-studio#troubleshoot-certificate-problems).</span></span>

## <a name="default-entitlements"></a><span data-ttu-id="93cb6-158">Diritti predefiniti</span><span class="sxs-lookup"><span data-stu-id="93cb6-158">Default entitlements</span></span>

<span data-ttu-id="93cb6-159">L'host predefinito di .NET Core (il comando `dotnet`) dispone di un set di diritti predefiniti.</span><span class="sxs-lookup"><span data-stu-id="93cb6-159">.NET Core’s default host (the `dotnet` command) has a set of default entitlements.</span></span> <span data-ttu-id="93cb6-160">Questi diritti sono necessari per il funzionamento corretto di .NET Core.</span><span class="sxs-lookup"><span data-stu-id="93cb6-160">These entitlements are required for proper operation of .NET Core.</span></span> <span data-ttu-id="93cb6-161">È possibile che l'applicazione richieda diritti aggiuntivi, nel qual caso sarà necessario generare e usare un [APPHOST](#apphost-is-disabled-by-default) e quindi aggiungere i diritti necessari in locale.</span><span class="sxs-lookup"><span data-stu-id="93cb6-161">It's possible that your application may need additional entitlements, in which case you'll need to generate and use an [appHost](#apphost-is-disabled-by-default) and then add the necessary entitlements locally.</span></span>
 
<span data-ttu-id="93cb6-162">Set predefinito di diritti per .NET Core:</span><span class="sxs-lookup"><span data-stu-id="93cb6-162">Default set of entitlements for .NET Core:</span></span>

- `com.apple.security.cs.allow-jit`
- `com.apple.security.cs.allow-unsigned-executable-memory`
- `com.apple.security.cs.allow-dyld-environment-variables`
- `com.apple.security.cs.disable-library-validation`

## <a name="notarize-a-net-core-app"></a><span data-ttu-id="93cb6-163">Autenticare un'app .NET Core</span><span class="sxs-lookup"><span data-stu-id="93cb6-163">Notarize a .NET Core app</span></span>

<span data-ttu-id="93cb6-164">Se si vuole che l'applicazione venga eseguita in macOS Catalina (versione 10,15) o successiva, è necessario autenticare l'app.</span><span class="sxs-lookup"><span data-stu-id="93cb6-164">If you want your application to run on macOS Catalina (version 10.15) or higher, you'll want to notarize your app.</span></span> <span data-ttu-id="93cb6-165">I appHost inviati con l'applicazione per l'autenticazione devono essere usati con almeno gli stessi [diritti predefiniti](#default-entitlements) per .NET Core.</span><span class="sxs-lookup"><span data-stu-id="93cb6-165">The appHost you submit with your application for notarization should be used with at least the same [default entitlements](#default-entitlements) for .NET Core.</span></span>

## <a name="next-steps"></a><span data-ttu-id="93cb6-166">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="93cb6-166">Next steps</span></span>

- <span data-ttu-id="93cb6-167">[Dipendenze e requisiti di .NET Core](dependencies.md).</span><span class="sxs-lookup"><span data-stu-id="93cb6-167">[.NET Core dependencies and requirements](dependencies.md).</span></span>
- <span data-ttu-id="93cb6-168">[Installare il .NET Core SDK](sdk.md).</span><span class="sxs-lookup"><span data-stu-id="93cb6-168">[Install the .NET Core SDK](sdk.md).</span></span>
- [<span data-ttu-id="93cb6-169">Installare il runtime di .NET Core</span><span class="sxs-lookup"><span data-stu-id="93cb6-169">Install the .NET Core Runtime</span></span>](runtime.md)
