---
title: Metodi - Guida a C#
description: Panoramica dei metodi e dei parametri e dei valori restituiti dei metodi
ms.technology: csharp-fundamentals
ms.date: 05/21/2018
ms.assetid: 577a8527-1081-4b36-9b9e-0685b6553c6e
ms.openlocfilehash: f44c83408e884d76eef5e2b5abbca511fbae2a1f
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/14/2020
ms.locfileid: "79399448"
---
# <a name="methods"></a><span data-ttu-id="fd429-103">Metodi</span><span class="sxs-lookup"><span data-stu-id="fd429-103">Methods</span></span>

<span data-ttu-id="fd429-104">Un metodo è un blocco di codice che contiene una serie di istruzioni.</span><span class="sxs-lookup"><span data-stu-id="fd429-104">A method is a code block that contains a series of statements.</span></span> <span data-ttu-id="fd429-105">Un programma fa in modo che le istruzioni vengano eseguite chiamando il metodo e specificando gli argomenti del metodo obbligatori.</span><span class="sxs-lookup"><span data-stu-id="fd429-105">A program causes the statements to be executed by calling the method and specifying any required method arguments.</span></span> <span data-ttu-id="fd429-106">In C#, ogni istruzione eseguita viene attuata nel contesto di un metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-106">In C#, every executed instruction is performed in the context of a method.</span></span> <span data-ttu-id="fd429-107">Il metodo `Main` è il punto di ingresso per ogni applicazione C# e viene chiamato da Common Language Runtime (CLR) quando viene avviato il programma.</span><span class="sxs-lookup"><span data-stu-id="fd429-107">The `Main` method is the entry point for every C# application and it is called by the common language runtime (CLR) when the program is started.</span></span>

> [!NOTE]
> <span data-ttu-id="fd429-108">In questo argomento vengono descritti i metodi denominati.</span><span class="sxs-lookup"><span data-stu-id="fd429-108">This topic discusses named methods.</span></span> <span data-ttu-id="fd429-109">Per informazioni sulle funzioni anonime, vedere [Funzioni anonime](programming-guide/statements-expressions-operators/anonymous-functions.md).</span><span class="sxs-lookup"><span data-stu-id="fd429-109">For information about anonymous functions, see [Anonymous Functions](programming-guide/statements-expressions-operators/anonymous-functions.md).</span></span>

<a name="signatures"></a>

## <a name="method-signatures"></a><span data-ttu-id="fd429-110">Firme del metodo</span><span class="sxs-lookup"><span data-stu-id="fd429-110">Method signatures</span></span>

<span data-ttu-id="fd429-111">I metodi vengono dichiarati in `class` o `struct` specificando:</span><span class="sxs-lookup"><span data-stu-id="fd429-111">Methods are declared in a `class` or `struct` by specifying:</span></span>

- <span data-ttu-id="fd429-112">Un livello di accesso facoltativo, ad esempio `public` o `private`.</span><span class="sxs-lookup"><span data-stu-id="fd429-112">An optional access level, such as `public` or `private`.</span></span> <span data-ttu-id="fd429-113">Il valore predefinito è `private`.</span><span class="sxs-lookup"><span data-stu-id="fd429-113">The default is `private`.</span></span>
- <span data-ttu-id="fd429-114">Modificatori facoltativi, ad esempio `abstract` o `sealed`.</span><span class="sxs-lookup"><span data-stu-id="fd429-114">Optional modifiers such as `abstract` or `sealed`.</span></span>
- <span data-ttu-id="fd429-115">Il valore restituito o `void` se il metodo non ha alcun valore.</span><span class="sxs-lookup"><span data-stu-id="fd429-115">The return value, or `void` if the method has none.</span></span>
- <span data-ttu-id="fd429-116">Nome del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-116">The method name.</span></span>
- <span data-ttu-id="fd429-117">Tutti i parametri del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-117">Any method parameters.</span></span> <span data-ttu-id="fd429-118">I parametri del metodo vengono racchiusi tra parentesi e separati da virgole.</span><span class="sxs-lookup"><span data-stu-id="fd429-118">Method parameters are enclosed in parentheses and are separated by commas.</span></span> <span data-ttu-id="fd429-119">Le parentesi vuote indicano che il metodo non richiede parametri.</span><span class="sxs-lookup"><span data-stu-id="fd429-119">Empty parentheses indicate that the method requires no parameters.</span></span>

<span data-ttu-id="fd429-120">Queste parti costituiscono la firma del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-120">These parts together form the method signature.</span></span>

> [!NOTE]
> <span data-ttu-id="fd429-121">Un tipo restituito di un metodo non fa parte della firma del metodo in caso di overload dei metodi.</span><span class="sxs-lookup"><span data-stu-id="fd429-121">A return type of a method is not part of the signature of the method for the purposes of method overloading.</span></span> <span data-ttu-id="fd429-122">Fa tuttavia parte della firma del metodo quando si determina la compatibilità tra un delegato e il metodo a cui fa riferimento.</span><span class="sxs-lookup"><span data-stu-id="fd429-122">However, it is part of the signature of the method when determining the compatibility between a delegate and the method that it points to.</span></span>

<span data-ttu-id="fd429-123">L'esempio seguente definisce una classe denominata `Motorcycle` che contiene cinque metodi:</span><span class="sxs-lookup"><span data-stu-id="fd429-123">The following example defines a class named `Motorcycle` that contains five methods:</span></span>

[!code-csharp[csSnippets.Methods#40](../../samples/snippets/csharp/concepts/methods/methods40.cs#40)]

<span data-ttu-id="fd429-124">Si noti che la classe `Motorcycle` include un metodo sottoposto a overload, ovvero `Drive`.</span><span class="sxs-lookup"><span data-stu-id="fd429-124">Note that the `Motorcycle` class includes an overloaded method, `Drive`.</span></span> <span data-ttu-id="fd429-125">Due metodi hanno lo stesso nome, ma devono essere differenziati in base ai relativi tipi di parametri.</span><span class="sxs-lookup"><span data-stu-id="fd429-125">Two methods have the same name, but must be differentiated by their parameter types.</span></span>

<a name="invocation"></a>

## <a name="method-invocation"></a><span data-ttu-id="fd429-126">Chiamata al metodo</span><span class="sxs-lookup"><span data-stu-id="fd429-126">Method invocation</span></span>

<span data-ttu-id="fd429-127">I metodi possono essere di *istanza* o *statici*.</span><span class="sxs-lookup"><span data-stu-id="fd429-127">Methods can be either *instance* or *static*.</span></span> <span data-ttu-id="fd429-128">Per chiamare un metodo di istanza è necessario creare un'istanza di un oggetto e chiamare il metodo nell'oggetto; un metodo di istanza agisce sull'istanza e i relativi dati.</span><span class="sxs-lookup"><span data-stu-id="fd429-128">Invoking an instance method requires that you instantiate an object and call the method on that object; an instance method operates on that instance and its data.</span></span> <span data-ttu-id="fd429-129">La chiamata a un metodo statico viene eseguita facendo riferimento al nome del tipo a cui appartiene il metodo; i metodi statici non agiscono sui dati dell'istanza.</span><span class="sxs-lookup"><span data-stu-id="fd429-129">You invoke a static method by referencing the name of the type to which the method belongs; static methods do not operate on instance data.</span></span> <span data-ttu-id="fd429-130">Se si tenta di chiamare un metodo statico attraverso un'istanza di un oggetto viene generato un errore del compilatore.</span><span class="sxs-lookup"><span data-stu-id="fd429-130">Attempting to call a static method through an object instance generates a compiler error.</span></span>

<span data-ttu-id="fd429-131">La chiamata a un metodo è un'operazione analoga all'accesso a un campo.</span><span class="sxs-lookup"><span data-stu-id="fd429-131">Calling a method is like accessing a field.</span></span> <span data-ttu-id="fd429-132">Dopo il nome dell'oggetto (in una chiamata a un metodo di istanza) o il nome del tipo (in una chiamata a un metodo `static`), aggiungere un punto, il nome del metodo e le parentesi.</span><span class="sxs-lookup"><span data-stu-id="fd429-132">After the object name (if you are calling an instance method) or the type name (if you are calling a `static` method), add a period, the name of the method, and parentheses.</span></span> <span data-ttu-id="fd429-133">Gli argomenti vengono elencati tra parentesi e separati da virgole.</span><span class="sxs-lookup"><span data-stu-id="fd429-133">Arguments are listed within the parentheses, and are separated by commas.</span></span>

<span data-ttu-id="fd429-134">La definizione del metodo specifica i nomi e i tipi di tutti i parametri obbligatori.</span><span class="sxs-lookup"><span data-stu-id="fd429-134">The method definition specifies the names and types of any parameters that are required.</span></span> <span data-ttu-id="fd429-135">Quando il chiamante chiama il metodo, specifica valori concreti, chiamati argomenti, per ogni parametro.</span><span class="sxs-lookup"><span data-stu-id="fd429-135">When a caller invokes the method, it provides concrete values, called arguments, for each parameter.</span></span> <span data-ttu-id="fd429-136">Gli argomenti devono essere compatibili con il tipo di parametro, ma il nome dell'argomento, se usato nel codice chiamante, non deve essere lo stesso del parametro denominato definito nel metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-136">The arguments must be compatible with the parameter type, but the argument name, if one is used in the calling code, does not have to be the same as the parameter named defined in the method.</span></span> <span data-ttu-id="fd429-137">Nell'esempio seguente il metodo `Square` include un singolo parametro di tipo `int` denominato *i*.</span><span class="sxs-lookup"><span data-stu-id="fd429-137">In the following example, the `Square` method includes a single parameter of type `int` named *i*.</span></span> <span data-ttu-id="fd429-138">La prima chiamata al metodo passa al metodo `Square` una variabile di tipo `int` denominata *num*, la seconda passa una costante numerica e la terza passa un'espressione.</span><span class="sxs-lookup"><span data-stu-id="fd429-138">The first method call passes the `Square` method a variable of type `int` named *num*; the second, a numeric constant; and the third, an expression.</span></span>

[!code-csharp[csSnippets.Methods#74](../../samples/snippets/csharp/concepts/methods/params74.cs#74)]

<span data-ttu-id="fd429-139">La forma più comune di chiamata al metodo usa argomenti posizionali; specifica gli argomenti nello stesso ordine dei parametri del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-139">The most common form of method invocation used positional arguments; it supplies arguments in the same order as method parameters.</span></span> <span data-ttu-id="fd429-140">Per questa ragione, i metodi della classe `Motorcycle` possono essere chiamati come nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="fd429-140">The methods of the `Motorcycle` class can therefore be called as in the following example.</span></span> <span data-ttu-id="fd429-141">La chiamata al metodo `Drive`, ad esempio, include due argomenti che corrispondono ai due parametri nella sintassi del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-141">The call to the `Drive` method, for example, includes two arguments that correspond to the two parameters in the method's syntax.</span></span> <span data-ttu-id="fd429-142">Il primo diventa il valore del parametro `miles`, il secondo il valore del parametro `speed`.</span><span class="sxs-lookup"><span data-stu-id="fd429-142">The first becomes the value of the `miles` parameter, the second the value of the `speed` parameter.</span></span>

[!code-csharp[csSnippets.Methods#41](../../samples/snippets/csharp/concepts/methods/methods40.cs#41)]

<span data-ttu-id="fd429-143">Quando si esegue una chiamata a un metodo è anche possibile usare *argomenti denominati* anziché argomenti posizionali.</span><span class="sxs-lookup"><span data-stu-id="fd429-143">You can also used *named arguments* instead of positional arguments when invoking a method.</span></span> <span data-ttu-id="fd429-144">Quando si usano gli argomenti denominati, si specifica il nome del parametro seguito da due punti (":") e l'argomento.</span><span class="sxs-lookup"><span data-stu-id="fd429-144">When using named arguments, you specify the parameter name followed by a colon (":") and the argument.</span></span> <span data-ttu-id="fd429-145">Gli argomenti del metodo possono essere in qualsiasi ordine, a condizione che siano presenti tutti gli argomenti necessari.</span><span class="sxs-lookup"><span data-stu-id="fd429-145">Arguments to the method can appear in any order, as long as all required arguments are present.</span></span> <span data-ttu-id="fd429-146">L'esempio seguente usa gli argomenti denominati per richiamare il metodo `TestMotorcycle.Drive`.</span><span class="sxs-lookup"><span data-stu-id="fd429-146">The following example uses named arguments to invoke the `TestMotorcycle.Drive` method.</span></span> <span data-ttu-id="fd429-147">In questo esempio gli argomenti denominati vengono passati nell'ordine inverso dall'elenco di parametri del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-147">In this example, the named arguments are passed in the opposite order from the method's parameter list.</span></span>

[!code-csharp[csSnippets.Methods#45](../../samples/snippets/csharp/concepts/methods/named1.cs#45)]

<span data-ttu-id="fd429-148">È possibile richiamare un metodo usando argomenti posizionali e denominati.</span><span class="sxs-lookup"><span data-stu-id="fd429-148">You can invoke a method using both positional arguments and named arguments.</span></span> <span data-ttu-id="fd429-149">Un argomento posizionale non può, tuttavia, seguire un argomento denominato.</span><span class="sxs-lookup"><span data-stu-id="fd429-149">However, a positional argument cannot follow a named argument.</span></span> <span data-ttu-id="fd429-150">L'esempio seguente richiama il metodo `TestMotorcycle.Drive` dall'esempio precedente usando un argomento posizionale e un argomento denominato.</span><span class="sxs-lookup"><span data-stu-id="fd429-150">The following example invokes the `TestMotorcycle.Drive` method from the previous example using one positional argument and one named argument.</span></span>

[!code-csharp[csSnippets.Methods#46](../../samples/snippets/csharp/concepts/methods/named2.cs#46)]

<a name="inherited"></a>

## <a name="inherited-and-overridden-methods"></a><span data-ttu-id="fd429-151">Metodi ereditati e sottoposti a override</span><span class="sxs-lookup"><span data-stu-id="fd429-151">Inherited and overridden methods</span></span>

<span data-ttu-id="fd429-152">Oltre ai membri definiti in modo esplicito in un tipo, un tipo eredita i membri definiti nelle relative classi base.</span><span class="sxs-lookup"><span data-stu-id="fd429-152">In addition to the members that are explicitly defined in a type, a type inherits members defined in its base classes.</span></span> <span data-ttu-id="fd429-153">Poiché tutti i tipi del sistema di tipi gestiti ereditano direttamente o indirettamente dalla classe <xref:System.Object>, tutti i tipi di ereditano i relativi membri, ad esempio <xref:System.Object.Equals(System.Object)>, <xref:System.Object.GetType> e <xref:System.Object.ToString>.</span><span class="sxs-lookup"><span data-stu-id="fd429-153">Since all types in the managed type system inherit directly or indirectly from the <xref:System.Object> class, all types inherit its members, such as <xref:System.Object.Equals(System.Object)>, <xref:System.Object.GetType>, and <xref:System.Object.ToString>.</span></span> <span data-ttu-id="fd429-154">L'esempio seguente definisce una classe `Person`, crea l'istanza di due oggetti `Person` e chiama il metodo `Person.Equals` per determinare se i due oggetti sono uguali.</span><span class="sxs-lookup"><span data-stu-id="fd429-154">The following example defines a `Person` class, instantiates two `Person` objects, and calls the `Person.Equals` method to determine whether the two objects are equal.</span></span> <span data-ttu-id="fd429-155">Il metodo `Equals`, tuttavia, non è definito nella classe `Person`; viene ereditato da <xref:System.Object>.</span><span class="sxs-lookup"><span data-stu-id="fd429-155">The `Equals` method, however, is not defined in the `Person` class; it is inherited from <xref:System.Object>.</span></span>

[!code-csharp[csSnippets.Methods#104](../../samples/snippets/csharp/concepts/methods/inherited1.cs#104)]

<span data-ttu-id="fd429-156">I tipi possono eseguire l'override dei membri ereditati usando la parola chiave `override` e specificando un'implementazione per il metodo sottoposto a override.</span><span class="sxs-lookup"><span data-stu-id="fd429-156">Types can override inherited members by using the `override` keyword and providing an implementation for the overridden method.</span></span> <span data-ttu-id="fd429-157">La firma del metodo deve essere la stessa del metodo sottoposto a override.</span><span class="sxs-lookup"><span data-stu-id="fd429-157">The method signature must be the same as that of the overridden method.</span></span> <span data-ttu-id="fd429-158">L'esempio seguente è simile a quello precedente, ad eccezione del fatto che viene eseguito l'override del metodo <xref:System.Object.Equals(System.Object)>.</span><span class="sxs-lookup"><span data-stu-id="fd429-158">The following example is like the previous one, except that it overrides the <xref:System.Object.Equals(System.Object)> method.</span></span> <span data-ttu-id="fd429-159">Viene anche eseguito l'override del metodo <xref:System.Object.GetHashCode> poiché i due metodi devono fornire risultati coerenti.</span><span class="sxs-lookup"><span data-stu-id="fd429-159">(It also overrides the <xref:System.Object.GetHashCode> method, since the two methods are intended to provide consistent results.)</span></span>

[!code-csharp[csSnippets.Methods#105](../../samples/snippets/csharp/concepts/methods/overridden1.cs#105)]

<a name="passing"></a>

## <a name="passing-parameters"></a><span data-ttu-id="fd429-160">Passaggio dei parametri</span><span class="sxs-lookup"><span data-stu-id="fd429-160">Passing parameters</span></span>

<span data-ttu-id="fd429-161">I tipi in C# sono *tipi di valore* o *tipi di riferimento*.</span><span class="sxs-lookup"><span data-stu-id="fd429-161">Types in C# are either *value types* or *reference types*.</span></span> <span data-ttu-id="fd429-162">Per un elenco dei tipi di valore predefiniti, vedere [Tipi e variabili](./tour-of-csharp/types-and-variables.md).</span><span class="sxs-lookup"><span data-stu-id="fd429-162">For a list of built-in value types, see [Types and variables](./tour-of-csharp/types-and-variables.md).</span></span> <span data-ttu-id="fd429-163">Per impostazione predefinita, i tipi di valore e i tipi di riferimento vengono passati a un metodo per valore.</span><span class="sxs-lookup"><span data-stu-id="fd429-163">By default, both value types and reference types are passed to a method by value.</span></span>

<a name="byval"></a>

### <a name="passing-parameters-by-value"></a><span data-ttu-id="fd429-164">Passaggio di parametri per valore</span><span class="sxs-lookup"><span data-stu-id="fd429-164">Passing parameters by value</span></span>

<span data-ttu-id="fd429-165">Quando un tipo valore viene passato a un metodo per valore, viene passata al metodo una copia dell'oggetto anziché l'oggetto stesso.</span><span class="sxs-lookup"><span data-stu-id="fd429-165">When a value type is passed to a method by value, a copy of the object instead of the object itself is passed to the method.</span></span> <span data-ttu-id="fd429-166">Di conseguenza, le modifiche all'oggetto nel metodo chiamato non hanno effetto sull'oggetto originale quando il controllo torna al chiamante.</span><span class="sxs-lookup"><span data-stu-id="fd429-166">Therefore, changes to the object in the called method have no effect on the original object when control returns to the caller.</span></span>

<span data-ttu-id="fd429-167">L'esempio seguente passa un tipo di valore a un metodo per valore e il metodo chiamato tenta di modificare il valore del tipo di valore.</span><span class="sxs-lookup"><span data-stu-id="fd429-167">The following example passes a value type to a method by value, and the called method attempts to change the value type's value.</span></span> <span data-ttu-id="fd429-168">Definisce una variabile di tipo `int`, che è un tipo di valore, ne inizializza il valore a 20 e la passa a un metodo denominato `ModifyValue` che modifica il valore della variabile in 30.</span><span class="sxs-lookup"><span data-stu-id="fd429-168">It defines a variable of type `int`, which is a value type, initializes its value to 20, and passes it to a method named `ModifyValue` that changes the variable's value to 30.</span></span> <span data-ttu-id="fd429-169">Quando il metodo viene restituito, tuttavia, il valore della variabile rimane invariato.</span><span class="sxs-lookup"><span data-stu-id="fd429-169">When the method returns, however, the variable's value remains unchanged.</span></span>

[!code-csharp[csSnippets.Methods#10](../../samples/snippets/csharp/concepts/methods/byvalue10.cs#10)]

<span data-ttu-id="fd429-170">Quando viene passato un oggetto di tipo riferimento a un metodo per valore, viene passato un riferimento all'oggetto per valore,</span><span class="sxs-lookup"><span data-stu-id="fd429-170">When an object of a reference type is passed to a method by value, a reference to the object is passed by value.</span></span> <span data-ttu-id="fd429-171">ovvero il metodo riceve un argomento che indica la posizione dell'oggetto, ma non l'oggetto stesso.</span><span class="sxs-lookup"><span data-stu-id="fd429-171">That is, the method receives not the object itself, but an argument that indicates the location of the object.</span></span> <span data-ttu-id="fd429-172">Se si modifica un membro dell'oggetto usando questo riferimento, la modifica si riflette nell'oggetto quando il controllo torna al metodo chiamante.</span><span class="sxs-lookup"><span data-stu-id="fd429-172">If you change a member of the object by using this reference, the change is reflected in the object when control returns to the calling method.</span></span> <span data-ttu-id="fd429-173">Tuttavia, la sostituzione dell'oggetto passato al metodo non ha effetto sull'oggetto originale quando il controllo torna al chiamante.</span><span class="sxs-lookup"><span data-stu-id="fd429-173">However, replacing the object passed to the method has no effect on the original object when control returns to the caller.</span></span>

<span data-ttu-id="fd429-174">L'esempio seguente definisce una classe (che è un tipo riferimento) denominata `SampleRefType`.</span><span class="sxs-lookup"><span data-stu-id="fd429-174">The following example defines a class (which is a reference type) named `SampleRefType`.</span></span> <span data-ttu-id="fd429-175">Crea un'istanza di un oggetto `SampleRefType`, assegna 44 al campo `value` e passa l'oggetto al metodo `ModifyObject`.</span><span class="sxs-lookup"><span data-stu-id="fd429-175">It instantiates a `SampleRefType` object, assigns 44 to its `value` field, and passes the object to the `ModifyObject` method.</span></span> <span data-ttu-id="fd429-176">L'esempio è sostanzialmente uguale al precedente in quanto passa un argomento per valore a un metodo</span><span class="sxs-lookup"><span data-stu-id="fd429-176">This example does essentially the same thing as the previous example -- it passes an argument by value to a method.</span></span> <span data-ttu-id="fd429-177">ma, essendo usato un tipo riferimento, il risultato è diverso.</span><span class="sxs-lookup"><span data-stu-id="fd429-177">But because a reference type is used, the result is different.</span></span> <span data-ttu-id="fd429-178">La modifica eseguita in `ModifyObject` al campo `obj.value` cambia anche il campo `value` dell'argomento `rt` nel metodo `Main` in 33, come mostra l'output dell'esempio.</span><span class="sxs-lookup"><span data-stu-id="fd429-178">The modification that is made in `ModifyObject` to the `obj.value` field also changes the `value` field of the argument, `rt`, in the `Main` method to 33, as the output from the example shows.</span></span>

[!code-csharp[csSnippets.Methods#42](../../samples/snippets/csharp/concepts/methods/byvalue42.cs#42)]

<a name="byref"></a>

### <a name="passing-parameters-by-reference"></a><span data-ttu-id="fd429-179">Passaggio di parametri per riferimento</span><span class="sxs-lookup"><span data-stu-id="fd429-179">Passing parameters by reference</span></span>

<span data-ttu-id="fd429-180">È necessario passare un parametro per riferimento quando si vuole modificare il valore di un argomento in un metodo e questa modifica deve essere applicata quando il controllo torna al metodo chiamante.</span><span class="sxs-lookup"><span data-stu-id="fd429-180">You pass a parameter by reference when you want to change the value of an argument in a method and want to reflect that change when control returns to the calling method.</span></span> <span data-ttu-id="fd429-181">Per passare un parametro per [`ref`](language-reference/keywords/ref.md) [`out`](language-reference/keywords/out-parameter-modifier.md) riferimento, utilizzare la parola chiave o .</span><span class="sxs-lookup"><span data-stu-id="fd429-181">To pass a parameter by reference, you use the [`ref`](language-reference/keywords/ref.md) or [`out`](language-reference/keywords/out-parameter-modifier.md) keyword.</span></span> <span data-ttu-id="fd429-182">È anche possibile passare un valore per riferimento per [`in`](language-reference/keywords/in-parameter-modifier.md) evitare la copia, ma comunque impedire modifiche utilizzando la parola chiave .</span><span class="sxs-lookup"><span data-stu-id="fd429-182">You can also pass a value by reference to avoid copying but still prevent modifications using the [`in`](language-reference/keywords/in-parameter-modifier.md) keyword.</span></span>

<span data-ttu-id="fd429-183">L'esempio seguente è identico a quello precedente, ad eccezione del fatto che il valore viene passato per riferimento al metodo `ModifyValue`.</span><span class="sxs-lookup"><span data-stu-id="fd429-183">The following example is identical to the previous one, except the value is passed by reference to the `ModifyValue` method.</span></span> <span data-ttu-id="fd429-184">Quando il valore del parametro è modificato nel metodo `ModifyValue`, la modifica del valore si riflette quando il controllo torna al chiamante.</span><span class="sxs-lookup"><span data-stu-id="fd429-184">When the value of the parameter is modified in the `ModifyValue` method, the change in value is reflected when control returns to the caller.</span></span>

[!code-csharp[csSnippets.Methods#106](../../samples/snippets/csharp/concepts/methods/byref106.cs#106)]

<span data-ttu-id="fd429-185">Un modello comune che usa parametri di riferimento implica lo scambio dei valori delle variabili.</span><span class="sxs-lookup"><span data-stu-id="fd429-185">A common pattern that uses by ref parameters involves swapping the values of variables.</span></span> <span data-ttu-id="fd429-186">Si passano due variabili a un metodo per riferimento e il metodo scambia il loro contenuto.</span><span class="sxs-lookup"><span data-stu-id="fd429-186">You pass two variables to a method by reference, and the method swaps their contents.</span></span> <span data-ttu-id="fd429-187">L'esempio seguente scambia i valori integer.</span><span class="sxs-lookup"><span data-stu-id="fd429-187">The following example swaps integer values.</span></span>

[!code-csharp[csSnippets.Methods#106](../../samples/snippets/csharp/concepts/methods/swap107.cs#107)]

<span data-ttu-id="fd429-188">Il passaggio di un parametro di tipo riferimento consente di modificare il valore del riferimento stesso anziché il valore dei singoli elementi o campi.</span><span class="sxs-lookup"><span data-stu-id="fd429-188">Passing a reference-type parameter allows you to change the value of the reference itself, rather than the value of its individual elements or fields.</span></span>

<a name="paramarray"></a>

### <a name="parameter-arrays"></a><span data-ttu-id="fd429-189">Matrici di parametri</span><span class="sxs-lookup"><span data-stu-id="fd429-189">Parameter arrays</span></span>

<span data-ttu-id="fd429-190">In alcuni casi, il requisito che richiede di specificare il numero esatto di argomenti per il metodo è limitativo.</span><span class="sxs-lookup"><span data-stu-id="fd429-190">Sometimes, the requirement that you specify the exact number of arguments to your method is restrictive.</span></span> <span data-ttu-id="fd429-191">Usando la parola chiave `params` per indicare che un parametro è una matrice di parametri, si consente la chiamata al metodo con un numero variabile di argomenti.</span><span class="sxs-lookup"><span data-stu-id="fd429-191">By using the `params` keyword to indicate that a parameter is a parameter array, you allow your method to be called with a variable number of arguments.</span></span> <span data-ttu-id="fd429-192">Il parametro contrassegnato con la parola chiave `params` deve essere di tipo matrice e deve essere l'ultimo parametro dell'elenco di parametri del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-192">The parameter tagged with the `params` keyword must be an array type, and it must be the last parameter in the method's parameter list.</span></span>

<span data-ttu-id="fd429-193">Un chiamante potrà quindi richiamare il metodo in uno dei tre modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="fd429-193">A caller can then invoke the method in either of three ways:</span></span>

- <span data-ttu-id="fd429-194">Passando una matrice del tipo appropriato che contiene il numero desiderato di elementi.</span><span class="sxs-lookup"><span data-stu-id="fd429-194">By passing an array of the appropriate type that contains the desired number of elements.</span></span>
- <span data-ttu-id="fd429-195">Passando un elenco delimitato da virgole di singoli argomenti del tipo appropriato al metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-195">By passing a comma-separated list of individual arguments of the appropriate type to the method.</span></span>
- <span data-ttu-id="fd429-196">Non specificando un argomento nella matrice di parametri.</span><span class="sxs-lookup"><span data-stu-id="fd429-196">By not providing an argument to the parameter array.</span></span>

<span data-ttu-id="fd429-197">L'esempio seguente definisce un metodo denominato `GetVowels` che restituisce tutte le vocali da una matrice di parametri.</span><span class="sxs-lookup"><span data-stu-id="fd429-197">The following example defines a method named `GetVowels` that returns all the vowels from a parameter array.</span></span> <span data-ttu-id="fd429-198">Il metodo `Main` illustra tutti e tre i metodi di chiamata al metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-198">The `Main` method illustrates all three ways of invoking the method.</span></span> <span data-ttu-id="fd429-199">Non è necessario che i chiamanti specifichino un argomento per i parametri che includono il modificatore `params`.</span><span class="sxs-lookup"><span data-stu-id="fd429-199">Callers are not required to supply any arguments for parameters that include the `params` modifier.</span></span> <span data-ttu-id="fd429-200">In questo caso, il parametro è `null`.</span><span class="sxs-lookup"><span data-stu-id="fd429-200">In that case, the parameter is `null`.</span></span>

[!code-csharp[csSnippets.Methods#75](~/samples/snippets/csharp/concepts/methods/params75.cs#75)]

<a name="optional"></a>

## <a name="optional-parameters-and-arguments"></a><span data-ttu-id="fd429-201">Parametri e argomenti facoltativi</span><span class="sxs-lookup"><span data-stu-id="fd429-201">Optional parameters and arguments</span></span>

<span data-ttu-id="fd429-202">La definizione di un metodo può specificare che i parametri sono obbligatori o facoltativi.</span><span class="sxs-lookup"><span data-stu-id="fd429-202">A method definition can specify that its parameters are required or that they are optional.</span></span> <span data-ttu-id="fd429-203">I parametri sono obbligatori per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="fd429-203">By default, parameters are required.</span></span> <span data-ttu-id="fd429-204">I parametri facoltativi vengono specificati includendo il valore predefinito del parametro nella definizione del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-204">Optional parameters are specified by including the parameter's default value in the method definition.</span></span> <span data-ttu-id="fd429-205">Quando il metodo viene chiamato, se non sono specificati argomenti per un parametro facoltativo, viene usato il valore predefinito.</span><span class="sxs-lookup"><span data-stu-id="fd429-205">When the method is called, if no argument is supplied for an optional parameter, the default value is used instead.</span></span>

<span data-ttu-id="fd429-206">Il valore predefinito del parametro deve essere assegnato da uno dei tipi di espressioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="fd429-206">The parameter's default value must be assigned by one of the following kinds of expressions:</span></span>

- <span data-ttu-id="fd429-207">Una costante, ad esempio una stringa letterale o un numero.</span><span class="sxs-lookup"><span data-stu-id="fd429-207">A constant, such as a literal string or number.</span></span>
- <span data-ttu-id="fd429-208">Un'espressione del form `new ValType()`, dove `ValType` è un tipo di valore.</span><span class="sxs-lookup"><span data-stu-id="fd429-208">An expression of the form `new ValType()`, where `ValType` is a value type.</span></span> <span data-ttu-id="fd429-209">Osservare come venga richiamato il costruttore senza parametri implicito del tipo di valore, che non è un membro effettivo del tipo.</span><span class="sxs-lookup"><span data-stu-id="fd429-209">Note that this invokes the value type's implicit parameterless constructor, which is not an actual member of the type.</span></span>
- <span data-ttu-id="fd429-210">Un'espressione del form `default(ValType)`, dove `ValType` è un tipo di valore.</span><span class="sxs-lookup"><span data-stu-id="fd429-210">An expression of the form `default(ValType)`, where `ValType` is a value type.</span></span>

<span data-ttu-id="fd429-211">Se un metodo include parametri obbligatori e facoltativi, i parametri facoltativi sono definiti alla fine dell'elenco di parametri, dopo tutti i parametri obbligatori.</span><span class="sxs-lookup"><span data-stu-id="fd429-211">If a method includes both required and optional parameters, optional parameters are defined at the end of the parameter list, after all required parameters.</span></span>

<span data-ttu-id="fd429-212">L'esempio seguente definisce un metodo, `ExampleMethod`, con un parametro obbligatorio e due facoltativi.</span><span class="sxs-lookup"><span data-stu-id="fd429-212">The following example defines a method, `ExampleMethod`, that has one required and two optional parameters.</span></span>

[!code-csharp[csSnippets.Methods#21](../../samples/snippets/csharp/concepts/methods/optional1.cs#21)]

<span data-ttu-id="fd429-213">Se viene richiamato un metodo con più argomenti facoltativi usando argomenti posizionali, il chiamante deve specificare un argomento per tutti i parametri facoltativi, dal primo all'ultimo parametro per il quale è specificato un argomento.</span><span class="sxs-lookup"><span data-stu-id="fd429-213">If a method with multiple optional arguments is invoked using positional arguments, the caller must supply an argument for all optional parameters from the first one to the last one for which an argument is supplied.</span></span> <span data-ttu-id="fd429-214">Nel caso del metodo `ExampleMethod`, ad esempio, se il chiamante specifica un argomento per il parametro `description`, deve specificarne uno anche per il parametro `optionalInt`.</span><span class="sxs-lookup"><span data-stu-id="fd429-214">In the case of the  `ExampleMethod` method, for example, if the caller supplies an argument for the `description` parameter, it must also supply one for the `optionalInt` parameter.</span></span> <span data-ttu-id="fd429-215">`opt.ExampleMethod(2, 2, "Addition of 2 and 2");` è una chiamata a un metodo valido; `opt.ExampleMethod(2, , "Addition of 2 and 0");` genera un errore di compilazione "Argomento mancante".</span><span class="sxs-lookup"><span data-stu-id="fd429-215">`opt.ExampleMethod(2, 2, "Addition of 2 and 2");` is a valid method call; `opt.ExampleMethod(2, , "Addition of 2 and 0");` generates an "Argument missing" compiler error.</span></span>

<span data-ttu-id="fd429-216">Se un metodo viene chiamato usando argomenti denominati o una combinazione di argomenti posizionali e denominati, il chiamante può omettere tutti gli argomenti successivi all'ultimo argomento posizionale nella chiamata al metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-216">If a method is called using named arguments or a combination of positional and named arguments, the caller can omit any arguments that follow the last positional argument in the method call.</span></span>

<span data-ttu-id="fd429-217">L'esempio seguente esegue una chiamata al metodo `ExampleMethod` tre volte.</span><span class="sxs-lookup"><span data-stu-id="fd429-217">The following example calls the `ExampleMethod` method three times.</span></span>  <span data-ttu-id="fd429-218">Le prime due chiamate al metodo usano argomenti posizionali.</span><span class="sxs-lookup"><span data-stu-id="fd429-218">The first two method calls use positional arguments.</span></span> <span data-ttu-id="fd429-219">La prima omette entrambi gli argomenti facoltativi, mentre la seconda omette l'ultimo argomento.</span><span class="sxs-lookup"><span data-stu-id="fd429-219">The first omits both optional arguments, while the second omits the last argument.</span></span> <span data-ttu-id="fd429-220">La terza chiamata al metodo specifica un argomento posizionale per il parametro obbligatorio, ma usa un argomento denominato per specificare un valore per il parametro `description` omettendo l'argomento `optionalInt`.</span><span class="sxs-lookup"><span data-stu-id="fd429-220">The third method call supplies a positional argument for the required parameter, but uses a named argument to supply a value to the `description` parameter while omitting the `optionalInt` argument.</span></span>

[!code-csharp[csSnippets.Methods#22](../../samples/snippets/csharp/concepts/methods/optional1.cs#22)]

<span data-ttu-id="fd429-221">L'uso di parametri facoltativi ha effetto sulla *risoluzione dell'overload* o sulla modalità con la quale il compilatore C# determina l'overload specifico da richiamare tramite una chiamata al metodo come descritto di seguito:</span><span class="sxs-lookup"><span data-stu-id="fd429-221">The use of optional parameters affects *overload resolution*, or the way in which the C# compiler determines which particular overload should be invoked by a method call, as follows:</span></span>

- <span data-ttu-id="fd429-222">Un metodo, un indicizzatore o un costruttore è un candidato per l'esecuzione se ogni parametro è facoltativo o corrisponde, per nome o per posizione, a un solo argomento nell'istruzione chiamante e tale argomento può essere convertito nel tipo del parametro.</span><span class="sxs-lookup"><span data-stu-id="fd429-222">A method, indexer, or constructor is a candidate for execution if each of its parameters either is optional or corresponds, by name or by position, to a single argument in the calling statement, and that argument can be converted to the type of the parameter.</span></span>
- <span data-ttu-id="fd429-223">Se è disponibile più di un candidato, agli argomenti specificati in modo esplicito vengono applicate le regole di risoluzione dell'overload per le conversioni preferite.</span><span class="sxs-lookup"><span data-stu-id="fd429-223">If more than one candidate is found, overload resolution rules for preferred conversions are applied to the arguments that are explicitly specified.</span></span> <span data-ttu-id="fd429-224">Gli argomenti omessi per i parametri facoltativi vengono ignorati.</span><span class="sxs-lookup"><span data-stu-id="fd429-224">Omitted arguments for optional parameters are ignored.</span></span>
- <span data-ttu-id="fd429-225">Se due candidati sono giudicati ugualmente validi, la preferenza va a un candidato che non ha parametri facoltativi per i quali sono stati omessi gli argomenti nella chiamata.</span><span class="sxs-lookup"><span data-stu-id="fd429-225">If two candidates are judged to be equally good, preference goes to a candidate that does not have optional parameters for which arguments were omitted in the call.</span></span> <span data-ttu-id="fd429-226">Si tratta di una conseguenza di una preferenza generale nella risoluzione dell'overload per i candidati che hanno un numero di parametri inferiore.</span><span class="sxs-lookup"><span data-stu-id="fd429-226">This is a consequence of a general preference in overload resolution for candidates that have fewer parameters.</span></span>

<a name="return"></a>

## <a name="return-values"></a><span data-ttu-id="fd429-227">Valori restituiti</span><span class="sxs-lookup"><span data-stu-id="fd429-227">Return values</span></span>

<span data-ttu-id="fd429-228">I metodi possono restituire un valore al chiamante.</span><span class="sxs-lookup"><span data-stu-id="fd429-228">Methods can return a value to the caller.</span></span> <span data-ttu-id="fd429-229">Se il tipo restituito, ovvero il tipo elencato prima del nome del metodo, non è `void`, il metodo può restituire il valore usando la parola chiave `return`.</span><span class="sxs-lookup"><span data-stu-id="fd429-229">If the return type (the type listed before the method name) is not `void`, the method can return the value by using the `return` keyword.</span></span> <span data-ttu-id="fd429-230">Un'istruzione con la parola chiave `return` seguita da una variabile, una costante o un'espressione corrispondente al tipo restituito restituirà tale valore al chiamante del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-230">A statement with the `return` keyword followed by a variable, constant, or expression that matches the return type will return that value to the method caller.</span></span> <span data-ttu-id="fd429-231">Per usare la parola chiave `return` per restituire un valore, sono obbligatori metodi con un tipo restituito non void.</span><span class="sxs-lookup"><span data-stu-id="fd429-231">Methods with a non-void return type are required to use the `return` keyword to return a value.</span></span> <span data-ttu-id="fd429-232">La parola chiave `return` interrompe anche l'esecuzione del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-232">The `return` keyword also stops the execution of the method.</span></span>

<span data-ttu-id="fd429-233">Se il tipo restituito è `void`, un'istruzione `return` senza un valore è tuttavia utile per interrompere l'esecuzione del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-233">If the return type is `void`, a `return` statement without a value is still useful to stop the execution of the method.</span></span> <span data-ttu-id="fd429-234">Senza la parola chiave `return` , l'esecuzione del metodo verrà interrotta quando verrà raggiunta la fine del blocco di codice.</span><span class="sxs-lookup"><span data-stu-id="fd429-234">Without the `return` keyword, the method will stop executing when it reaches the end of the code block.</span></span>

<span data-ttu-id="fd429-235">Ad esempio, questi due metodi usano la parola chiave `return` per restituire numeri interi:</span><span class="sxs-lookup"><span data-stu-id="fd429-235">For example, these two methods use the `return` keyword to return integers:</span></span>

[!code-csharp[csSnippets.Methods#44](../../samples/snippets/csharp/concepts/methods/return44.cs#44)]

<span data-ttu-id="fd429-236">Per usare un valore restituito da un metodo, il metodo chiamante può usare la chiamata al metodo stessa ovunque è sufficiente un valore dello stesso tipo.</span><span class="sxs-lookup"><span data-stu-id="fd429-236">To use a value returned from a method, the calling method can use the method call itself anywhere a value of the same type would be sufficient.</span></span> <span data-ttu-id="fd429-237">È inoltre possibile assegnare il valore restituito a una variabile.</span><span class="sxs-lookup"><span data-stu-id="fd429-237">You can also assign the return value to a variable.</span></span> <span data-ttu-id="fd429-238">I due esempi seguenti di codice ottengono lo stesso risultato:</span><span class="sxs-lookup"><span data-stu-id="fd429-238">For example, the following two code examples accomplish the same goal:</span></span>

[!code-csharp[csSnippets.Methods#45](../../samples/snippets/csharp/concepts/methods/return44.cs#45)]

[!code-csharp[csSnippets.Methods#46](../../samples/snippets/csharp/concepts/methods/return44.cs#46)]

<span data-ttu-id="fd429-239">L'uso di una variabile locale, in questo caso `result`, per archiviare un valore è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="fd429-239">Using a local variable, in this case, `result`, to store a value is optional.</span></span> <span data-ttu-id="fd429-240">Potrebbe migliorare la leggibilità del codice o potrebbe essere necessario se si desidera archiviare il valore originale dell'argomento per l'intero ambito del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-240">It may help the readability of the code, or it may be necessary if you need to store the original value of the argument for the entire scope of the method.</span></span>

<span data-ttu-id="fd429-241">In alcuni casi, si vuole che il metodo restituisca più di un singolo valore.</span><span class="sxs-lookup"><span data-stu-id="fd429-241">Sometimes, you want your method to return more than a single value.</span></span> <span data-ttu-id="fd429-242">A questo scopo, a partire da C# 7.0 è possibile usare *tipi di tupla* e *letterali di tupla*.</span><span class="sxs-lookup"><span data-stu-id="fd429-242">Starting with C# 7.0, you can do this easily by using *tuple types* and *tuple literals*.</span></span> <span data-ttu-id="fd429-243">Il tipo di tupla definisce i tipi di dati degli elementi della tupla.</span><span class="sxs-lookup"><span data-stu-id="fd429-243">The tuple type defines the data types of the tuple's elements.</span></span> <span data-ttu-id="fd429-244">I letterali di tupla specificano i valori effettivi della tupla restituita.</span><span class="sxs-lookup"><span data-stu-id="fd429-244">Tuple literals provide the actual values of the returned tuple.</span></span> <span data-ttu-id="fd429-245">Nell'esempio seguente `(string, string, string, int)` definisce il tipo di tupla restituito dal metodo `GetPersonalInfo`.</span><span class="sxs-lookup"><span data-stu-id="fd429-245">In the following example, `(string, string, string, int)` defines the tuple type that is returned by the `GetPersonalInfo` method.</span></span> <span data-ttu-id="fd429-246">L'espressione `(per.FirstName, per.MiddleName, per.LastName, per.Age)` è il letterale della tupla; il metodo restituisce il nome iniziale, centrale e finale e la durata di un oggetto `PersonInfo`.</span><span class="sxs-lookup"><span data-stu-id="fd429-246">The expression `(per.FirstName, per.MiddleName, per.LastName, per.Age)` is the tuple literal; the method returns the first, middle, and last name, along with the age, of a `PersonInfo` object.</span></span>

```csharp
public (string, string, string, int) GetPersonalInfo(string id)
{
    PersonInfo per = PersonInfo.RetrieveInfoById(id);
    return (per.FirstName, per.MiddleName, per.LastName, per.Age);
}
```

<span data-ttu-id="fd429-247">Il chiamante può quindi usare la tupla restituita con codice simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="fd429-247">The caller can then consume the returned tuple with code like the following:</span></span>

```csharp
var person = GetPersonalInfo("111111111")
Console.WriteLine("{person.Item1} {person.Item3}: age = {person.Item4}");
```

<span data-ttu-id="fd429-248">È anche possibile assegnare i nomi agli elementi della tupla nella definizione del tipo della tupla.</span><span class="sxs-lookup"><span data-stu-id="fd429-248">Names can also be assigned to the tuple elements in the tuple type definition.</span></span> <span data-ttu-id="fd429-249">L'esempio seguente mostra una versione alternativa del metodo `GetPersonalInfo` che usa elementi denominati:</span><span class="sxs-lookup"><span data-stu-id="fd429-249">The following example shows an alternate version of the `GetPersonalInfo` method that uses named elements:</span></span>

```csharp
public (string FName, string MName, string LName, int Age) GetPersonalInfo(string id)
{
    PersonInfo per = PersonInfo.RetrieveInfoById(id);
    return (per.FirstName, per.MiddleName, per.LastName, per.Age);
}
```

<span data-ttu-id="fd429-250">La chiamata precedente al metodo `GetPersonInfo` può quindi essere modificata come segue:</span><span class="sxs-lookup"><span data-stu-id="fd429-250">The previous call to the `GetPersonInfo` method can then be modified as follows:</span></span>

```csharp
var person = GetPersonalInfo("111111111");
Console.WriteLine("{person.FName} {person.LName}: age = {person.Age}");
```

<span data-ttu-id="fd429-251">Se a un metodo viene passata una matrice come argomento e il metodo modifica il valore dei singoli elementi, non è necessario che il metodo restituisca la matrice, anche se è possibile scegliere di effettuare questa operazione per ragioni di stile o per il flusso funzionale di valori.</span><span class="sxs-lookup"><span data-stu-id="fd429-251">If a method is passed an array as an argument and modifies the value of individual elements, it is not necessary for the method to return the array, although you may choose to do so for good style or functional flow of values.</span></span>  <span data-ttu-id="fd429-252">L'operazione non è necessaria perché C# passa tutti i tipi riferimento per valore e il valore di un riferimento a una matrice è il puntatore alla matrice.</span><span class="sxs-lookup"><span data-stu-id="fd429-252">This is because C# passes all reference types by value, and the value of an array reference is the pointer to the array.</span></span> <span data-ttu-id="fd429-253">Nell'esempio seguente le modifiche al contenuto della matrice `values` eseguite nel metodo `DoubleValues` sono rilevabili da qualsiasi codice che include un riferimento alla matrice.</span><span class="sxs-lookup"><span data-stu-id="fd429-253">In the following example, changes to the contents of the `values` array that are made in the `DoubleValues` method are observable by any code that has a reference to the array.</span></span>

[!code-csharp[csSnippets.Methods#101](../../samples/snippets/csharp/concepts/methods/returnarray1.cs#101)]

<a name="extension"></a>

## <a name="extension-methods"></a><span data-ttu-id="fd429-254">Metodi di estensione</span><span class="sxs-lookup"><span data-stu-id="fd429-254">Extension methods</span></span>

<span data-ttu-id="fd429-255">In genere, è possibile aggiungere un metodo a un tipo esistente in due modi:</span><span class="sxs-lookup"><span data-stu-id="fd429-255">Ordinarily, there are two ways to add a method to an existing type:</span></span>

- <span data-ttu-id="fd429-256">Modificare il codice sorgente per il tipo.</span><span class="sxs-lookup"><span data-stu-id="fd429-256">Modify the source code for that type.</span></span> <span data-ttu-id="fd429-257">Questa operazione non è possibile se non si è proprietari del codice sorgente del tipo.</span><span class="sxs-lookup"><span data-stu-id="fd429-257">You cannot do this, of course, if you do not own the type's source code.</span></span> <span data-ttu-id="fd429-258">Questa operazione diventa una modifica importante se si aggiungono anche tutti i campi dati privati per supportare il metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-258">And this becomes a breaking change if you also add any private data fields to support the method.</span></span>
- <span data-ttu-id="fd429-259">Definire il nuovo metodo in una classe derivata.</span><span class="sxs-lookup"><span data-stu-id="fd429-259">Define the new method in a derived class.</span></span> <span data-ttu-id="fd429-260">Non è possibile aggiungere un metodo in questo modo usando l'ereditarietà per gli altri tipi, ad esempio strutture ed enumerazioni.</span><span class="sxs-lookup"><span data-stu-id="fd429-260">A method cannot be added in this way using inheritance for other types, such as structures and enumerations.</span></span> <span data-ttu-id="fd429-261">Questo modo non può essere usato neanche per "aggiungere" un metodo a una classe sealed.</span><span class="sxs-lookup"><span data-stu-id="fd429-261">Nor can it be used to "add" a method to a sealed class.</span></span>

<span data-ttu-id="fd429-262">I metodi di estensione consentono di "aggiungere" un metodo a un tipo esistente senza modificare il tipo o implementare il nuovo metodo in un tipo ereditato.</span><span class="sxs-lookup"><span data-stu-id="fd429-262">Extension methods let you "add" a method to an existing type without modifying the type itself or implementing the new method in an inherited type.</span></span> <span data-ttu-id="fd429-263">È necessario anche che il metodo di estensione non si trovi nello stesso assembly del tipo che estende.</span><span class="sxs-lookup"><span data-stu-id="fd429-263">The extension method also does not have to reside in the same assembly as the type it extends.</span></span> <span data-ttu-id="fd429-264">Un metodo di estensione viene chiamato come se fosse un membro definito di un tipo.</span><span class="sxs-lookup"><span data-stu-id="fd429-264">You call an extension method as if it were a defined member of a type.</span></span>

<span data-ttu-id="fd429-265">Per altre informazioni, vedere [Metodi di estensione](programming-guide/classes-and-structs/extension-methods.md).</span><span class="sxs-lookup"><span data-stu-id="fd429-265">For more information, see [Extension Methods](programming-guide/classes-and-structs/extension-methods.md).</span></span>

<a name="async"></a>

## <a name="async-methods"></a><span data-ttu-id="fd429-266">Metodi asincroni</span><span class="sxs-lookup"><span data-stu-id="fd429-266">Async Methods</span></span>

<span data-ttu-id="fd429-267">Tramite la funzionalità async, è possibile richiamare i metodi asincroni senza usare callback espliciti o suddividere manualmente il codice in più metodi o espressioni lambda.</span><span class="sxs-lookup"><span data-stu-id="fd429-267">By using the async feature, you can invoke asynchronous methods without using explicit callbacks or manually splitting your code across multiple methods or lambda expressions.</span></span>

<span data-ttu-id="fd429-268">Se si contrassegna un metodo con il modificatore [async](language-reference/keywords/async.md), è possibile usare l'operatore [await](language-reference/operators/await.md) nel metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-268">If you mark a method with the [async](language-reference/keywords/async.md) modifier, you can use the [await](language-reference/operators/await.md) operator in the method.</span></span> <span data-ttu-id="fd429-269">Quando il controllo raggiunge un'espressione `await` nel metodo asincrono, il controllo torna al chiamante se l'attività attesa non è stata completata e l'avanzamento nel metodo con la parola chiave `await` viene sospeso fino al completamento dell'attività attesa.</span><span class="sxs-lookup"><span data-stu-id="fd429-269">When control reaches an `await` expression in the async method, control returns to the caller if the awaited task is not completed, and progress in the method with the `await` keyword is suspended until the awaited task completes.</span></span> <span data-ttu-id="fd429-270">Una volta completata l'attività, l'esecuzione del metodo può riprendere.</span><span class="sxs-lookup"><span data-stu-id="fd429-270">When the task is complete, execution can resume in the method.</span></span>

> [!NOTE]
> <span data-ttu-id="fd429-271">Un metodo async viene restituito al chiamante quando rileva il primo oggetto atteso che non è ancora completo o raggiunge la fine del metodo async, qualunque si verifichi prima.</span><span class="sxs-lookup"><span data-stu-id="fd429-271">An async method returns to the caller when either it encounters the first awaited object that’s not yet complete or it gets to the end of the async method, whichever occurs first.</span></span>

<span data-ttu-id="fd429-272">Un metodo asincrono può avere un tipo restituito <xref:System.Threading.Tasks.Task%601>, <xref:System.Threading.Tasks.Task> o `void`.</span><span class="sxs-lookup"><span data-stu-id="fd429-272">An async method can have a return type of <xref:System.Threading.Tasks.Task%601>, <xref:System.Threading.Tasks.Task>, or `void`.</span></span> <span data-ttu-id="fd429-273">Il tipo restituito `void` viene usato principalmente per definire i gestori eventi in cui è necessario un tipo restituito `void`.</span><span class="sxs-lookup"><span data-stu-id="fd429-273">The `void` return type is used primarily to define event handlers, where a `void` return type is required.</span></span> <span data-ttu-id="fd429-274">Un metodo asincrono che restituisce `void` non può essere atteso e il chiamante di un metodo che restituisce void non può intercettare le eccezioni generate dal metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-274">An async method that returns `void` can't be awaited, and the caller of a void-returning method can't catch exceptions that the method throws.</span></span> <span data-ttu-id="fd429-275">A partire da C# 7.0, un metodo asincrono può avere [qualsiasi tipo restituito di tipo attività](./whats-new/csharp-7.md#generalized-async-return-types).</span><span class="sxs-lookup"><span data-stu-id="fd429-275">Starting with C# 7.0, an async method can have [any task-like return type](./whats-new/csharp-7.md#generalized-async-return-types).</span></span>

<span data-ttu-id="fd429-276">Nell'esempio seguente `DelayAsync` è un metodo asincrono con un'istruzione return che restituisce un valore Integer.</span><span class="sxs-lookup"><span data-stu-id="fd429-276">In the following example, `DelayAsync` is an async method that has a return statement that returns an integer.</span></span> <span data-ttu-id="fd429-277">Poiché si tratta di un metodo asincrono, la dichiarazione del metodo deve avere un tipo restituito di `Task<int>`.</span><span class="sxs-lookup"><span data-stu-id="fd429-277">Because it is an async method, its method declaration must have a return type of `Task<int>`.</span></span> <span data-ttu-id="fd429-278">Poiché il tipo restituito è `Task<int>`, la valutazione dell'espressione `await` in `DoSomethingAsync` genera un numero intero come dimostra l'istruzione `int result = await delayTask` seguente.</span><span class="sxs-lookup"><span data-stu-id="fd429-278">Because the return type is `Task<int>`, the evaluation of the `await` expression in `DoSomethingAsync` produces an integer, as the following `int result = await delayTask` statement demonstrates.</span></span>

[!code-csharp[csSnippets.Methods#102](../../samples/snippets/csharp/concepts/methods/async1.cs#102)]

<span data-ttu-id="fd429-279">Un metodo asincrono non può dichiarare parametri [in](language-reference/keywords/in-parameter-modifier.md), [ref](language-reference/keywords/ref.md) o [out](language-reference/keywords/out-parameter-modifier.md), ma può chiamare metodi che hanno tali parametri.</span><span class="sxs-lookup"><span data-stu-id="fd429-279">An async method can't declare any [in](language-reference/keywords/in-parameter-modifier.md), [ref](language-reference/keywords/ref.md), or [out](language-reference/keywords/out-parameter-modifier.md) parameters, but it can call methods that have such parameters.</span></span>

 <span data-ttu-id="fd429-280">Per altre informazioni sui metodi asincroni, vedere [Programmazione asincrona con Async e Await](async.md), [Flusso di controllo in programmi asincroni](programming-guide/concepts/async/control-flow-in-async-programs.md) e [Tipi restituiti asincroni](programming-guide/concepts/async/async-return-types.md).</span><span class="sxs-lookup"><span data-stu-id="fd429-280">For more information about async methods, see [Asynchronous Programming with Async and Await](async.md), [Control Flow in Async Programs](programming-guide/concepts/async/control-flow-in-async-programs.md), and [Async Return Types](programming-guide/concepts/async/async-return-types.md).</span></span>

<a name="expr"></a>

## <a name="expression-bodied-members"></a><span data-ttu-id="fd429-281">Membri con corpo di espressione</span><span class="sxs-lookup"><span data-stu-id="fd429-281">Expression-bodied members</span></span>

<span data-ttu-id="fd429-282">È comune disporre di definizioni di metodo che semplicemente restituiscono subito il risultato di un'espressione o che includono una singola istruzione come corpo del metodo.</span><span class="sxs-lookup"><span data-stu-id="fd429-282">It is common to have method definitions that simply return immediately with the result of an expression, or that have a single statement as the body of the method.</span></span>  <span data-ttu-id="fd429-283">Esiste una sintassi breve per definire tali metodi usando `=>`:</span><span class="sxs-lookup"><span data-stu-id="fd429-283">There is a syntax shortcut for defining such methods using `=>`:</span></span>

```csharp
public Point Move(int dx, int dy) => new Point(x + dx, y + dy);
public void Print() => Console.WriteLine(First + " " + Last);
// Works with operators, properties, and indexers too.
public static Complex operator +(Complex a, Complex b) => a.Add(b);
public string Name => First + " " + Last;
public Customer this[long id] => store.LookupCustomer(id);
```

<span data-ttu-id="fd429-284">Se il metodo restituisce `void` o è un metodo asincrono, il corpo del metodo deve essere un'espressione di istruzione (come per le espressioni lambda).</span><span class="sxs-lookup"><span data-stu-id="fd429-284">If the method returns `void` or is an async method, the body of the method must be a statement expression (same as with lambdas).</span></span>  <span data-ttu-id="fd429-285">Le proprietà e gli indicizzatori devono essere di sola lettura e non è necessario usare la parola chiave della funzione di accesso `get` .</span><span class="sxs-lookup"><span data-stu-id="fd429-285">For properties and indexers, they must be read-only, and you do not use the `get` accessor keyword.</span></span>

<a name="iterators"></a>

## <a name="iterators"></a><span data-ttu-id="fd429-286">Iteratori</span><span class="sxs-lookup"><span data-stu-id="fd429-286">Iterators</span></span>

<span data-ttu-id="fd429-287">Un iteratore esegue un'iterazione personalizzata su una raccolta, ad esempio un elenco o una matrice.</span><span class="sxs-lookup"><span data-stu-id="fd429-287">An iterator performs a custom iteration over a collection, such as a list or an array.</span></span> <span data-ttu-id="fd429-288">Un iteratore usa l'istruzione [yield return](language-reference/keywords/yield.md) per restituire un elemento alla volta.</span><span class="sxs-lookup"><span data-stu-id="fd429-288">An iterator uses the [yield return](language-reference/keywords/yield.md) statement to return each element one at a time.</span></span> <span data-ttu-id="fd429-289">Quando viene raggiunta un'istruzione `yield return`, viene memorizzata la posizione corrente in modo che il chiamante possa richiedere l'elemento successivo della sequenza.</span><span class="sxs-lookup"><span data-stu-id="fd429-289">When a `yield return` statement is reached, the current location is remembered so that the caller can request the next element in the sequence.</span></span>

<span data-ttu-id="fd429-290">Il tipo restituito di un iteratore può essere <xref:System.Collections.IEnumerable>, <xref:System.Collections.Generic.IEnumerable%601>, <xref:System.Collections.IEnumerator>o <xref:System.Collections.Generic.IEnumerator%601>.</span><span class="sxs-lookup"><span data-stu-id="fd429-290">The return type of an iterator can be <xref:System.Collections.IEnumerable>, <xref:System.Collections.Generic.IEnumerable%601>, <xref:System.Collections.IEnumerator>, or <xref:System.Collections.Generic.IEnumerator%601>.</span></span>

<span data-ttu-id="fd429-291">Per ulteriori informazioni, vedere [Iteratori](programming-guide/concepts/iterators.md).</span><span class="sxs-lookup"><span data-stu-id="fd429-291">For more information, see [Iterators](programming-guide/concepts/iterators.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="fd429-292">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="fd429-292">See also</span></span>

- [<span data-ttu-id="fd429-293">Modificatori di accesso</span><span class="sxs-lookup"><span data-stu-id="fd429-293">Access Modifiers</span></span>](language-reference/keywords/access-modifiers.md)
- [<span data-ttu-id="fd429-294">Classi statiche e membri di classi statiche</span><span class="sxs-lookup"><span data-stu-id="fd429-294">Static Classes and Static Class Members</span></span>](programming-guide/classes-and-structs/static-classes-and-static-class-members.md)
- [<span data-ttu-id="fd429-295">Ereditarietà</span><span class="sxs-lookup"><span data-stu-id="fd429-295">Inheritance</span></span>](programming-guide/classes-and-structs/inheritance.md)
- [<span data-ttu-id="fd429-296">Classi e membri delle classi astratte e sealed</span><span class="sxs-lookup"><span data-stu-id="fd429-296">Abstract and Sealed Classes and Class Members</span></span>](programming-guide/classes-and-structs/abstract-and-sealed-classes-and-class-members.md)
- [<span data-ttu-id="fd429-297">Params</span><span class="sxs-lookup"><span data-stu-id="fd429-297">params</span></span>](language-reference/keywords/params.md)
- [<span data-ttu-id="fd429-298">Cambio</span><span class="sxs-lookup"><span data-stu-id="fd429-298">out</span></span>](language-reference/keywords/out-parameter-modifier.md)
- [<span data-ttu-id="fd429-299">ref</span><span class="sxs-lookup"><span data-stu-id="fd429-299">ref</span></span>](language-reference/keywords/ref.md)
- [<span data-ttu-id="fd429-300">in</span><span class="sxs-lookup"><span data-stu-id="fd429-300">in</span></span>](language-reference/keywords/in-parameter-modifier.md)
- [<span data-ttu-id="fd429-301">Passaggio di parametri</span><span class="sxs-lookup"><span data-stu-id="fd429-301">Passing Parameters</span></span>](programming-guide/classes-and-structs/passing-parameters.md)
