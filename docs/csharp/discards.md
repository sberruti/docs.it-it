---
title: Variabili discard - Guida di C#
description: Descrive il supporto in C# delle variabili discard, che sono variabili non assegnate e rimovibili, e le modalità d'uso di tali variabili.
ms.technology: csharp-fundamentals
ms.date: 07/21/2017
ms.openlocfilehash: a76e7fc13f92ec0de87153bb35eb3924bb317616
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/14/2020
ms.locfileid: "73100635"
---
# <a name="discards---c-guide"></a><span data-ttu-id="3e454-103">Variabili discard - Guida di C#</span><span class="sxs-lookup"><span data-stu-id="3e454-103">Discards - C# Guide</span></span>

<span data-ttu-id="3e454-104">A partire dalla versione 7.0, C# supporta le variabili discard, variabili dummy temporanee intenzionalmente inutilizzate nel codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3e454-104">Starting with C# 7.0, C# supports discards, which are temporary, dummy variables that are intentionally unused in application code.</span></span> <span data-ttu-id="3e454-105">Le variabili discard sono equivalenti alle variabili non assegnate e non hanno un valore.</span><span class="sxs-lookup"><span data-stu-id="3e454-105">Discards are equivalent to unassigned variables; they do not have a value.</span></span> <span data-ttu-id="3e454-106">Dato che è presente un'unica variabile discard alla quale potrebbe non essere allocata nessuna archiviazione, le variabili discard possono ridurre le allocazioni di memoria.</span><span class="sxs-lookup"><span data-stu-id="3e454-106">Because there is only a single discard variable, and that variable may not even be allocated storage, discards can reduce memory allocations.</span></span> <span data-ttu-id="3e454-107">Dato che rendono chiaro l'obiettivo del codice, ne migliorano la leggibilità e la gestibilità.</span><span class="sxs-lookup"><span data-stu-id="3e454-107">Because they make the intent of your code clear, they enhance its readability and maintainability.</span></span>

<span data-ttu-id="3e454-108">Per indicare che una variabile è una variabile discard le si assegna come nome il carattere di sottolineatura (`_`).</span><span class="sxs-lookup"><span data-stu-id="3e454-108">You indicate that a variable is a discard by assigning it the underscore (`_`) as its name.</span></span> <span data-ttu-id="3e454-109">Ad esempio, la chiamata al metodo seguente restituisce una tupla con 3 elementi in cui il primo e il secondo valore sono discard e *area* è una variabile dichiarata in precedenza da impostare in base al corrispondente terzo componente restituito da \* GetCityInformation\*:</span><span class="sxs-lookup"><span data-stu-id="3e454-109">For example, the following method call returns a 3-tuple in which the first and second values are discards and *area* is a previously declared variable to be set to the corresponding third component returned by *GetCityInformation*:</span></span>

```csharp
(_, _, area) = city.GetCityInformation(cityName);
```

<span data-ttu-id="3e454-110">In C# 7.0 le variabili discard sono supportate nelle assegnazioni nei contesti seguenti:</span><span class="sxs-lookup"><span data-stu-id="3e454-110">In C# 7.0, discards are supported in assignments in the following contexts:</span></span>

- <span data-ttu-id="3e454-111">Tupla e [decostruzione di](deconstruct.md)oggetti .</span><span class="sxs-lookup"><span data-stu-id="3e454-111">Tuple and object [deconstruction](deconstruct.md).</span></span>
- <span data-ttu-id="3e454-112">Criteri di ricerca con [is](language-reference/keywords/is.md) e [switch](language-reference/keywords/switch.md).</span><span class="sxs-lookup"><span data-stu-id="3e454-112">Pattern matching with [is](language-reference/keywords/is.md) and [switch](language-reference/keywords/switch.md).</span></span>
- <span data-ttu-id="3e454-113">Chiamate a metodi con parametri `out`.</span><span class="sxs-lookup"><span data-stu-id="3e454-113">Calls to methods with `out` parameters.</span></span>
- <span data-ttu-id="3e454-114">Un `_` standalone quando l'ambito non include nessun `_`.</span><span class="sxs-lookup"><span data-stu-id="3e454-114">A standalone `_` when no `_` is in scope.</span></span>

<span data-ttu-id="3e454-115">Quando `_` è una variabile discard valida, se si prova a recuperarne il valore o a usarla in un'operazione di assegnazione viene generato l'errore di compilazione CS0301, "Il nome '\_' non esiste nel contesto corrente".</span><span class="sxs-lookup"><span data-stu-id="3e454-115">When `_` is a valid discard, attempting to retrieve its value or use it in an assignment operation generates compiler error CS0301, "The name '\_' does not exist in the current context".</span></span> <span data-ttu-id="3e454-116">L'errore si verifica perché a `_` non è assegnato nessun valore e potrebbe non essere assegnata nessuna posizione di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="3e454-116">This is because `_` is not assigned a value, and may not even be assigned a storage location.</span></span> <span data-ttu-id="3e454-117">Se si trattasse di una vera variabile non sarebbe possibile rimuovere più di un valore, come nell'esempio precedente.</span><span class="sxs-lookup"><span data-stu-id="3e454-117">If it were an actual variable, you could not discard more than one value, as the previous example did.</span></span>

## <a name="tuple-and-object-deconstruction"></a><span data-ttu-id="3e454-118">Decostruzione di tuple e oggetti</span><span class="sxs-lookup"><span data-stu-id="3e454-118">Tuple and object deconstruction</span></span>

<span data-ttu-id="3e454-119">Le variabili discard sono particolarmente utili quando si lavora con le tuple e il codice dell'applicazione usa alcuni elementi di una tupla ma ne ignora altri.</span><span class="sxs-lookup"><span data-stu-id="3e454-119">Discards are particularly useful in working with tuples when your application code uses some tuple elements but ignores others.</span></span> <span data-ttu-id="3e454-120">Ad esempio il metodo `QueryCityDataForYears` seguente restituisce una tupla con 6 elementi con il nome di una città, l'area della città, un anno, la popolazione della città per tale anno, un secondo anno e la popolazione della città per tale anno.</span><span class="sxs-lookup"><span data-stu-id="3e454-120">For example, the following `QueryCityDataForYears` method returns a 6-tuple with the name of a city, its area, a year, the city's population for that year, a second year, and the city's population for that second year.</span></span> <span data-ttu-id="3e454-121">L'esempio visualizza la variazione della popolazione tra questi due anni.</span><span class="sxs-lookup"><span data-stu-id="3e454-121">The example shows the change in population between those two years.</span></span> <span data-ttu-id="3e454-122">Tra i dati resi disponibili dalla tupla non interessa l'area della città, mentre il nome della città e le due date sono già noti in fase di progettazione.</span><span class="sxs-lookup"><span data-stu-id="3e454-122">Of the data available from the tuple, we're unconcerned with the city area, and we know the city name and the two dates at design-time.</span></span> <span data-ttu-id="3e454-123">Di conseguenza interessano soltanto i due valori di popolazione archiviati nella tupla, mentre gli altri valori possono essere gestiti come variabili discard.</span><span class="sxs-lookup"><span data-stu-id="3e454-123">As a result, we're only interested in the two population values stored in the tuple, and can handle its remaining values as discards.</span></span>  

[!code-csharp[Tuple-discard](../../samples/snippets/csharp/programming-guide/deconstructing-tuples/discard-tuple1.cs)]

<span data-ttu-id="3e454-124">Per altre informazioni sulla decostruzione di tuple con le variabili discard, vedere [Decostruzione di tuple e altri tipi](deconstruct.md#deconstructing-tuple-elements-with-discards).</span><span class="sxs-lookup"><span data-stu-id="3e454-124">For more information on deconstructing tuples with discards, see [Deconstructing tuples and other types](deconstruct.md#deconstructing-tuple-elements-with-discards).</span></span>

<span data-ttu-id="3e454-125">Anche il metodo `Deconstruct` di una classe, struttura o interfaccia consente di recuperare e decostruire un set di dati specifico da un oggetto.</span><span class="sxs-lookup"><span data-stu-id="3e454-125">The `Deconstruct` method of a class, structure, or interface also allows you to retrieve and deconstruct a specific set of data from an object.</span></span> <span data-ttu-id="3e454-126">È possibile usare le variabili quando risulta utile lavorare solo con un subset dei valori decostruiti.</span><span class="sxs-lookup"><span data-stu-id="3e454-126">You can use discards when you are interested in working with only a subset of the deconstructed values.</span></span> <span data-ttu-id="3e454-127">L'esempio seguente esegue la decostruzione di un oggetto `Person` in quattro stringhe (nome, cognome, città e stato), ma rimuove il cognome e lo stato.</span><span class="sxs-lookup"><span data-stu-id="3e454-127">The following example deconstructs a `Person` object into four strings (the first and last names, the city, and the state), but discards the last name and the state.</span></span>

[!code-csharp[Class-discard](../../samples/snippets/csharp/programming-guide/deconstructing-tuples/class-discard1.cs)]

<span data-ttu-id="3e454-128">Per altre informazioni sulla decostruzione di tipi definiti dall'utente con le variabili discard, vedere [Decostruzione di tuple e altri tipi](deconstruct.md#deconstructing-a-user-defined-type-with-discards).</span><span class="sxs-lookup"><span data-stu-id="3e454-128">For more information on deconstructing user-defined types with discards, see [Deconstructing tuples and other types](deconstruct.md#deconstructing-a-user-defined-type-with-discards).</span></span>

## <a name="pattern-matching-with-switch-and-is"></a><span data-ttu-id="3e454-129">Criteri di ricerca con `switch` e `is`</span><span class="sxs-lookup"><span data-stu-id="3e454-129">Pattern matching with `switch` and `is`</span></span>

<span data-ttu-id="3e454-130">Il *criterio variabile discard* può essere usato nei criteri di ricerca con le parole chiave [is](language-reference/keywords/is.md) e [switch](language-reference/keywords/switch.md).</span><span class="sxs-lookup"><span data-stu-id="3e454-130">The *discard pattern* can be used in pattern matching with the [is](language-reference/keywords/is.md) and [switch](language-reference/keywords/switch.md) keywords.</span></span> <span data-ttu-id="3e454-131">Ogni espressione corrisponde sempre al criterio variabile discard.</span><span class="sxs-lookup"><span data-stu-id="3e454-131">Every expression always matches the discard pattern.</span></span>

<span data-ttu-id="3e454-132">L'esempio seguente definisce un metodo `ProvidesFormatInfo` che usa istruzioni [is](language-reference/keywords/is.md) per determinare se un oggetto include un'implementazione <xref:System.IFormatProvider> e verifica se l'oggetto `null`.</span><span class="sxs-lookup"><span data-stu-id="3e454-132">The following example defines a `ProvidesFormatInfo` method that uses [is](language-reference/keywords/is.md) statements to determine whether an object provides an <xref:System.IFormatProvider> implementation and tests whether the object is `null`.</span></span> <span data-ttu-id="3e454-133">Usa anche il criterio variabile discard per gestire gli oggetti non null di qualsiasi altro tipo.</span><span class="sxs-lookup"><span data-stu-id="3e454-133">It also uses the discard pattern to handle non-null objects of any other type.</span></span>

[!code-csharp[discard-pattern](../../samples/snippets/csharp/programming-guide/discards/discard-pattern2.cs)]

## <a name="calls-to-methods-with-out-parameters"></a><span data-ttu-id="3e454-134">Chiamate a metodi con parametri out</span><span class="sxs-lookup"><span data-stu-id="3e454-134">Calls to methods with out parameters</span></span>

<span data-ttu-id="3e454-135">Quando si chiama il metodo `Deconstruct` per la decostruzione di un tipo definito dall'utente (un'istanza di una classe, una struttura o un'interfaccia), è possibile rimuovere i valori di singoli argomenti `out`.</span><span class="sxs-lookup"><span data-stu-id="3e454-135">When calling the `Deconstruct` method to deconstruct a user-defined type (an instance of a class, structure, or interface), you can discard the values of individual `out` arguments.</span></span> <span data-ttu-id="3e454-136">Tuttavia è possibile rimuovere il valore degli argomenti `out` anche quando si chiama qualsiasi metodo con un parametro out.</span><span class="sxs-lookup"><span data-stu-id="3e454-136">But you can also discard the value of `out` arguments when calling any method with an out parameter.</span></span>

<span data-ttu-id="3e454-137">Nel seguente esempio viene chiamato il metodo [DateTime.TryParse(String, out DateTime)](<xref:System.DateTime.TryParse(System.String,System.DateTime@)>) per determinare se la rappresentazione stringa di una data è valida con le impostazioni cultura correnti.</span><span class="sxs-lookup"><span data-stu-id="3e454-137">The following example calls the [DateTime.TryParse(String, out DateTime)](<xref:System.DateTime.TryParse(System.String,System.DateTime@)>) method to determine whether the string representation of a date is valid in the current culture.</span></span> <span data-ttu-id="3e454-138">Dato che lo scopo dell'esempio è solo quello di convalidare la stringa di data e non quello di analizzarla per estrarre la data, l'argomento `out` del metodo è una variabile discard.</span><span class="sxs-lookup"><span data-stu-id="3e454-138">Because the example is concerned only with validating the date string and not with parsing it to extract the date, the `out` argument to the method is a discard.</span></span>

[!code-csharp[discard-with-out](../../samples/snippets/csharp/programming-guide/discards/discard-out1.cs)]

## <a name="a-standalone-discard"></a><span data-ttu-id="3e454-139">Una variabile discard standalone</span><span class="sxs-lookup"><span data-stu-id="3e454-139">A standalone discard</span></span>

<span data-ttu-id="3e454-140">È possibile usare una variabile discard standalone per indicare qualsiasi variabile che si è deciso di ignorare.</span><span class="sxs-lookup"><span data-stu-id="3e454-140">You can use a standalone discard to indicate any variable that you choose to ignore.</span></span> <span data-ttu-id="3e454-141">Nell'esempio seguente viene usata una variabile discard standalone per ignorare l'oggetto <xref:System.Threading.Tasks.Task> restituito da un'operazione asincrona.</span><span class="sxs-lookup"><span data-stu-id="3e454-141">The following example uses a standalone discard to ignore the <xref:System.Threading.Tasks.Task> object returned by an asynchronous operation.</span></span> <span data-ttu-id="3e454-142">Di conseguenza viene eliminata l'eccezione che viene attivata dall'operazione poco prima del completamento.</span><span class="sxs-lookup"><span data-stu-id="3e454-142">This has the effect of suppressing the exception that the operation throws as it is about to complete.</span></span>

[!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard1.cs)]

<span data-ttu-id="3e454-143">Si noti che anche `_` è un identificatore valido.</span><span class="sxs-lookup"><span data-stu-id="3e454-143">Note that `_` is also a valid identifier.</span></span> <span data-ttu-id="3e454-144">Quando viene usata fuori da un contesto supportato, `_` non viene considerata come una variabile discard ma come una variabile valida.</span><span class="sxs-lookup"><span data-stu-id="3e454-144">When used outside of a supported context, `_` is treated not as a discard but as a valid variable.</span></span> <span data-ttu-id="3e454-145">Se un identificatore con nome `_` è già incluso nell'ambito, l'uso di `_` come variabile discard standalone può causare:</span><span class="sxs-lookup"><span data-stu-id="3e454-145">If an identifier named `_` is already in scope, the use of `_` as a standalone discard can result in:</span></span>

- <span data-ttu-id="3e454-146">La modifica accidentale della variabile `_` dell'ambito, alla quale viene assegnato il valore della variabile discard prevista.</span><span class="sxs-lookup"><span data-stu-id="3e454-146">Accidental modification of the value of the in-scope `_` variable by assigning it the value of the intended discard.</span></span> <span data-ttu-id="3e454-147">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="3e454-147">For example:</span></span>

   [!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#1)]

- <span data-ttu-id="3e454-148">Un errore del compilatore per la violazione dell'indipendenza dai tipi.</span><span class="sxs-lookup"><span data-stu-id="3e454-148">A compiler error for violating type safety.</span></span> <span data-ttu-id="3e454-149">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="3e454-149">For example:</span></span>

   [!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#2)]

- <span data-ttu-id="3e454-150">Errore del compilatore CS0136: "Non è possibile dichiarare in questo ambito una variabile locale o un parametro denominato "\_" perché tale nome viene usato in un ambito locale di inclusione per definire una variabile locale o un parametro".</span><span class="sxs-lookup"><span data-stu-id="3e454-150">Compiler error CS0136, "A local or parameter named '\_' cannot be declared in this scope because that name is used in an enclosing local scope to define a local or parameter."</span></span> <span data-ttu-id="3e454-151">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="3e454-151">For example:</span></span>

   [!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#3)]

## <a name="see-also"></a><span data-ttu-id="3e454-152">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="3e454-152">See also</span></span>

- [<span data-ttu-id="3e454-153">Decostruzione di tuple e altri tipi</span><span class="sxs-lookup"><span data-stu-id="3e454-153">Deconstructing tuples and other types</span></span>](deconstruct.md)
- [<span data-ttu-id="3e454-154">`is`Parola chiave</span><span class="sxs-lookup"><span data-stu-id="3e454-154">`is` keyword</span></span>](language-reference/keywords/is.md)
- [<span data-ttu-id="3e454-155">`switch`Parola chiave</span><span class="sxs-lookup"><span data-stu-id="3e454-155">`switch` keyword</span></span>](language-reference/keywords/switch.md)
