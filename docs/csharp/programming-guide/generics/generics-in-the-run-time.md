---
title: Generics nel runtime - Guida per programmatori C#
ms.date: 07/20/2015
helpviewer_keywords:
- generics [C#], at run time
ms.assetid: 119df7e6-9ceb-49df-af36-24f8f8c0747f
ms.openlocfilehash: a53a21d3028e588f5c4d5ce7bf35fad8d3720a08
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/14/2020
ms.locfileid: "75702987"
---
# <a name="generics-in-the-run-time-c-programming-guide"></a><span data-ttu-id="5377c-102">Generics nel runtime (Guida per programmatori C#)</span><span class="sxs-lookup"><span data-stu-id="5377c-102">Generics in the Run Time (C# Programming Guide)</span></span>
<span data-ttu-id="5377c-103">Quando un tipo o un metodo generico viene compilato in Microsoft Intermediate Language (MSIL), contiene metadati che lo identificano come contenente parametri di tipo.</span><span class="sxs-lookup"><span data-stu-id="5377c-103">When a generic type or method is compiled into Microsoft intermediate language (MSIL), it contains metadata that identifies it as having type parameters.</span></span> <span data-ttu-id="5377c-104">L'uso di MSIL per un tipo generico differisce a seconda che il parametro di tipo sia un tipo valore o un tipo riferimento.</span><span class="sxs-lookup"><span data-stu-id="5377c-104">How the MSIL for a generic type is used differs based on whether the supplied type parameter is a value type or reference type.</span></span>  
  
 <span data-ttu-id="5377c-105">La prima volta che viene costruito un tipo generico con un tipo valore come parametro, il runtime crea un tipo generico specializzato con il parametro o i parametri specificati sostituiti nelle posizioni appropriate in MSIL.</span><span class="sxs-lookup"><span data-stu-id="5377c-105">When a generic type is first constructed with a value type as a parameter, the runtime creates a specialized generic type with the supplied parameter or parameters substituted in the appropriate locations in the MSIL.</span></span> <span data-ttu-id="5377c-106">I tipi generici specializzati vengono creati una sola volta per ogni tipo valore univoco usato come parametro.</span><span class="sxs-lookup"><span data-stu-id="5377c-106">Specialized generic types are created one time for each unique value type that is used as a parameter.</span></span>  
  
 <span data-ttu-id="5377c-107">Ad esempio, si supponga che il codice programma abbia dichiarato uno stack costituito da interi:</span><span class="sxs-lookup"><span data-stu-id="5377c-107">For example, suppose your program code declared a stack that is constructed of integers:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#42](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#42)]  
  
 <span data-ttu-id="5377c-108">A questo punto, il runtime genera una versione specializzata della classe <xref:System.Collections.Generic.Stack%601> sostituendo l'intero nel modo appropriato per il parametro.</span><span class="sxs-lookup"><span data-stu-id="5377c-108">At this point, the runtime generates a specialized version of the <xref:System.Collections.Generic.Stack%601> class that has the integer substituted appropriately for its parameter.</span></span> <span data-ttu-id="5377c-109">D'ora in poi, ogni volta che il codice programma usa uno stack di interi, il runtime riutilizzerà la classe <xref:System.Collections.Generic.Stack%601> specializzata generata.</span><span class="sxs-lookup"><span data-stu-id="5377c-109">Now, whenever your program code uses a stack of integers, the runtime reuses the generated specialized <xref:System.Collections.Generic.Stack%601> class.</span></span> <span data-ttu-id="5377c-110">Nell'esempio seguente vengono create due istanze di uno stack di interi che condividono un'istanza singola nel codice `Stack<int>`:</span><span class="sxs-lookup"><span data-stu-id="5377c-110">In the following example, two instances of a stack of integers are created, and they share a single instance of the `Stack<int>` code:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#43](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#43)]  
  
 <span data-ttu-id="5377c-111">Tuttavia, si supponga che venga creata un'altra classe <xref:System.Collections.Generic.Stack%601> con un tipo valore diverso, ad esempio `long`, o una struttura definita dall'utente come parametro in un altro punto del codice.</span><span class="sxs-lookup"><span data-stu-id="5377c-111">However, suppose that another <xref:System.Collections.Generic.Stack%601> class with a different value type such as a `long` or a user-defined structure as its parameter is created at another point in your code.</span></span> <span data-ttu-id="5377c-112">Di conseguenza, il runtime genererà un'altra versione del tipo generico e sostituirà un valore `long` nelle posizioni appropriate in MSIL.</span><span class="sxs-lookup"><span data-stu-id="5377c-112">As a result, the runtime generates another version of the generic type and substitutes a `long` in the appropriate locations in MSIL.</span></span> <span data-ttu-id="5377c-113">Le conversioni non sono più necessarie, perché ogni classe generica specializzata contiene il tipo valore in modo nativo.</span><span class="sxs-lookup"><span data-stu-id="5377c-113">Conversions are no longer necessary because each specialized generic class natively contains the value type.</span></span>  
  
 <span data-ttu-id="5377c-114">I generics hanno un funzionamento leggermente diverso con i tipi riferimento.</span><span class="sxs-lookup"><span data-stu-id="5377c-114">Generics work somewhat differently for reference types.</span></span> <span data-ttu-id="5377c-115">La prima volta che viene costruito un tipo generico con qualsiasi tipo riferimento, il runtime crea un tipo generico specializzato con riferimenti a oggetti sostituiti per i parametri in MSIL.</span><span class="sxs-lookup"><span data-stu-id="5377c-115">The first time a generic type is constructed with any reference type, the runtime creates a specialized generic type with object references substituted for the parameters in the MSIL.</span></span> <span data-ttu-id="5377c-116">Quindi, ogni volta che viene creata un'istanza di un tipo costruito con un tipo riferimento come parametro, indipendentemente dal tipo, il runtime riutilizza la versione specializzata precedentemente creata del tipo generico.</span><span class="sxs-lookup"><span data-stu-id="5377c-116">Then, every time that a constructed type is instantiated with a reference type as its parameter, regardless of what type it is, the runtime reuses the previously created specialized version of the generic type.</span></span> <span data-ttu-id="5377c-117">Questo è possibile perché tutti i riferimenti hanno le stesse dimensioni.</span><span class="sxs-lookup"><span data-stu-id="5377c-117">This is possible because all references are the same size.</span></span>  
  
 <span data-ttu-id="5377c-118">Ad esempio, si supponga di avere due tipi riferimento, una classe `Customer` e una classe `Order`, e di aver creato uno stack di tipi `Customer`:</span><span class="sxs-lookup"><span data-stu-id="5377c-118">For example, suppose you had two reference types, a `Customer` class and an `Order` class, and also suppose that you created a stack of `Customer` types:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#47](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#47)]  
  
 [!code-csharp[csProgGuideGenerics#44](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#44)]  
  
 <span data-ttu-id="5377c-119">A questo punto, il runtime genera una versione specializzata della classe <xref:System.Collections.Generic.Stack%601> in cui sono archiviati riferimenti a oggetti che verranno compilati successivamente invece di archiviare i dati.</span><span class="sxs-lookup"><span data-stu-id="5377c-119">At this point, the runtime generates a specialized version of the <xref:System.Collections.Generic.Stack%601> class that stores object references that will be filled in later instead of storing data.</span></span> <span data-ttu-id="5377c-120">Si supponga che la riga di codice successiva crei uno stack di un altro tipo riferimento, chiamato `Order`:</span><span class="sxs-lookup"><span data-stu-id="5377c-120">Suppose the next line of code creates a stack of another reference type, which is named `Order`:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#45](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#45)]  
  
 <span data-ttu-id="5377c-121">Diversamente dai tipi valore, non viene creata un'altra versione specializzata della classe <xref:System.Collections.Generic.Stack%601> per il tipo `Order`.</span><span class="sxs-lookup"><span data-stu-id="5377c-121">Unlike with value types, another specialized version of the <xref:System.Collections.Generic.Stack%601> class is not created for the `Order` type.</span></span> <span data-ttu-id="5377c-122">Viene invece creata un'istanza della versione specializzata della classe <xref:System.Collections.Generic.Stack%601> e viene impostata la variabile `orders` per referenziarla.</span><span class="sxs-lookup"><span data-stu-id="5377c-122">Instead, an instance of the specialized version of the <xref:System.Collections.Generic.Stack%601> class is created and the `orders` variable is set to reference it.</span></span> <span data-ttu-id="5377c-123">Si supponga di individuare una riga di codice per la creazione di uno stack di un tipo `Customer`:</span><span class="sxs-lookup"><span data-stu-id="5377c-123">Suppose that you then encountered a line of code to create a stack of a `Customer` type:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#46](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#46)]  
  
 <span data-ttu-id="5377c-124">Come per l'uso precedente della classe <xref:System.Collections.Generic.Stack%601> creata con il tipo `Order`, verrà creata un'altra istanza della classe <xref:System.Collections.Generic.Stack%601> specializzata.</span><span class="sxs-lookup"><span data-stu-id="5377c-124">As with the previous use of the <xref:System.Collections.Generic.Stack%601> class created by using the `Order` type, another instance of the specialized <xref:System.Collections.Generic.Stack%601> class is created.</span></span> <span data-ttu-id="5377c-125">I puntatori contenuti vengono impostati in modo da fare riferimento a un'area di memoria delle dimensioni di un tipo `Customer`.</span><span class="sxs-lookup"><span data-stu-id="5377c-125">The pointers that are contained therein are set to reference an area of memory the size of a `Customer` type.</span></span> <span data-ttu-id="5377c-126">Poiché il numero di tipi riferimento può variare ampiamente a seconda del programma, l'implementazione C# di generics riduce notevolmente la quantità di codice limitando a uno il numero di classi specializzate create dal compilatore per classi generiche di tipi riferimento.</span><span class="sxs-lookup"><span data-stu-id="5377c-126">Because the number of reference types can vary wildly from program to program, the C# implementation of generics greatly reduces the amount of code by reducing to one the number of specialized classes created by the compiler for generic classes of reference types.</span></span>  
  
 <span data-ttu-id="5377c-127">Inoltre, quando viene creata un'istanza di una classe C# generica usando un tipo valore o un parametro di tipo riferimento, la reflection può eseguire query sulla classe, accertandone il tipo effettivo e il parametro di tipo.</span><span class="sxs-lookup"><span data-stu-id="5377c-127">Moreover, when a generic C# class is instantiated by using a value type or reference type parameter, reflection can query it at runtime and both its actual type and its type parameter can be ascertained.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5377c-128">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="5377c-128">See also</span></span>

- <xref:System.Collections.Generic>
- [<span data-ttu-id="5377c-129">Guida per programmatori C#</span><span class="sxs-lookup"><span data-stu-id="5377c-129">C# Programming Guide</span></span>](../index.md)
- [<span data-ttu-id="5377c-130">Introduzione ai generics</span><span class="sxs-lookup"><span data-stu-id="5377c-130">Introduction to Generics</span></span>](./index.md)
- [<span data-ttu-id="5377c-131">Generics</span><span class="sxs-lookup"><span data-stu-id="5377c-131">Generics</span></span>](../../../standard/generics/index.md)
