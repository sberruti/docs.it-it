---
title: Costruttori statici - Guida per programmatori C#
ms.date: 07/20/2015
helpviewer_keywords:
- static constructors [C#]
- constructors [C#], static
ms.assetid: 151ec95e-3c4d-4ed7-885d-95b7a3be2e7d
ms.openlocfilehash: 744bcacbc38299c0ef7d16e814c415ec5caf95dd
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/14/2020
ms.locfileid: "79170117"
---
# <a name="static-constructors-c-programming-guide"></a><span data-ttu-id="40452-102">Costruttori statici (Guida per programmatori C#)</span><span class="sxs-lookup"><span data-stu-id="40452-102">Static Constructors (C# Programming Guide)</span></span>
<span data-ttu-id="40452-103">Un costruttore statico consente di inizializzare gli eventuali dati [static](../../language-reference/keywords/static.md) oppure di eseguire un'operazione specifica che deve essere effettuata una sola volta.</span><span class="sxs-lookup"><span data-stu-id="40452-103">A static constructor is used to initialize any [static](../../language-reference/keywords/static.md) data, or to perform a particular action that needs to be performed once only.</span></span> <span data-ttu-id="40452-104">Viene chiamato automaticamente prima che ne venga creata la prima istanza o venga fatto riferimento a qualsiasi membro statico.</span><span class="sxs-lookup"><span data-stu-id="40452-104">It is called automatically before the first instance is created or any static members are referenced.</span></span>  
  
 [!code-csharp[csProgGuideObjects#14](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideObjects/CS/Objects.cs#14)]  

## <a name="remarks"></a><span data-ttu-id="40452-105">Osservazioni</span><span class="sxs-lookup"><span data-stu-id="40452-105">Remarks</span></span>
<span data-ttu-id="40452-106">I costruttori statici hanno le proprietà seguenti:</span><span class="sxs-lookup"><span data-stu-id="40452-106">Static constructors have the following properties:</span></span>  
  
- <span data-ttu-id="40452-107">Un costruttore statico non accetta modificatori di accesso e non ha parametri.</span><span class="sxs-lookup"><span data-stu-id="40452-107">A static constructor does not take access modifiers or have parameters.</span></span>  

- <span data-ttu-id="40452-108">Una classe o struct può avere solo un costruttore statico.</span><span class="sxs-lookup"><span data-stu-id="40452-108">A class or struct can only have one static constructor.</span></span>

- <span data-ttu-id="40452-109">I costruttori statici non possono essere ereditati e non è possibile eseguirne l'overload.</span><span class="sxs-lookup"><span data-stu-id="40452-109">Static constructors cannot be inherited or overloaded.</span></span>

- <span data-ttu-id="40452-110">Un costruttore statico non può essere chiamato direttamente ed è progettato esclusivamente per essere chiamato da Common Language Runtime (CLR).</span><span class="sxs-lookup"><span data-stu-id="40452-110">A static constructor cannot be called directly and is only meant to be called by the common language runtime (CLR).</span></span> <span data-ttu-id="40452-111">Viene richiamato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="40452-111">It is invoked automatically.</span></span>

- <span data-ttu-id="40452-112">L'utente non può controllare in alcun modo il momento in cui il costruttore statico viene eseguito nel programma.</span><span class="sxs-lookup"><span data-stu-id="40452-112">The user has no control on when the static constructor is executed in the program.</span></span>
  
- <span data-ttu-id="40452-113">Un costruttore statico viene chiamato automaticamente per inizializzare la [classe](../../language-reference/keywords/class.md) prima che ne venga creata la prima istanza o venga fatto riferimento a qualsiasi membro statico.</span><span class="sxs-lookup"><span data-stu-id="40452-113">A static constructor is called automatically to initialize the [class](../../language-reference/keywords/class.md) before the first instance is created or any static members are referenced.</span></span> <span data-ttu-id="40452-114">Un costruttore statico verrà eseguito prima di un costruttore di istanza.</span><span class="sxs-lookup"><span data-stu-id="40452-114">A static constructor will run before an instance constructor.</span></span> <span data-ttu-id="40452-115">Il costruttore statico di un tipo viene chiamato quando viene richiamato un metodo statico assegnato a un evento o a un delegato e non quando viene assegnato.</span><span class="sxs-lookup"><span data-stu-id="40452-115">A type's static constructor is called when a static method assigned to an event or a delegate is invoked and not when it is assigned.</span></span> <span data-ttu-id="40452-116">Gli eventuali inizializzatori variabili di campo statico presenti nella classe del costruttore statico verranno eseguiti nell'ordine testuale in cui appaiono nella dichiarazione della classe subito prima dell'esecuzione del costruttore statico.</span><span class="sxs-lookup"><span data-stu-id="40452-116">If static field variable initializers are present in the class of the static constructor, they will be executed in the textual order in which they appear in the class declaration immediately prior to the execution of the static constructor.</span></span>

- <span data-ttu-id="40452-117">Se non si fornisce un costruttore statico per inizializzare i campi statici, tutti i campi statici vengono inizializzati sul valore predefinito, come elencato in [Valori predefiniti dei tipi C .](../../language-reference/builtin-types/default-values.md)</span><span class="sxs-lookup"><span data-stu-id="40452-117">If you don't provide a static constructor to initialize static fields, all static fields are initialized to their default value as listed in [Default values of C# types](../../language-reference/builtin-types/default-values.md).</span></span>
  
- <span data-ttu-id="40452-118">Se un costruttore statico genera un'eccezione, il runtime non lo chiamerà una seconda volta e il tipo rimarrà non inizializzato per la durata del dominio dell'applicazione in cui il programma è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="40452-118">If a static constructor throws an exception, the runtime will not invoke it a second time, and the type will remain uninitialized for the lifetime of the application domain in which your program is running.</span></span> <span data-ttu-id="40452-119">Viene più comunemente generata un'eccezione <xref:System.TypeInitializationException> quando un costruttore statico non è in grado di creare un'istanza di un tipo o per un'eccezione non gestita che si verifica all'interno di un costruttore statico.</span><span class="sxs-lookup"><span data-stu-id="40452-119">Most commonly, a <xref:System.TypeInitializationException> exception is thrown when a static constructor is unable to instantiate a type or for an unhandled exception occurring within a static constructor.</span></span> <span data-ttu-id="40452-120">Per i costruttori statici impliciti che non sono definiti in modo esplicito nel codice sorgente, la risoluzione dei problemi può richiedere l'ispezione del codice IL (Intermediate Language).</span><span class="sxs-lookup"><span data-stu-id="40452-120">For implicit static constructors that are not explicitly defined in source code, troubleshooting may require inspection of the intermediate language (IL) code.</span></span>

- <span data-ttu-id="40452-121">La presenza di un costruttore statico impedisce l'aggiunta dell'attributo di tipo <xref:System.Reflection.TypeAttributes.BeforeFieldInit>.</span><span class="sxs-lookup"><span data-stu-id="40452-121">The presence of a static constructor prevents the addition of the <xref:System.Reflection.TypeAttributes.BeforeFieldInit> type attribute.</span></span> <span data-ttu-id="40452-122">Ciò limita l'ottimizzazione in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="40452-122">This limits runtime optimization.</span></span>

- <span data-ttu-id="40452-123">Un campo dichiarato come `static readonly` può essere assegnato solo come parte della relativa dichiarazione o in un costruttore statico.</span><span class="sxs-lookup"><span data-stu-id="40452-123">A field declared as `static readonly` may only be assigned as part of its declaration or in a static constructor.</span></span> <span data-ttu-id="40452-124">Quando non è richiesto un costruttore statico esplicito, inizializzare i campi statici in fase di dichiarazione, anziché tramite un costruttore statico per una migliore ottimizzazione in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="40452-124">When an explicit static constructor is not required, initialize static fields at declaration, rather than through a static constructor for better runtime optimization.</span></span>

> [!Note]
> <span data-ttu-id="40452-125">Anche se non è direttamente accessibile, la presenza di un costruttore statico esplicito deve essere documentata per facilitare la risoluzione dei problemi relativi alle eccezioni di inizializzazione.</span><span class="sxs-lookup"><span data-stu-id="40452-125">Though not directly accessible, the presence of an explicit static constructor should be documented to assist with troubleshooting initialization exceptions.</span></span>

### <a name="usage"></a><span data-ttu-id="40452-126">Uso</span><span class="sxs-lookup"><span data-stu-id="40452-126">Usage</span></span>

- <span data-ttu-id="40452-127">In genere, i costruttori statici sono usati per scrivere voci nel file di log, quando alla classe è associato un file di log.</span><span class="sxs-lookup"><span data-stu-id="40452-127">A typical use of static constructors is when the class is using a log file and the constructor is used to write entries to this file.</span></span>  
- <span data-ttu-id="40452-128">I costruttori statici risultano utili anche durante la creazione di classi wrapper per il codice non gestito, quando il costruttore può chiamare il metodo `LoadLibrary`.</span><span class="sxs-lookup"><span data-stu-id="40452-128">Static constructors are also useful when creating wrapper classes for unmanaged code, when the constructor can call the `LoadLibrary` method.</span></span>  

- <span data-ttu-id="40452-129">I costruttori statici sono anche una posizione utile per applicare controlli in fase di esecuzione sul parametro di tipo che non può essere controllato in fase di compilazione tramite vincoli (vincoli di parametro di tipo).</span><span class="sxs-lookup"><span data-stu-id="40452-129">Static constructors are also a convenient place to enforce run-time checks on the type parameter that cannot be checked at compile time via constraints (Type parameter constraints).</span></span>

## <a name="example"></a><span data-ttu-id="40452-130">Esempio</span><span class="sxs-lookup"><span data-stu-id="40452-130">Example</span></span>
 <span data-ttu-id="40452-131">In questo esempio la classe `Bus` ha un costruttore statico.</span><span class="sxs-lookup"><span data-stu-id="40452-131">In this example, class `Bus` has a static constructor.</span></span> <span data-ttu-id="40452-132">Quando viene creata la prima istanza di `Bus` (`bus1`), il costruttore statico viene chiamato per inizializzare la classe.</span><span class="sxs-lookup"><span data-stu-id="40452-132">When the first instance of `Bus` is created (`bus1`), the static constructor is invoked to initialize the class.</span></span> <span data-ttu-id="40452-133">L'output dell'esempio verifica che il costruttore statico venga eseguito una sola volta, anche se vengono create due istanze di `Bus`, e che venga eseguito prima del costruttore di istanze.</span><span class="sxs-lookup"><span data-stu-id="40452-133">The sample output verifies that the static constructor runs only one time, even though two instances of `Bus` are created, and that it runs before the instance constructor runs.</span></span>  
  
 [!code-csharp[csProgGuideObjects#15](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideObjects/CS/Objects.cs#15)]

## <a name="c-language-specification"></a><span data-ttu-id="40452-134">Specifiche del linguaggio C#</span><span class="sxs-lookup"><span data-stu-id="40452-134">C# language specification</span></span>
<span data-ttu-id="40452-135">Per altre informazioni, vedere la sezione [Costruttori statici](~/_csharplang/spec/classes.md#static-constructors) della [specifica del linguaggio C#](~/_csharplang/spec/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="40452-135">For more information, see the [Static constructors](~/_csharplang/spec/classes.md#static-constructors) section of the [C# language specification](~/_csharplang/spec/introduction.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="40452-136">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="40452-136">See also</span></span>

- [<span data-ttu-id="40452-137">Guida per programmatori C#</span><span class="sxs-lookup"><span data-stu-id="40452-137">C# Programming Guide</span></span>](../index.md)
- [<span data-ttu-id="40452-138">Classi e struct</span><span class="sxs-lookup"><span data-stu-id="40452-138">Classes and Structs</span></span>](./index.md)
- [<span data-ttu-id="40452-139">Costruttori</span><span class="sxs-lookup"><span data-stu-id="40452-139">Constructors</span></span>](./constructors.md)
- [<span data-ttu-id="40452-140">Classi statiche e membri di classi statiche</span><span class="sxs-lookup"><span data-stu-id="40452-140">Static Classes and Static Class Members</span></span>](./static-classes-and-static-class-members.md)
- [<span data-ttu-id="40452-141">Finalizzatori</span><span class="sxs-lookup"><span data-stu-id="40452-141">Finalizers</span></span>](./destructors.md)
- [<span data-ttu-id="40452-142">Linee guida per la progettazione di costruttori</span><span class="sxs-lookup"><span data-stu-id="40452-142">Constructor Design Guidelines</span></span>](../../../standard/design-guidelines/constructor.md#type-constructor-guidelines)
- [<span data-ttu-id="40452-143">Avviso di sicurezza - CA2121: i costruttori statici devono essere privati</span><span class="sxs-lookup"><span data-stu-id="40452-143">Security Warning - CA2121: Static constructors should be private</span></span>](https://docs.microsoft.com/visualstudio/code-quality/ca2121-static-constructors-should-be-private)
