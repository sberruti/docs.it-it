---
title: Relazioni tra i tipi nelle operazioni di query LINQ (C#)
ms.date: 07/20/2015
helpviewer_keywords:
- inferring type information [LINQ in C#]
- data sources [LINQ in C#], type relationships
- queries [LINQ in C#], type relationships
- relationships [LINQ in C#]
- type relationships [LINQ in C#]
- variable relationships [LINQ in C#]
- type information inferred [LINQ in C#]
- data transformations [LINQ in C#]
- LINQ [C#], type relationships
ms.assetid: 99118938-d47c-4d7e-bb22-2657a9f95268
ms.openlocfilehash: 41853e6858fae9e8d449aeed95a6a84f343d5874
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/14/2020
ms.locfileid: "75635613"
---
# <a name="type-relationships-in-linq-query-operations-c"></a><span data-ttu-id="3daa6-102">Relazioni tra i tipi nelle operazioni di query LINQ (C#)</span><span class="sxs-lookup"><span data-stu-id="3daa6-102">Type Relationships in LINQ Query Operations (C#)</span></span>
<span data-ttu-id="3daa6-103">Per scrivere le query in modo efficace, è necessario comprendere in che modo i tipi di variabili in un'operazione di query completa interagiscono tra loro.</span><span class="sxs-lookup"><span data-stu-id="3daa6-103">To write queries effectively, you should understand how types of the variables in a complete query operation all relate to each other.</span></span> <span data-ttu-id="3daa6-104">Se si comprendono queste relazioni, è possibile comprendere più facilmente gli esempi e gli esempi di codice LINQ nella documentazione.</span><span class="sxs-lookup"><span data-stu-id="3daa6-104">If you understand these relationships you will more easily comprehend the LINQ samples and code examples in the documentation.</span></span> <span data-ttu-id="3daa6-105">In aggiunta, è possibile comprendere che cosa accade dietro le quinte quando le variabili vengono tipizzate in modo implicito tramite `var`.</span><span class="sxs-lookup"><span data-stu-id="3daa6-105">Furthermore, you will understand what occurs behind the scenes when variables are implicitly typed by using `var`.</span></span>  
  
 <span data-ttu-id="3daa6-106">Le operazioni di query LINQLINQ sono fortemente tipizzate nell'origine dati, nella query stessa e nell'esecuzione della query.</span><span class="sxs-lookup"><span data-stu-id="3daa6-106">LINQ query operations are strongly typed in the data source, in the query itself, and in the query execution.</span></span> <span data-ttu-id="3daa6-107">Il tipo delle variabili nella query deve essere compatibile con il tipo degli elementi nell'origine dati e con il tipo della variabile di iterazione nell'istruzione `foreach`.</span><span class="sxs-lookup"><span data-stu-id="3daa6-107">The type of the variables in the query must be compatible with the type of the elements in the data source and with the type of the iteration variable in the `foreach` statement.</span></span> <span data-ttu-id="3daa6-108">Questa forte tipizzazione garantisce che gli errori di tipo vengono rilevati in fase di compilazione quando possono essere corretti prima di essere riscontrati dagli utenti.</span><span class="sxs-lookup"><span data-stu-id="3daa6-108">This strong typing guarantees that type errors are caught at compile time when they can be corrected before users encounter them.</span></span>  
  
 <span data-ttu-id="3daa6-109">Per illustrare tali relazioni del tipo, la maggior parte degli esempi che seguono usa la tipizzazione esplicita per tutte le variabili.</span><span class="sxs-lookup"><span data-stu-id="3daa6-109">In order to demonstrate these type relationships, most of the examples that follow use explicit typing for all variables.</span></span> <span data-ttu-id="3daa6-110">Nell'ultimo esempio viene illustrato come si applichino gli stessi principi anche quando si usa la tipizzazione implicita tramite [var](../../../language-reference/keywords/var.md).</span><span class="sxs-lookup"><span data-stu-id="3daa6-110">The last example shows how the same principles apply even when you use implicit typing by using [var](../../../language-reference/keywords/var.md).</span></span>  
  
## <a name="queries-that-do-not-transform-the-source-data"></a><span data-ttu-id="3daa6-111">Query che non trasformano i dati di origine</span><span class="sxs-lookup"><span data-stu-id="3daa6-111">Queries that do not Transform the Source Data</span></span>  
 <span data-ttu-id="3daa6-112">Nella figura seguente viene illustrata un'operazione di query LINQ to Objects che non esegue trasformazioni sui dati.</span><span class="sxs-lookup"><span data-stu-id="3daa6-112">The following illustration shows a LINQ to Objects query operation that performs no transformations on the data.</span></span> <span data-ttu-id="3daa6-113">L'origine contiene una sequenza di stringhe e anche l'output della query è una sequenza di stringhe.</span><span class="sxs-lookup"><span data-stu-id="3daa6-113">The source contains a sequence of strings and the query output is also a sequence of strings.</span></span>  
  
 ![Diagramma che illustra la relazione dei tipi di dati in una query LINQ.](./media/type-relationships-in-linq-query-operations/linq-query-data-type-relation.png)  
  
1. <span data-ttu-id="3daa6-115">L'argomento del tipo dell'origine dati determina il tipo della variabile di intervallo.</span><span class="sxs-lookup"><span data-stu-id="3daa6-115">The type argument of the data source determines the type of the range variable.</span></span>  
  
2. <span data-ttu-id="3daa6-116">Il tipo di oggetto selezionato determina il tipo della variabile di query.</span><span class="sxs-lookup"><span data-stu-id="3daa6-116">The type of the object that is selected determines the type of the query variable.</span></span> <span data-ttu-id="3daa6-117">Qui `name` è una stringa.</span><span class="sxs-lookup"><span data-stu-id="3daa6-117">Here `name` is a string.</span></span> <span data-ttu-id="3daa6-118">La variabile di query è pertanto una `IEnumerable<string>`.</span><span class="sxs-lookup"><span data-stu-id="3daa6-118">Therefore, the query variable is an `IEnumerable<string>`.</span></span>  
  
3. <span data-ttu-id="3daa6-119">La variabile di query viene iterata nell'istruzione `foreach`.</span><span class="sxs-lookup"><span data-stu-id="3daa6-119">The query variable is iterated over in the `foreach` statement.</span></span> <span data-ttu-id="3daa6-120">Poiché la variabile di query è una sequenza di stringhe, anche la variabile di iterazione è una stringa.</span><span class="sxs-lookup"><span data-stu-id="3daa6-120">Because the query variable is a sequence of strings, the iteration variable is also a string.</span></span>  
  
## <a name="queries-that-transform-the-source-data"></a><span data-ttu-id="3daa6-121">Query che trasformano i dati di origine</span><span class="sxs-lookup"><span data-stu-id="3daa6-121">Queries that Transform the Source Data</span></span>  
 <span data-ttu-id="3daa6-122">La figura seguente mostra un'operazione di query [!INCLUDE[vbtecdlinq](~/includes/vbtecdlinq-md.md)] che esegue una trasformazione sui dati di lieve entità.</span><span class="sxs-lookup"><span data-stu-id="3daa6-122">The following illustration shows a [!INCLUDE[vbtecdlinq](~/includes/vbtecdlinq-md.md)] query operation that performs a simple transformation on the data.</span></span> <span data-ttu-id="3daa6-123">La query usa una sequenza di oggetti `Customer` come input e seleziona solo la proprietà `Name` nel risultato.</span><span class="sxs-lookup"><span data-stu-id="3daa6-123">The query takes a sequence of `Customer` objects as input, and selects only the `Name` property in the result.</span></span> <span data-ttu-id="3daa6-124">Poiché `Name` è una stringa, la query genera una sequenza di stringhe come output.</span><span class="sxs-lookup"><span data-stu-id="3daa6-124">Because `Name` is a string, the query produces a sequence of strings as output.</span></span>  
  
 ![Diagramma che illustra una query che trasforma il tipo di dati.](./media/type-relationships-in-linq-query-operations/linq-query-transform-data-type.png)  
  
1. <span data-ttu-id="3daa6-126">L'argomento del tipo dell'origine dati determina il tipo della variabile di intervallo.</span><span class="sxs-lookup"><span data-stu-id="3daa6-126">The type argument of the data source determines the type of the range variable.</span></span>  
  
2. <span data-ttu-id="3daa6-127">L'istruzione `select` restituisce la proprietà `Name` invece dell'oggetto `Customer` completo.</span><span class="sxs-lookup"><span data-stu-id="3daa6-127">The `select` statement returns the `Name` property instead of the complete `Customer` object.</span></span> <span data-ttu-id="3daa6-128">Poiché `Name` è una stringa, l'argomento del tipo `custNameQuery` è `string` e non `Customer`.</span><span class="sxs-lookup"><span data-stu-id="3daa6-128">Because `Name` is a string, the type argument of `custNameQuery` is `string`, not `Customer`.</span></span>  
  
3. <span data-ttu-id="3daa6-129">Poiché `custNameQuery` è una sequenza di stringhe, anche la variabile di iterazione del ciclo `foreach` del ciclo deve essere una `string`.</span><span class="sxs-lookup"><span data-stu-id="3daa6-129">Because `custNameQuery` is a sequence of strings, the `foreach` loop's iteration variable must also be a `string`.</span></span>  
  
 <span data-ttu-id="3daa6-130">La figura seguente mostra una trasformazione leggermente più complessa.</span><span class="sxs-lookup"><span data-stu-id="3daa6-130">The following illustration shows a slightly more complex transformation.</span></span> <span data-ttu-id="3daa6-131">L'istruzione `select` restituisce un tipo anonimo che acquisisce solo due membri dell'oggetto di origine `Customer`.</span><span class="sxs-lookup"><span data-stu-id="3daa6-131">The `select` statement returns an anonymous type that captures just two members of the original `Customer` object.</span></span>  
  
 ![Diagramma che illustra una query più complessa che trasforma il tipo di dati.](./media/type-relationships-in-linq-query-operations/linq-complex-query-transform-data-type.png)  
  
1. <span data-ttu-id="3daa6-133">L'argomento del tipo dell'origine dati è sempre il tipo della variabile di intervallo nella query.</span><span class="sxs-lookup"><span data-stu-id="3daa6-133">The type argument of the data source is always the type of the range variable in the query.</span></span>  
  
2. <span data-ttu-id="3daa6-134">Poiché l'istruzione `select` produce un tipo anonimo, la variabile di query deve essere tipizzata in modo implicito tramite `var`.</span><span class="sxs-lookup"><span data-stu-id="3daa6-134">Because the `select` statement produces an anonymous type, the query variable must be implicitly typed by using `var`.</span></span>  
  
3. <span data-ttu-id="3daa6-135">Poiché il tipo della variabile di query è implicito, anche la variabile di iterazione nel ciclo `foreach` deve essere implicita.</span><span class="sxs-lookup"><span data-stu-id="3daa6-135">Because the type of the query variable is implicit, the iteration variable in the `foreach` loop must also be implicit.</span></span>  
  
## <a name="letting-the-compiler-infer-type-information"></a><span data-ttu-id="3daa6-136">Deduzione delle informazioni sul tipo tramite il compilatore</span><span class="sxs-lookup"><span data-stu-id="3daa6-136">Letting the compiler infer type information</span></span>  
 <span data-ttu-id="3daa6-137">Sebbene sia necessario comprendere le relazioni di tipo in un'operazione di query, è possibile scegliere di far eseguire al compilatore tutto il lavoro al posto dell'utente.</span><span class="sxs-lookup"><span data-stu-id="3daa6-137">Although you should understand the type relationships in a query operation, you have the option to let the compiler do all the work for you.</span></span> <span data-ttu-id="3daa6-138">La parola chiave [var](../../../language-reference/keywords/var.md) può essere usata per qualsiasi variabile locale in un'operazione di query.</span><span class="sxs-lookup"><span data-stu-id="3daa6-138">The keyword [var](../../../language-reference/keywords/var.md) can be used for any local variable in a query operation.</span></span> <span data-ttu-id="3daa6-139">La figura seguente è simile all'esempio 2 illustrato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="3daa6-139">The following illustration is similar to example number 2 that was discussed earlier.</span></span> <span data-ttu-id="3daa6-140">Il compilatore fornisce, tuttavia, il tipo forte per ogni variabile nell'operazione di query.</span><span class="sxs-lookup"><span data-stu-id="3daa6-140">However, the compiler supplies the strong type for each variable in the query operation.</span></span>  
  
 ![Diagramma che illustra il flusso di tipi con tipizzazione implicita.](./media/type-relationships-in-linq-query-operations/linq-type-flow-implicit-typing.png)  
  
 <span data-ttu-id="3daa6-142">Per altre informazioni su `var`, vedere [Variabili locali tipizzate in modo implicito](../../classes-and-structs/implicitly-typed-local-variables.md).</span><span class="sxs-lookup"><span data-stu-id="3daa6-142">For more information about `var`, see [Implicitly Typed Local Variables](../../classes-and-structs/implicitly-typed-local-variables.md).</span></span>  
