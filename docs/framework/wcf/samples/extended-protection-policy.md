---
title: Criteri di protezione estesa
ms.date: 03/30/2017
ms.assetid: e2616a10-317e-4c34-8023-0c015a80a82f
ms.openlocfilehash: 3a5b1c7f296c68d407f0217963dec56f53e9a08a
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/12/2020
ms.locfileid: "79144722"
---
# <a name="extended-protection-policy"></a><span data-ttu-id="5992f-102">Criteri di protezione estesa</span><span class="sxs-lookup"><span data-stu-id="5992f-102">Extended Protection Policy</span></span>
<span data-ttu-id="5992f-103">La protezione estesa rappresenta un'iniziativa di sicurezza per la protezione da attacchi di tipo man-in-the-middle (MITM).</span><span class="sxs-lookup"><span data-stu-id="5992f-103">Extended Protection is a security initiative for protecting against man-in-the-middle (MITM) attacks.</span></span> <span data-ttu-id="5992f-104">Un attacco MITM è un rischio per la sicurezza nel quale l'autore dell'attacco rileva le credenziali di un client e le inoltra a un server.</span><span class="sxs-lookup"><span data-stu-id="5992f-104">A MITM attack is a security threat in which a MITM takes a client’s credentials and forwards it to a server.</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="5992f-105">Dimostra</span><span class="sxs-lookup"><span data-stu-id="5992f-105">Demonstrates</span></span>  
 <span data-ttu-id="5992f-106">Protezione estesa</span><span class="sxs-lookup"><span data-stu-id="5992f-106">Extended protection</span></span>  
  
## <a name="discussion"></a><span data-ttu-id="5992f-107">Discussione</span><span class="sxs-lookup"><span data-stu-id="5992f-107">Discussion</span></span>  
 <span data-ttu-id="5992f-108">Quando le applicazioni eseguono l'autenticazione con i metodi Kerberos, Digest o NTLM usando il protocollo HTTPS, viene innanzitutto stabilito un canale TLS (Transport Level Security) e l'autenticazione viene eseguita usando un canale protetto.</span><span class="sxs-lookup"><span data-stu-id="5992f-108">When applications authenticate using Kerberos, Digest or NTLM using HTTPS, a Transport Level Security (TLS) channel is first established and then authentication takes place using the secure channel.</span></span> <span data-ttu-id="5992f-109">Non esiste tuttavia alcuna associazione tra la chiave di sessione generata da SSL e quella generata durante l'autenticazione</span><span class="sxs-lookup"><span data-stu-id="5992f-109">However, there is no binding between the session key generated by SSL and the session key generated during authentication.</span></span> <span data-ttu-id="5992f-110">e pertanto l'autore dell'attacco di tipo MITM può inserirsi tra il client e il server e iniziare a inoltrare le richieste dal client, anche quando il canale di trasporto è protetto, poiché il server non ha modo di sapere se il canale protetto è stato stabilito dal client o dall'autore dell'attacco di tipo MITM.</span><span class="sxs-lookup"><span data-stu-id="5992f-110">Any MITM can establish itself between the client and the server and start forwarding the requests from the client, even when the transport channel itself is secure, because the server has no way of knowing whether the secure channel has been established from the client or a MITM.</span></span> <span data-ttu-id="5992f-111">La soluzione in questo scenario consiste nell'associare il canale TLS esterno al canale di autenticazione interno, in modo tale che il server possa determinare se si tratta di un attacco di tipo MITM.</span><span class="sxs-lookup"><span data-stu-id="5992f-111">The solution in this scenario is to bind the outer TLS channel with the inner authentication channel such that the server can detect if there is a MITM.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5992f-112">Questo esempio può essere usato solo se ospitato in IIS. Non può essere usato su Cassini - Visual Studio Development Server in quanto Cassini non supporta HTTPS.</span><span class="sxs-lookup"><span data-stu-id="5992f-112">This sample only works when hosted on IIS and cannot work on Cassini – Visual Studio Development Server because Cassini does not support HTTPS.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5992f-113">Questa funzionalità è attualmente disponibile solo in Windows 7.</span><span class="sxs-lookup"><span data-stu-id="5992f-113">This feature is currently only available on Windows 7.</span></span> <span data-ttu-id="5992f-114">La procedura seguente è specifica di Windows 7.</span><span class="sxs-lookup"><span data-stu-id="5992f-114">The following steps are specific to Windows 7.</span></span>  
  
#### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="5992f-115">Per impostare, compilare ed eseguire l'esempio</span><span class="sxs-lookup"><span data-stu-id="5992f-115">To set up, build, and run the sample</span></span>  
  
1. <span data-ttu-id="5992f-116">Installare Internet Information Services dal **Pannello di controllo**, Installazione **applicazioni**, **Funzionalità Windows**.</span><span class="sxs-lookup"><span data-stu-id="5992f-116">Install Internet Information Services from **Control Panel**, **Add/Remove Programs**, **Windows Features**.</span></span>  
  
2. <span data-ttu-id="5992f-117">Installare **l'autenticazione** di Windows nelle **funzionalità di Windows**, Internet Information **Services**, \*\*Servizi \*\*, **Protezione**e **Autenticazione di Windows**.</span><span class="sxs-lookup"><span data-stu-id="5992f-117">Install **Windows Authentication** in **Windows Features**, **Internet Information Services**, **World Wide Web Services**, **Security**, and **Windows Authentication**.</span></span>  
  
3. <span data-ttu-id="5992f-118">Installare **l'attivazione HTTP** di Windows Communication Foundation in **Funzionalità Windows**, **Microsoft .NET Framework 3.5.1**e **Attivazione HTTP di Windows Communication Foundation**.</span><span class="sxs-lookup"><span data-stu-id="5992f-118">Install **Windows Communication Foundation HTTP Activation** in **Windows Features**, **Microsoft .NET Framework 3.5.1**, and **Windows Communication Foundation HTTP Activation**.</span></span>  
  
4. <span data-ttu-id="5992f-119">In questo esempio il client deve stabilire un canale protetto con il server, di conseguenza è necessario che sia presente un certificato del server che può essere installato da Gestione Internet Information Services.</span><span class="sxs-lookup"><span data-stu-id="5992f-119">This sample requires the client to establish a secure channel with the server, so it requires the presence of a server certificate which can be installed from Internet Information Services (IIS) Manager.</span></span>  
  
    1. <span data-ttu-id="5992f-120">Aprire Gestione IIS.</span><span class="sxs-lookup"><span data-stu-id="5992f-120">Open IIS Manager.</span></span> <span data-ttu-id="5992f-121">Aprire **Certificati server**, visualizzata nella scheda Visualizzazione **funzionalità** quando viene selezionato il nodo radice (nome computer).</span><span class="sxs-lookup"><span data-stu-id="5992f-121">Open **Server certificates**, which appears in the **Feature View** tab when the root node (machine name) is selected.</span></span>  
  
    2. <span data-ttu-id="5992f-122">Ai fini dimostrativi di questo esempio, creare un certificato autofirmato.</span><span class="sxs-lookup"><span data-stu-id="5992f-122">For the purpose of testing this sample, create a self-signed certificate.</span></span> <span data-ttu-id="5992f-123">Se non si desidera che venga visualizzato un messaggio relativo alla sicurezza del certificato, installare il certificato nell'archivio Autorità di certificazione radice attendibili.</span><span class="sxs-lookup"><span data-stu-id="5992f-123">If you do not want Internet Explorer to prompt you about the certificate not being secure, install the certificate in the Trusted Certificate Root authority store.</span></span>  
  
5. <span data-ttu-id="5992f-124">Aprire il riquadro **Azioni** per il sito Web predefinito.</span><span class="sxs-lookup"><span data-stu-id="5992f-124">Open the **Actions** pane for the default Web site.</span></span> <span data-ttu-id="5992f-125">Fare clic su **Modifica sito**, **Associazioni**.</span><span class="sxs-lookup"><span data-stu-id="5992f-125">Click **Edit Site**, **Bindings**.</span></span> <span data-ttu-id="5992f-126">Aggiungere HTTPS come tipo, se non già presente, con numero di porta 443.</span><span class="sxs-lookup"><span data-stu-id="5992f-126">Add HTTPS as a type if not already present, with port number 443.</span></span> <span data-ttu-id="5992f-127">Assegnare il certificato SSL creato nel passaggio precedente.</span><span class="sxs-lookup"><span data-stu-id="5992f-127">Assign the SSL certificate created in the preceding step.</span></span>  
  
6. <span data-ttu-id="5992f-128">Compilare il servizio.</span><span class="sxs-lookup"><span data-stu-id="5992f-128">Build the service.</span></span> <span data-ttu-id="5992f-129">In questo modo viene creata automaticamente una directory virtuale in IIS e vengono copiati i file con estensione dll e svc e il file di configurazione per il servizio da ospitare nel Web.</span><span class="sxs-lookup"><span data-stu-id="5992f-129">This creates a virtual directory in IIS, and copies the .dll, .svc and .config files as required for the service to be Web hosted.</span></span>  
  
7. <span data-ttu-id="5992f-130">Aprire Gestione IIS.</span><span class="sxs-lookup"><span data-stu-id="5992f-130">Open IIS Manager.</span></span> <span data-ttu-id="5992f-131">Fare clic con il pulsante destro del mouse sulla directory virtuale (**ExtendedProtection**) creata nel passaggio precedente.</span><span class="sxs-lookup"><span data-stu-id="5992f-131">Right-click the virtual directory (**ExtendedProtection**), which was created in the preceding step.</span></span> <span data-ttu-id="5992f-132">Selezionare **Converti in applicazione**.</span><span class="sxs-lookup"><span data-stu-id="5992f-132">Select **Convert to Application**.</span></span>  
  
8. <span data-ttu-id="5992f-133">Aprire il modulo **Autenticazione** in Gestione IIS per questa directory virtuale e abilitare **l'autenticazione di Windows**.</span><span class="sxs-lookup"><span data-stu-id="5992f-133">Open the **Authentication** module in IIS Manager for this virtual directory and enable **Windows Authentication**.</span></span>  
  
9. <span data-ttu-id="5992f-134">Aprire **Impostazioni avanzate** in **Autenticazione** di Windows per questa directory virtuale e impostarla su **Obbligatorio**.</span><span class="sxs-lookup"><span data-stu-id="5992f-134">Open **Advanced Settings** under **Windows Authentication** for this virtual directory and set it to **Required**.</span></span>  
  
10. <span data-ttu-id="5992f-135">È possibile testare il servizio eseguendo l'accesso all'URL HTTPS da una finestra del browser (fornire un nome di dominio completo).</span><span class="sxs-lookup"><span data-stu-id="5992f-135">You can test the service by accessing the HTTPS URL from a browser window (Provide a fully-qualified domain name).</span></span> <span data-ttu-id="5992f-136">Se si desidera accedere a tale URL da un computer remoto, verificare che il firewall sia aperto per tutte le connessioni HTTP e HTTPS in entrata.</span><span class="sxs-lookup"><span data-stu-id="5992f-136">If you want to access this URL from a remote machine, make sure that the firewall is opened for all incoming HTTP and HTTPS connections.</span></span>  
  
11. <span data-ttu-id="5992f-137">Aprire il file di configurazione del client e specificare un nome di dominio completo per l'attributo dell'indirizzo del client o dell'endpoint sostituendo `<<full_machine_name>>`.</span><span class="sxs-lookup"><span data-stu-id="5992f-137">Open the client configuration file and provide a fully-qualified domain name for the client or endpoint address attribute that replaces `<<full_machine_name>>`.</span></span>  
  
12. <span data-ttu-id="5992f-138">Eseguire il client.</span><span class="sxs-lookup"><span data-stu-id="5992f-138">Run the client.</span></span> <span data-ttu-id="5992f-139">Per comunicare con il servizio, il client stabilisce un canale protetto e usa la protezione estesa.</span><span class="sxs-lookup"><span data-stu-id="5992f-139">The client communicates with the service, which establishes a secure channel and uses extended protection.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="5992f-140">È possibile che gli esempi siano già installati nel computer.</span><span class="sxs-lookup"><span data-stu-id="5992f-140">The samples may already be installed on your machine.</span></span> <span data-ttu-id="5992f-141">Verificare la directory seguente (impostazione predefinita) prima di continuare.</span><span class="sxs-lookup"><span data-stu-id="5992f-141">Check for the following (default) directory before continuing.</span></span>  
>
> `<InstallDrive>:\WF_WCF_Samples`  
>
> <span data-ttu-id="5992f-142">Se questa directory non esiste, passare a [Windows Communication Foundation (WCF) e Windows Workflow Foundation (WF) Esempi per .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) per scaricare tutti gli esempi e [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="5992f-142">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="5992f-143">Questo esempio si trova nella directory seguente.</span><span class="sxs-lookup"><span data-stu-id="5992f-143">This sample is located in the following directory.</span></span>  
>
> `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Services\Security\ExtendedProtection`
