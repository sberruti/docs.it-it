---
title: Mpgo.exe (strumento per l'ottimizzazione guidata da profilo gestito)
ms.date: 03/30/2017
helpviewer_keywords:
- Mpgo.exe
- training scenarios, generating profiles with
- Managed Profile Guided Optimization Tool
- Ngen.exe
- Ngen.exe, profilers and native images
ms.assetid: f6976502-a000-4fbe-aaf5-a7aab9ce4ec2
ms.openlocfilehash: 0052475697dae2c3ad891db18d300b5ec08a7e62
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/15/2020
ms.locfileid: "79180353"
---
# <a name="mpgoexe-managed-profile-guided-optimization-tool"></a><span data-ttu-id="5a8a7-102">Mpgo.exe (strumento per l'ottimizzazione guidata da profilo gestito)</span><span class="sxs-lookup"><span data-stu-id="5a8a7-102">Mpgo.exe (Managed Profile Guided Optimization Tool)</span></span>

<span data-ttu-id="5a8a7-103">Lo strumento per l'ottimizzazione guidata da profilo gestito (Mpgo.exe) è uno strumento da riga di comando che usa scenari comuni dell'utente finale per ottimizzare gli assembly di immagini native creati dal [generatore di immagini native (Ngen.exe)](ngen-exe-native-image-generator.md).</span><span class="sxs-lookup"><span data-stu-id="5a8a7-103">The Managed Profile Guided Optimization Tool (Mpgo.exe) is a command-line tool that uses common end-user scenarios to optimize the native image assemblies that are created by the [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md).</span></span> <span data-ttu-id="5a8a7-104">Attraverso questo strumento è possibile eseguire scenari di training che generano dati di profilatura,</span><span class="sxs-lookup"><span data-stu-id="5a8a7-104">This tool enables you to run training scenarios that generate profile data.</span></span> <span data-ttu-id="5a8a7-105">Il [generatore di immagini native (Ngen.exe)](ngen-exe-native-image-generator.md) usa questi dati per ottimizzare gli assembly di applicazioni di immagini native generati.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-105">The [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md) uses this data to optimize its generated native image application assemblies.</span></span> <span data-ttu-id="5a8a7-106">Uno scenario di training è un'esecuzione di test di un uso previsto dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-106">A training scenario is a trial run of an expected use of your application.</span></span> <span data-ttu-id="5a8a7-107">Mpgo.exe è disponibile in Visual Studio Ultimate 2012 e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-107">Mpgo.exe is available in Visual Studio Ultimate 2012 and later versions.</span></span> <span data-ttu-id="5a8a7-108">A partire da Visual Studio 2013, puoi anche usare Mpgo.exe per ottimizzare le app di Windows 8.x Store.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-108">Starting with Visual Studio 2013, you can also use Mpgo.exe to optimize Windows 8.x Store apps.</span></span>  
  
<span data-ttu-id="5a8a7-109">L'ottimizzazione PGO migliora i tempi di avvio dell'applicazione, l'utilizzo della memoria (dimensioni del working set) e la velocità effettiva raccogliendo dati dagli scenari di prova e utilizzandoli per ottimizzare il layout delle immagini native.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-109">Profile-guided optimization improves application startup time, memory utilization (working set size), and throughput by gathering data from training scenarios and using it to optimize the layout of native images.</span></span>  
  
<span data-ttu-id="5a8a7-110">Quando si verificano problemi di prestazioni relativi al tempo di avvio e alle dimensioni del working set per gli assembly di linguaggio intermedio (IL), è consigliabile innanzitutto utilizzare Ngen.exe per eliminare i costi della compilazione just-in-time (JIT) e per facilitare la condivisione del codice.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-110">When you encounter performance issues with startup time and working set size for Intermediate Language (IL) assemblies, we recommend that you first use Ngen.exe to eliminate just-in-time (JIT) compilation costs and to facilitate code sharing.</span></span> <span data-ttu-id="5a8a7-111">Se sono necessari miglioramenti aggiuntivi, è possibile utilizzare Mpgo.exe per ottimizzare ulteriormente l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-111">If you need additional improvements, you can then use Mpgo.exe to further optimize your application.</span></span> <span data-ttu-id="5a8a7-112">È possibile utilizzare i dati delle prestazioni degli assembly di immagini native non ottimizzati come base di riferimento per valutare l'incremento delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-112">You can use the performance data from the un-optimized native image assemblies as a baseline to evaluate the performance gains.</span></span> <span data-ttu-id="5a8a7-113">L'utilizzo di Mpgo.exe può produrre tempi di avvio a freddo più rapidi e un working set di dimensioni più ridotte.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-113">Using Mpgo.exe may result in faster cold startup times and a smaller working set size.</span></span> <span data-ttu-id="5a8a7-114">Mpgo.exe aggiunge informazioni agli assembly IL utilizzati da Ngen.exe per creare assembly di immagini native ottimizzati.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-114">Mpgo.exe adds information to IL assemblies that Ngen.exe uses to create optimized native image assemblies.</span></span> <span data-ttu-id="5a8a7-115">Per altre informazioni, vedere il post [Improving Launch Performance for your Desktop Applications](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) (Miglioramento delle prestazioni di avvio per le applicazioni desktop) nel blog di .NET.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-115">For more information, see the entry [Improving Launch Performance for your Desktop Applications](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) in the .NET blog.</span></span>  
  
<span data-ttu-id="5a8a7-116">Viene installato automaticamente con Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-116">This tool is automatically installed with Visual Studio.</span></span> <span data-ttu-id="5a8a7-117">Per eseguire lo strumento, usare il Prompt dei comandi per gli sviluppatori per Visual Studio (o il prompt dei comandi di Visual Studio in Windows 7) con credenziali di amministratore e digitare quanto segue.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-117">To run the tool, use the Developer Command Prompt for Visual Studio (or the Visual Studio Command Prompt in Windows 7) with administrator credentials, and type the following at the command prompt.</span></span> <span data-ttu-id="5a8a7-118">Per altre informazioni, vedere [Prompt dei comandi](developer-command-prompt-for-vs.md).</span><span class="sxs-lookup"><span data-stu-id="5a8a7-118">For more information, see [Command Prompts](developer-command-prompt-for-vs.md).</span></span>  
  
<span data-ttu-id="5a8a7-119">Per le app desktop:</span><span class="sxs-lookup"><span data-stu-id="5a8a7-119">For desktop apps:</span></span>  
  
```console  
mpgo –Scenario <command> [-Import <directory>] –AssemblyList <assembly1>  <assembly2> ... -OutDir <directory> [options]  
```  
  
<span data-ttu-id="5a8a7-120">Per le app di Windows 8.x Store:</span><span class="sxs-lookup"><span data-stu-id="5a8a7-120">For Windows 8.x Store apps:</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="5a8a7-121">Sintassi</span><span class="sxs-lookup"><span data-stu-id="5a8a7-121">Syntax</span></span>  
  
```console  
mpgo –Scenario <packageName> -AppID <appId> -Timeout <seconds>  
```  
  
## <a name="parameters"></a><span data-ttu-id="5a8a7-122">Parametri</span><span class="sxs-lookup"><span data-stu-id="5a8a7-122">Parameters</span></span>  
 <span data-ttu-id="5a8a7-123">Gli argomenti di Mpgo.exe non sono soggetti a distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-123">All arguments to Mpgo.exe are case-insensitive.</span></span> <span data-ttu-id="5a8a7-124">I comandi sono preceduti da un trattino.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-124">Commands are prefixed with a dash.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5a8a7-125">È possibile utilizzare `–Scenario` o `–Import` come comando obbligatorio, ma non entrambi.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-125">You can use either `–Scenario` or `–Import` as a required command, but not both.</span></span> <span data-ttu-id="5a8a7-126">Nessuno dei parametri obbligatori viene usato se si specifica l'opzione `–Reset`.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-126">None of the required parameters are used if you specify the `–Reset` option.</span></span>

|<span data-ttu-id="5a8a7-127">Parametro obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-127">Required parameter</span></span>|<span data-ttu-id="5a8a7-128">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5a8a7-128">Description</span></span>|
|------------------------|-----------------|
|<span data-ttu-id="5a8a7-129">`-Scenario`\< *comando*></span><span class="sxs-lookup"><span data-stu-id="5a8a7-129">`-Scenario` \<*command*></span></span><br /><br /> <span data-ttu-id="5a8a7-130">-oppure-</span><span class="sxs-lookup"><span data-stu-id="5a8a7-130">—or—</span></span><br /><br /> <span data-ttu-id="5a8a7-131">`-Scenario`\< *packageName (nomepacchetto)*></span><span class="sxs-lookup"><span data-stu-id="5a8a7-131">`-Scenario` \<*packageName*></span></span><br /><br /> <span data-ttu-id="5a8a7-132">-oppure-</span><span class="sxs-lookup"><span data-stu-id="5a8a7-132">-or-</span></span><br /><br /> <span data-ttu-id="5a8a7-133">`-Import`\< *directory*></span><span class="sxs-lookup"><span data-stu-id="5a8a7-133">`-Import` \<*directory*></span></span>|<span data-ttu-id="5a8a7-134">Per le app desktop, usare `–Scenario` per specificare il comando per eseguire l'applicazione che si desidera ottimizzare, inclusi gli eventuali argomenti della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-134">For desktop apps, use `–Scenario` to specify the command to run the application you want to optimize, including any command-line arguments.</span></span> <span data-ttu-id="5a8a7-135">Racchiudere *comando* in tre set di virgolette doppie se si specifica un percorso che include spazi; ad esempio: `mpgo.exe -scenario """C:\My App\myapp.exe""" -assemblylist """C:\My App\myapp.exe""" -outdir "C:\optimized files"`.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-135">Use three sets of double quotation marks around *command* if it specifies a path that includes spaces; for example: `mpgo.exe -scenario """C:\My App\myapp.exe""" -assemblylist """C:\My App\myapp.exe""" -outdir "C:\optimized files"`.</span></span> <span data-ttu-id="5a8a7-136">Non usare le virgolette doppie; non funzioneranno correttamente se *comando* include spazi.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-136">Do not use double quotation marks; they will not work correctly if *command* includes spaces.</span></span><br /><br /> <span data-ttu-id="5a8a7-137">-oppure-</span><span class="sxs-lookup"><span data-stu-id="5a8a7-137">-or-</span></span><br /><br /> <span data-ttu-id="5a8a7-138">Per le app di Windows `–Scenario` 8.x Store, usalo per specificare il pacchetto per il quale vuoi generare le informazioni sul profilo.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-138">For Windows 8.x Store apps, use `–Scenario` to specify the package that you want to generate profile information for.</span></span> <span data-ttu-id="5a8a7-139">Se si specifica il nome visualizzato del pacchetto o il nome di famiglia del pacchetto anziché il nome completo del pacchetto, Mpgo.exe selezionerà il pacchetto che corrisponde al nome immesso se è presente solo una corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-139">If you specify the package display name or the package family name instead of the full package name, Mpgo.exe will select the package that matches the name you provided if there is only one match.</span></span> <span data-ttu-id="5a8a7-140">Se più pacchetti corrispondono al nome specificato, verrà richiesto di scegliere un pacchetto.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-140">If multiple packages match the specified name, Mpgo.exe will prompt you to choose a package.</span></span><br /><br /> <span data-ttu-id="5a8a7-141">-oppure-</span><span class="sxs-lookup"><span data-stu-id="5a8a7-141">—or—</span></span><br /><br /> <span data-ttu-id="5a8a7-142">Utilizzare `-Import` per specificare che i dati di ottimizzazione derivati da assembly precedentemente ottimizzati devono essere utilizzati per ottimizzare gli assembly in `-AssemblyList`.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-142">Use `-Import` to specify that optimization data from previously optimized assemblies should be used to optimize the assemblies in `-AssemblyList`.</span></span> <span data-ttu-id="5a8a7-143">*directory* specifica la directory che contiene i file ottimizzati precedentemente.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-143">*directory* specifies the directory that contains the previously optimized files.</span></span> <span data-ttu-id="5a8a7-144">Gli assembly specificati in `–AssemblyList` o `–AssemblyListFile` sono le nuove versioni di assembly da ottimizzare usando i dati dai file importati.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-144">The assemblies specified in `–AssemblyList` or `–AssemblyListFile` are the new versions of the assemblies to be optimized using the data from the imported files.</span></span> <span data-ttu-id="5a8a7-145">L'utilizzo dei dati di ottimizzazione da versioni precedenti degli assembly consente di ottimizzare le versioni più recenti senza rieseguire lo scenario.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-145">Using optimization data from older version of assemblies enables you to optimize newer versions of assemblies without re-running the scenario.</span></span>  <span data-ttu-id="5a8a7-146">Tuttavia, se gli assembly importati e di destinazione includono codice notevolmente diverso, i dati di ottimizzazione saranno inefficaci.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-146">However, if the imported and target assemblies include significantly different code, the optimization data will be ineffective.</span></span> <span data-ttu-id="5a8a7-147">I nomi degli assembly specificati in `–AssemblyList` o `–AssemblyListFile` devono essere inclusi nella directory specificata da `–Import`*directory*.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-147">The assembly names specified in `–AssemblyList` or `–AssemblyListFile` must be present in the directory specified by `–Import`*directory*.</span></span> <span data-ttu-id="5a8a7-148">Racchiudere *directory* in tre set di virgolette doppie se si specifica un percorso che include spazi.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-148">Use three sets of double quotation marks around *directory* if it specifies a path that includes spaces.</span></span><br /><br /> <span data-ttu-id="5a8a7-149">È necessario specificare il parametro `–Scenario` o `–Import`, ma non entrambi i parametri.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-149">You must specify either `–Scenario` or `–Import`, but not both parameters.</span></span>|
|<span data-ttu-id="5a8a7-150">`-OutDir`\< *directory*></span><span class="sxs-lookup"><span data-stu-id="5a8a7-150">`-OutDir` \<*directory*></span></span>|<span data-ttu-id="5a8a7-151">Directory in cui inserire gli assembly ottimizzati.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-151">The directory in which to place the optimized assemblies.</span></span> <span data-ttu-id="5a8a7-152">Se esiste già un assembly nella directory di output, viene creata una nuova copia e viene aggiunto un numero di indice al nome, ad esempio *nomeassembly*-1.exe.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-152">If an assembly already exists in the output directory folder, a new copy is created and an index number is appended to its name; for example: *assemblyname*-1.exe.</span></span> <span data-ttu-id="5a8a7-153">Racchiudere *directory* in virgolette doppie se si specifica un percorso che contiene spazi.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-153">Use double quotation marks around *directory* if it specifies a path that contains spaces.</span></span>|
|<span data-ttu-id="5a8a7-154">`-AssemblyList`\< *assemblaggio1 assembly2 ...*></span><span class="sxs-lookup"><span data-stu-id="5a8a7-154">`-AssemblyList` \<*assembly1 assembly2 ...*></span></span><br /><br /> <span data-ttu-id="5a8a7-155">-oppure-</span><span class="sxs-lookup"><span data-stu-id="5a8a7-155">—or—</span></span><br /><br /> <span data-ttu-id="5a8a7-156">`-AssemblyListFile`\< *file*></span><span class="sxs-lookup"><span data-stu-id="5a8a7-156">`-AssemblyListFile` \<*file*></span></span>|<span data-ttu-id="5a8a7-157">Elenco di assembly (inclusi file .exe e .dll), separati da spazi, di cui si desidera raccogliere informazioni riguardanti il profilo.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-157">A list of assemblies (including .exe and .dll files), separated by spaces, that you want collect profile information about.</span></span> <span data-ttu-id="5a8a7-158">È possibile specificare `C:\Dir\*.dll` o `*.dll` per selezionare tutti gli assembly nella directory di lavoro definita o corrente.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-158">You can specify `C:\Dir\*.dll` or `*.dll` to select all the assemblies in the designated or current working directory.</span></span> <span data-ttu-id="5a8a7-159">Per ulteriori informazioni, vedere le sezione Note.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-159">See the Remarks section for more information.</span></span><br /><br /> <span data-ttu-id="5a8a7-160">-oppure-</span><span class="sxs-lookup"><span data-stu-id="5a8a7-160">—or—</span></span><br /><br /> <span data-ttu-id="5a8a7-161">File di testo che contiene l'elenco di assembly di cui si desidera raccogliere informazioni sul profilo, un assembly per riga.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-161">A text file that contains the list of assemblies you want to collect profile information about, listed one assembly per line.</span></span> <span data-ttu-id="5a8a7-162">Se il nome dell'assembly inizia con un trattino (-), utilizzare un elenco di file di assembly o rinominare l'assembly.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-162">If an assembly name begins with a hyphen (-), use an assembly file list or rename the assembly.</span></span>|
|<span data-ttu-id="5a8a7-163">`-AppID`\< *appId (AppId)*></span><span class="sxs-lookup"><span data-stu-id="5a8a7-163">`-AppID` \<*appId*></span></span>|<span data-ttu-id="5a8a7-164">ID dell'applicazione nel pacchetto specificato.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-164">The ID of the application in the specified package.</span></span> <span data-ttu-id="5a8a7-165">Se si usa il carattere jolly (\*), Mpgo.exe proverà a enumerare gli IDapp nel pacchetto ed eseguirà il fallback a \<*package_family_name*>!App se non riesce.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-165">If you use the wildcard (\*), Mpgo.exe will try to enumerate the AppIDs in the package and will fall back to \<*package_family_name*>!App if it fails.</span></span> <span data-ttu-id="5a8a7-166">Se si specifica una stringa preceduta da un punto esclamativo (!), verrà concatenato il nome della famiglia del pacchetto con l'argomento fornito.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-166">If you specify a string that is prefixed by an exclamation point (!), Mpgo.exe will concatenate the package family name with the argument provided.</span></span>|
|<span data-ttu-id="5a8a7-167">`-Timeout`\< *secondi*></span><span class="sxs-lookup"><span data-stu-id="5a8a7-167">`-Timeout` \<*seconds*></span></span>|<span data-ttu-id="5a8a7-168">Periodo di tempo per consentire l'esecuzione dell'app Windows 8.x Store prima della chiusura dell'app.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-168">The amount of time to allow the Windows 8.x Store app to run before the app exits.</span></span>|

|<span data-ttu-id="5a8a7-169">Parametro facoltativo</span><span class="sxs-lookup"><span data-stu-id="5a8a7-169">Optional parameter</span></span>|<span data-ttu-id="5a8a7-170">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5a8a7-170">Description</span></span>|
|------------------------|-----------------|
|`-64bit`|<span data-ttu-id="5a8a7-171">Instrumenta gli assembly per i sistemi a 64 bit.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-171">Instruments the assemblies for 64-bit systems.</span></span>  <span data-ttu-id="5a8a7-172">È necessario specificare questo parametro per gli assembly a 64 bit, anche se l'assembly si dichiara come a 64 bit.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-172">You must specify this parameter for 64-bit assemblies, even if your assembly declares itself as 64 bit.</span></span>|
|<span data-ttu-id="5a8a7-173">`-ExeConfig`\< *nome file*></span><span class="sxs-lookup"><span data-stu-id="5a8a7-173">`-ExeConfig` \<*filename*></span></span>|<span data-ttu-id="5a8a7-174">Specifica il file di configurazione utilizzato dallo scenario per fornire informazioni sulla versione e sul caricatore.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-174">Specifies the configuration file that your scenario uses to provide version and loader information.</span></span>|
|`-f`|<span data-ttu-id="5a8a7-175">Forza l'inclusione dei dati di profilo in un assembly binario, anche se è firmato.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-175">Forces the inclusion of the profile data in a binary assembly, even if it's signed.</span></span>  <span data-ttu-id="5a8a7-176">Se l'assembly è firmato, è necessario firmarlo nuovamente; in caso contrario, l'assembly non verrà caricato ed eseguito.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-176">If the assembly is signed, it must be re-signed; otherwise, the assembly will fail to load and run.</span></span>|
|`-Reset`|<span data-ttu-id="5a8a7-177">Reimposta l'ambiente per assicurare che una sessione di profilatura interrotta non influisca sugli assembly ed esce.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-177">Resets the environment to make certain that an aborted profiling session doesn't affect your assemblies, and then quits.</span></span> <span data-ttu-id="5a8a7-178">L'ambiente viene reimpostato per impostazione predefinita prima e dopo una sessione di profilatura.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-178">The environment is reset by default before and after a profiling session.</span></span>|
|<span data-ttu-id="5a8a7-179">`-Timeout`\< *tempo in secondi*></span><span class="sxs-lookup"><span data-stu-id="5a8a7-179">`-Timeout` \<*time in seconds*></span></span>|<span data-ttu-id="5a8a7-180">Specifica la durata della profilatura in secondi.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-180">Specifies the profiling duration in seconds.</span></span> <span data-ttu-id="5a8a7-181">Utilizzare un valore leggermente superiore dei tempi di avvio osservati per le applicazioni GUI.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-181">Use a value that is slightly more than your observed startup times for GUI applications.</span></span> <span data-ttu-id="5a8a7-182">Alla fine del periodo di timeout, i dati di profilo vengono registrati anche se l'applicazione continua l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-182">At the end of the time-out period, the profile data is recorded although the application continues to run.</span></span> <span data-ttu-id="5a8a7-183">Se non si imposta questa opzione, la profilatura continuerà fino alla chiusura dell'applicazione, momento nel quale i dati verranno registrati.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-183">If you don't set this option, profiling will continue until application shutdown, at which time the data will be recorded.</span></span>|
|`-LeaveNativeImages`|<span data-ttu-id="5a8a7-184">Specifica che le immagini native instrumentate non devono essere rimosse dopo l'esecuzione dello scenario.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-184">Specifies that the instrumented native images shouldn't be removed after running the scenario.</span></span> <span data-ttu-id="5a8a7-185">Questa opzione viene utilizzata principalmente quando si esegue l'applicazione specificata per lo scenario,</span><span class="sxs-lookup"><span data-stu-id="5a8a7-185">This option is primarily used when you're getting the application that you specified for the scenario running.</span></span> <span data-ttu-id="5a8a7-186">perché impedisce la nuova creazione di immagini native per le esecuzioni successive di Mpgo.exe.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-186">It will prevent the recreation of native images for subsequent runs of Mpgo.exe.</span></span> <span data-ttu-id="5a8a7-187">Dopo aver completato l'esecuzione dell'applicazione, possono rimanere immagini native orfane nella cache se si specifica questa opzione.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-187">When you have finished running your application, there may be orphaned native images in the cache if you specify this option.</span></span> <span data-ttu-id="5a8a7-188">In questo caso, eseguire Mpgo.exe con lo stesso scenario ed elenco di assembly e utilizzare il parametro`–RemoveNativeImages` per rimuovere queste immagini native.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-188">In this case, run Mpgo.exe with the same scenario and assembly list and use the `–RemoveNativeImages` parameter to remove these native images.</span></span>|
|`-RemoveNativeImages`|<span data-ttu-id="5a8a7-189">Esegue la pulizia dopo un'esecuzione in cui `–LeaveNativeImages` è stato specificato.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-189">Cleans up from a run where `–LeaveNativeImages` was specified.</span></span> <span data-ttu-id="5a8a7-190">Se si specifica `-RemoveNativeImages`, eventuali argomenti tranne `-64bit` e `–AssemblyList` vengono ignorati da Mpgo.exe e lo strumento viene chiuso dopo avere rimosso tutte le immagini native instrumentate.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-190">If you specify `-RemoveNativeImages`, Mpgo.exe ignores any arguments except `-64bit` and `–AssemblyList`, and exits after removing all instrumented native images.</span></span>|

## <a name="remarks"></a><span data-ttu-id="5a8a7-191">Osservazioni</span><span class="sxs-lookup"><span data-stu-id="5a8a7-191">Remarks</span></span>
 <span data-ttu-id="5a8a7-192">È possibile usare sia `–AssemblyList` che `- AssemblyListFile` più volte nella riga di comando.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-192">You can use both `–AssemblyList` and `- AssemblyListFile` multiple times on the command line.</span></span>

 <span data-ttu-id="5a8a7-193">Se non si specificano nomi di percorso completi quando si specificano gli assembly, Mpgo.exe cerca nella directory corrente.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-193">If you do not specify full path names when specifying assemblies, Mpgo.exe looks in the current directory.</span></span> <span data-ttu-id="5a8a7-194">Se si specifica un percorso errato, Mpgo.exe visualizza un messaggio di errore, ma continua a generare dati per altri assembly.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-194">If you specify an incorrect path, Mpgo.exe displays an error message but continues to generate data for other assemblies.</span></span> <span data-ttu-id="5a8a7-195">Se si specifica un assembly che non viene caricato durante lo scenario di prova, i dati di prova non vengono generati per tale assembly.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-195">If you specify an assembly that is not loaded during the training scenario, no training data is generated for that assembly.</span></span>

 <span data-ttu-id="5a8a7-196">Se un assembly nell'elenco è presente nella Global Assembly Cache, non verrà aggiornato con le informazioni sul profilo.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-196">If an assembly in the list is in the global assembly cache, it will not be updated to contain the profile information.</span></span>  <span data-ttu-id="5a8a7-197">Rimuoverlo dalla Global Assembly Cache per raccogliere informazioni sul profilo.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-197">Remove it from the global assembly cache to collect profile information.</span></span>

 <span data-ttu-id="5a8a7-198">L'utilizzo di Ngen.exe e di Mpgo.exe è consigliato solo per le applicazioni gestite di grandi dimensioni, poiché il vantaggio offerto dalle immagini native precompilate è in genere significativo solo quando elimina una quantità notevole di attività di compilazione JIT in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-198">The use of Ngen.exe and Mpgo.exe is recommended only for large managed applications, because the benefit of precompiled native images is typically seen only when it eliminates significant JIT compilation at run time.</span></span> <span data-ttu-id="5a8a7-199">L'esecuzione di Mpgo.exe su applicazioni di tipo "Hello World" che non fanno un uso elevato del working set non offre alcun vantaggio e Mpgo.exe può anche non riuscire a raccogliere i dati di profilo.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-199">Running Mpgo.exe on "Hello World" style applications that aren’t working-set intensive will not provide any benefits, and Mpgo.exe may even fail to gather profile data.</span></span>

> [!NOTE]
> <span data-ttu-id="5a8a7-200">Ngen.exe e Mpgo.exe non sono consigliati per le applicazioni ASP.NET e i servizi Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="5a8a7-200">Ngen.exe and Mpgo.exe are not recommended for ASP.NET applications and Windows Communication Foundation (WCF) services.</span></span>  
  
## <a name="to-use-mpgoexe"></a><span data-ttu-id="5a8a7-201">Per utilizzare Mpgo.exe</span><span class="sxs-lookup"><span data-stu-id="5a8a7-201">To Use Mpgo.exe</span></span>  
  
1. <span data-ttu-id="5a8a7-202">Utilizzare un computer con Visual Studio Ultimate 2012 e l'applicazione installata.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-202">Use a computer that has the Visual Studio Ultimate 2012 and your application installed.</span></span>  
  
2. <span data-ttu-id="5a8a7-203">Eseguire Mpgo.exe come amministratore con i parametri necessari.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-203">Run Mpgo.exe as an administrator with the necessary parameters.</span></span>  <span data-ttu-id="5a8a7-204">Vedere la sezione successiva per alcuni comandi di esempio.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-204">See the next section for sample commands.</span></span>  
  
     <span data-ttu-id="5a8a7-205">Gli assembly Intermediate Language (IL) ottimizzati vengono creati nella cartella specificata dal parametro `–OutDir` (negli esempi si tratta della cartella `C:\Optimized`).</span><span class="sxs-lookup"><span data-stu-id="5a8a7-205">The optimized intermediate language (IL) assemblies are created in the folder specified by the `–OutDir` parameter (in the examples, this is the `C:\Optimized` folder).</span></span>  
  
3. <span data-ttu-id="5a8a7-206">Sostituire gli assembly IL utilizzati per Ngen.exe con i nuovi assembly IL che contengono le informazioni sul profilo dalla directory specificata da `–OutDir`.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-206">Replace the IL assemblies you used for Ngen.exe  with the new IL assemblies that contain the profile information from the directory specified by `–OutDir`.</span></span>  
  
4. <span data-ttu-id="5a8a7-207">Il programma di installazione dell'applicazione (che usa le immagini fornite da Mpgo.exe) installerà le immagini native ottimizzate.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-207">The application setup (using the images provided by Mpgo.exe) will install optimized native images.</span></span>  
  
## <a name="suggested-workflow"></a><span data-ttu-id="5a8a7-208">Flusso di lavoro suggerito</span><span class="sxs-lookup"><span data-stu-id="5a8a7-208">Suggested Workflow</span></span>  
  
1. <span data-ttu-id="5a8a7-209">Creare un set di assembly IL ottimizzati usando Mpgo.exe con il parametro `–Scenario`.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-209">Create a set of optimized IL assemblies by using Mpgo.exe with the `–Scenario` parameter.</span></span>  
  
2. <span data-ttu-id="5a8a7-210">Archiviare gli assembly IL ottimizzati nel controllo del codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-210">Check the optimized IL assemblies into source control.</span></span>  
  
3. <span data-ttu-id="5a8a7-211">Nel processo di compilazione, chiamare Mpgo.exe con il parametro `–Import` come passaggio di post-compilazione per generare immagini IL ottimizzate da passare a Ngen.exe.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-211">In the build process, call Mpgo.exe with the `–Import` parameter as a post-build step to generate optimized IL images to pass to Ngen.exe.</span></span>  
  
 <span data-ttu-id="5a8a7-212">Questo processo assicura che tutti gli assembly abbiano dati di ottimizzazione.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-212">This process ensures that all assemblies have optimization data.</span></span> <span data-ttu-id="5a8a7-213">Se si archiviano assembly ottimizzati aggiornati (passaggi 1 e 2) più spesso, le prestazioni risulteranno più coerenti durante lo sviluppo del prodotto.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-213">If you check in updated optimized assemblies (steps 1 and 2) more frequently, the performance numbers will be more consistent throughout product development.</span></span>  
  
## <a name="using-mpgoexe-from-visual-studio"></a><span data-ttu-id="5a8a7-214">Utilizzo di Mpgo.exe da Visual Studio</span><span class="sxs-lookup"><span data-stu-id="5a8a7-214">Using Mpgo.exe from Visual Studio</span></span>  
 <span data-ttu-id="5a8a7-215">È possibile eseguire Mpgo.exe da Visual Studio (vedere l'articolo [Procedura: Specificare eventi di compilazione (C#)](/visualstudio/ide/how-to-specify-build-events-csharp)) con le restrizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="5a8a7-215">You can run Mpgo.exe from Visual Studio (see the article [How to: Specify Build Events (C#)](/visualstudio/ide/how-to-specify-build-events-csharp)) with the following restrictions:</span></span>  
  
- <span data-ttu-id="5a8a7-216">Non è possibile usare percorsi tra virgolette con la barra finale, perché anche le macro di Visual Studio usano la barra finale per impostazione predefinita</span><span class="sxs-lookup"><span data-stu-id="5a8a7-216">You cannot use quoted paths with trailing slash marks, because Visual Studio macros also use trailing slash marks by default.</span></span> <span data-ttu-id="5a8a7-217">(Ad esempio, `–OutDir "C:\Output Folder\"` non è valido.) Per aggirare questa restrizione, è possibile eseguire l'escape della barra finale.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-217">(For example, `–OutDir "C:\Output Folder\"` is invalid.) To work around this restriction, you can escape the trailing slash.</span></span> <span data-ttu-id="5a8a7-218">Ad esempio, usare invece `-OutDir "$(OutDir)\"`.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-218">(For example, use `-OutDir "$(OutDir)\"` instead.)</span></span>  
  
- <span data-ttu-id="5a8a7-219">Per impostazione predefinita, Mpgo.exe non si trova nel percorso di compilazione di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-219">By default, Mpgo.exe is not on the Visual Studio build path.</span></span> <span data-ttu-id="5a8a7-220">È necessario aggiungere il percorso a Visual Studio o specificare il percorso completo sulla riga di comando di Mpgo.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-220">You must either add the path to Visual Studio or specify the full path on the Mpgo command line.</span></span> <span data-ttu-id="5a8a7-221">È possibile utilizzare il parametro `–Scenario` o `–Import` nell'evento di post-compilazione in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-221">You can use either the `–Scenario` or the `–Import` parameter in the post-build event in Visual Studio.</span></span> <span data-ttu-id="5a8a7-222">Il processo tipico consiste tuttavia nell'usare `–Scenario` richiesto una sola volta al Prompt dei comandi per gli sviluppatori per Visual Studio e quindi usare `–Import` per aggiornare gli assembly ottimizzati dopo ogni compilazione; ad esempio: `"C:\Program Files\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\mpgo.exe" -import "$(OutDir)tmp" -assemblylist "$(TargetPath)" -outdir "$(OutDir)\"`.</span><span class="sxs-lookup"><span data-stu-id="5a8a7-222">However, the typical process is to use `–Scenario` one time from a Developer Command Prompt for Visual Studio, and then use `–Import` to update the optimized assemblies after each build; for example:  `"C:\Program Files\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\mpgo.exe" -import "$(OutDir)tmp" -assemblylist "$(TargetPath)" -outdir "$(OutDir)\"`.</span></span>  
  
<a name="samples"></a>
## <a name="examples"></a><span data-ttu-id="5a8a7-223">Esempi</span><span class="sxs-lookup"><span data-stu-id="5a8a7-223">Examples</span></span>  
 <span data-ttu-id="5a8a7-224">Il seguente comando Mpgo.exe eseguito al Prompt dei comandi per gli sviluppatori per Visual Studio ottimizza un'applicazione fiscale:</span><span class="sxs-lookup"><span data-stu-id="5a8a7-224">The following Mpgo.exe command from a Developer Command Prompt for Visual Studio optimizes a tax application:</span></span>  
  
```console  
mpgo –scenario "C:\MyApp\MyTax.exe /params par" –AssemblyList Mytax.dll MyTaxUtil2011.dll –OutDir C:\Optimized –TimeOut 15  
```  
  
 <span data-ttu-id="5a8a7-225">Il seguente comando Mpgo.exe ottimizza un'applicazione audio:</span><span class="sxs-lookup"><span data-stu-id="5a8a7-225">The following Mpgo.exe command optimizes a sound application:</span></span>  
  
```console  
mpgo –scenario "C:\MyApp\wav2wma.exe –input song1.wav –output song1.wma" –AssemblyList transcode.dll –OutDir C:\Optimized –TimeOut 15  
```  
  
 <span data-ttu-id="5a8a7-226">Il seguente comando Mpgo.exe utilizza i dati degli assembly precedentemente ottimizzati per ottimizzare le versioni più recenti degli assembly:</span><span class="sxs-lookup"><span data-stu-id="5a8a7-226">The following Mpgo.exe command uses data from previously optimized assemblies to optimize newer versions of the assemblies:</span></span>  
  
```console  
mpgo.exe -import "C:\Optimized" -assemblylist "C:\MyApp\MyTax.dll" "C:\MyApp\MyTaxUtil2011.dll" -outdir C:\ReOptimized  
```  
  
## <a name="see-also"></a><span data-ttu-id="5a8a7-227">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="5a8a7-227">See also</span></span>

- [<span data-ttu-id="5a8a7-228">Ngen.exe (generatore di immagini native)</span><span class="sxs-lookup"><span data-stu-id="5a8a7-228">Ngen.exe (Native Image Generator)</span></span>](ngen-exe-native-image-generator.md)
- [<span data-ttu-id="5a8a7-229">Prompt dei comandi</span><span class="sxs-lookup"><span data-stu-id="5a8a7-229">Command Prompts</span></span>](developer-command-prompt-for-vs.md)
- <span data-ttu-id="5a8a7-230">[Improving Launch Performance for your Desktop Applications](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) (Miglioramento delle prestazioni di avvio per le applicazioni desktop)</span><span class="sxs-lookup"><span data-stu-id="5a8a7-230">[Improving Launch Performance for your Desktop Applications](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/)</span></span>
- [<span data-ttu-id="5a8a7-231">Panoramica dei miglioramenti delle prestazioni in .NET 4.5</span><span class="sxs-lookup"><span data-stu-id="5a8a7-231">An Overview of Performance Improvements in .NET 4.5</span></span>](https://docs.microsoft.com/archive/msdn-magazine/2012/april/clr-an-overview-of-performance-improvements-in-net-4-5)
