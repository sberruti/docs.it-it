---
title: Cache PNRP
ms.date: 03/30/2017
ms.assetid: 270068d9-1b6b-4eb9-9e14-e02326bb88df
ms.openlocfilehash: 3ed3e11e702c8933b500421de5654b212cdd80d8
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/15/2020
ms.locfileid: "64622987"
---
# <a name="pnrp-caches"></a><span data-ttu-id="85019-102">Cache PNRP</span><span class="sxs-lookup"><span data-stu-id="85019-102">PNRP Caches</span></span>
<span data-ttu-id="85019-103">Le cache PNRP (Peer Name Resolution Protocol) sono raccolte locali di endpoint peer selezionati tramite algoritmo e mantenuti disponibili nel peer.</span><span class="sxs-lookup"><span data-stu-id="85019-103">Peer Name Resolution Protocol (PNRP) caches are local collections of algorithmically selected peer endpoints maintained on the peer.</span></span>  
  
## <a name="pnrp-cache-initialization"></a><span data-ttu-id="85019-104">Inizializzazione della cache PNRP</span><span class="sxs-lookup"><span data-stu-id="85019-104">PNRP Cache Initialization</span></span>  
 <span data-ttu-id="85019-105">Per inizializzare la cache PNRP, o raccolta di record di nomi di peer, un nodo di peer può usare i metodi seguenti all'avvio:</span><span class="sxs-lookup"><span data-stu-id="85019-105">To initialize the PNRP cache, or Peer Name Record Collection, when a peer node starts up, a node can use the following methods:</span></span>  
  
- <span data-ttu-id="85019-106">Le voci di cache persistenti presenti al momento della chiusura del nodo vengono caricate dallo spazio di archiviazione su disco rigido.</span><span class="sxs-lookup"><span data-stu-id="85019-106">Persistent cache entries that were present when the node was shut down are loaded from hard disk storage.</span></span>  
  
- <span data-ttu-id="85019-107">Se un'applicazione usa l'infrastruttura di collaborazione P2P, le informazioni di collaborazione sono disponibili in Gestione contatto per il nodo.</span><span class="sxs-lookup"><span data-stu-id="85019-107">If an application uses the P2P collaboration infrastructure, collaboration information is available in the Contact Manager for that node.</span></span>  
  
## <a name="scaling-peer-name-resolution-with-a-multi-level-cache"></a><span data-ttu-id="85019-108">Scalabilità della risoluzione dei nomi di peer con una cache multilivello</span><span class="sxs-lookup"><span data-stu-id="85019-108">Scaling Peer Name Resolution with a Multi-Level Cache</span></span>  
 <span data-ttu-id="85019-109">Per limitare le dimensioni delle cache PNRP, i nodi di peer usano una cache multilivello, nella quale ciascun livello contiene un numero massimo di voci.</span><span class="sxs-lookup"><span data-stu-id="85019-109">To keep the sizes of the PNRP caches small, peer nodes use a multi-level cache, in which each level contains a maximum number of entries.</span></span> <span data-ttu-id="85019-110">Ogni livello della cache rappresenta un decimo dello spazio del numero ID PNRP (2<sup>256</sup>).</span><span class="sxs-lookup"><span data-stu-id="85019-110">Each level in the cache represents a one tenth smaller portion of the PNRP ID number space (2<sup>256</sup>).</span></span> <span data-ttu-id="85019-111">Il livello minimo presente nella cache contiene un ID PNRP registrato localmente e altri ID PNRP numericamente vicini.</span><span class="sxs-lookup"><span data-stu-id="85019-111">The lowest level in the cache contains a locally registered PNRP ID and other PNRP IDs that are numerically close to it.</span></span> <span data-ttu-id="85019-112">Quando un livello di cache risulta riempito con il massimo di 20 voci, viene creato un nuovo livello inferiore.</span><span class="sxs-lookup"><span data-stu-id="85019-112">As a level of the cache is filled with a maximum of 20 entries, a new lower level is created.</span></span> <span data-ttu-id="85019-113">Il numero massimo di livelli della cache è nell'ordine di log10(Numero totale di ID PNRP nel cloud).</span><span class="sxs-lookup"><span data-stu-id="85019-113">The maximum number of levels in the cache is on the order of log10(Total number of PNRP IDs in the cloud).</span></span> <span data-ttu-id="85019-114">Ad esempio, per un cloud globale con 100 milioni di ID PNRP, nella cache non vi sono più di 8 (=log10(100.000.000)) livelli e un numero simile di hop per risolvere un ID PNRP durante la risoluzione dei nomi.</span><span class="sxs-lookup"><span data-stu-id="85019-114">For example, for a global cloud with 100 million PNRP IDs, there are no more than 8 (=log10(100,000,000)) levels in the cache and a similar number of hops to resolve a PNRP ID during name resolution.</span></span> <span data-ttu-id="85019-115">Questo meccanismo consente una tabella hash distribuita per la quale un ID PNRP arbitrario può essere risolto inoltrando messaggi di richiesta PNRP al successivo peer più vicino fino al reperimento del peer con il CPA corrispondente.</span><span class="sxs-lookup"><span data-stu-id="85019-115">This mechanism allows for a distributed hash table for which an arbitrary PNRP ID can be resolved by forwarding PNRP Request messages to the next-closest peer until the peer with the corresponding CPA is found.</span></span>  
  
 <span data-ttu-id="85019-116">Per garantire il completamento della risoluzione, ogni volta che un nodo aggiunge una voce al livello più basso della sua cache, invia una copia della stessa a tutti i nodi nell'ultimo livello della cache.</span><span class="sxs-lookup"><span data-stu-id="85019-116">To ensure that resolution can complete, each time a node adds an entry to the lowest level of its cache, it floods a copy of the entry to all the nodes within the last level of the cache.</span></span>  
  
 <span data-ttu-id="85019-117">Le voci della cache vengono aggiornate nel corso del tempo,</span><span class="sxs-lookup"><span data-stu-id="85019-117">The cache entries are refreshed over time.</span></span> <span data-ttu-id="85019-118">mentre quelle non aggiornate vengono rimosse.</span><span class="sxs-lookup"><span data-stu-id="85019-118">Cache entries that are stale are removed from the cache.</span></span> <span data-ttu-id="85019-119">Di conseguenza, la tabella hash distribuita di ID PNRP si basa su endpoint attivi, diversamente da DNS in cui i record di indirizzo e il protocollo DNS non garantiscono che il nodo associato all'indirizzo sia attivamente in rete.</span><span class="sxs-lookup"><span data-stu-id="85019-119">The result is that the distributed hash table of PNRP IDs is based on active endpoints, unlike DNS in which address records and the DNS protocol provide no guarantee that the node associated with the address is actively on the network.</span></span>  
  
## <a name="other-pnrp-caches"></a><span data-ttu-id="85019-120">Altre cache PNRP</span><span class="sxs-lookup"><span data-stu-id="85019-120">Other PNRP Caches</span></span>  
 <span data-ttu-id="85019-121">Un altro archivio dati permanente è la cache locale.</span><span class="sxs-lookup"><span data-stu-id="85019-121">Another persistent data store is the local cache.</span></span>  <span data-ttu-id="85019-122">Oltre agli altri oggetti necessari per l'attività PNRP, esso può includere i record associati a un cloud o una sessione di collaborazione PNRP pubblicata e sincronizzata tra tutti i membri del cloud in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="85019-122">In addition to the other objects needed for PNRP activity, it may include the records associated with a PNRP cloud or collaboration session that is securely published and synchronized between all the members of the cloud.</span></span> <span data-ttu-id="85019-123">Questo archivio replicato rappresenta la visualizzazione dei dati del gruppo, che dovrebbero essere uguali per tutti i membri del gruppo.</span><span class="sxs-lookup"><span data-stu-id="85019-123">This replicated store represents the view of the group data, which should be the same for all group members.</span></span> <span data-ttu-id="85019-124">Tecnicamente, questi oggetti non sono record di per sé, ma piuttosto dati dell'applicazione, di presenza e di oggetti destinati a una cache locale.</span><span class="sxs-lookup"><span data-stu-id="85019-124">Technically, these objects are not records per se, but rather application, presence, and object data destined for a local cache.</span></span> <span data-ttu-id="85019-125">L'uso del cloud PNRP garantisce che gli oggetti vengano propagati a tutti i nodi nella sessione di collaborazione o nel cloud PNRP.</span><span class="sxs-lookup"><span data-stu-id="85019-125">Use of the PNRP cloud ensures that objects are propagated to all nodes in the collaboration session or PNRP cloud.</span></span>  <span data-ttu-id="85019-126">La replica dei record tra i membri del cloud usa SSL per fornire la crittografia e l'integrità dei dati.</span><span class="sxs-lookup"><span data-stu-id="85019-126">Record replication between cloud members uses SSL to provide encryption and data integrity.</span></span>  
  
 <span data-ttu-id="85019-127">Quando un peer viene aggiunto a un cloud, non riceve automaticamente i dati nella cache locale dal peer host a cui si collega, ma deve sottoscrivere il peer host per ricevere gli aggiornamenti nei dati dell'applicazione, di presenza e di oggetti.</span><span class="sxs-lookup"><span data-stu-id="85019-127">When a peer joins a cloud, they do not automatically receive local cache data from the host peer to which they attach; they have to subscribe to the host peer to receive updates in application, presence, and object data.</span></span> <span data-ttu-id="85019-128">Dopo la sincronizzazione iniziale, i peer risincronizzano periodicamente i rispettivi archivi replicati per garantire che tutti i membri del gruppo dispongano in modo coerente della stessa vista.</span><span class="sxs-lookup"><span data-stu-id="85019-128">After the initial synchronization, peers periodically resynchronize their replicated stores to ensure that all group members consistently have the same view.</span></span>  <span data-ttu-id="85019-129">Anche la sessione di collaborazione o le applicazioni all'interno della sessione di collaborazione possono svolgere la stessa funzione.</span><span class="sxs-lookup"><span data-stu-id="85019-129">The collaboration session or applications within the collaboration session may also perform the same function.</span></span>  
  
 <span data-ttu-id="85019-130">Dopo l'avvio di una sessione di collaborazione per un cloud, le applicazioni possono registrare i peer e iniziare a pubblicare le informazioni usando il livello di sicurezza definito dall'ambito del cloud.</span><span class="sxs-lookup"><span data-stu-id="85019-130">After a collaboration session has begun for a cloud, applications can register peers and begin publishing their information using the security defined by the cloud scope.</span></span> <span data-ttu-id="85019-131">Quando un peer viene aggiunto a un cloud, i meccanismi di sicurezza per il cloud vengono applicati al peer, assegnandogli un ambito per la partecipazione.</span><span class="sxs-lookup"><span data-stu-id="85019-131">When a peer joins a cloud, the security mechanisms for the cloud are applied to the peer, giving it a scope in which to participate.</span></span>  <span data-ttu-id="85019-132">I record del peer possono quindi essere pubblicati in modo sicuro all'interno dell'ambito del cloud.</span><span class="sxs-lookup"><span data-stu-id="85019-132">Its records can then be published securely within the scope of the cloud.</span></span> <span data-ttu-id="85019-133">Si noti che l'ambito del cloud potrebbe non essere lo stesso dell'ambito di applicazione della collaborazione.</span><span class="sxs-lookup"><span data-stu-id="85019-133">Note that cloud scope may not be the same as collaboration application scope.</span></span>  
  
 <span data-ttu-id="85019-134">I peer possono registrare l'interesse a ricevere oggetti da altri peer.</span><span class="sxs-lookup"><span data-stu-id="85019-134">Peers can register interest in receiving objects from other peers.</span></span> <span data-ttu-id="85019-135">Quando viene aggiornato un oggetto, l'applicazione di collaborazione riceve una notifica e il nuovo oggetto viene passato a tutti i sottoscrittori dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="85019-135">When an object is updated, the collaboration application is notified and the new object is passed to all subscribers of the application.</span></span> <span data-ttu-id="85019-136">Ad esempio, un peer in un'applicazione di chat di gruppo può registrare l'interesse a ricevere informazioni dell'applicazione, che invierà quindi al peer tutti i record di chat come dati dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="85019-136">For example, a peer in a group chat application can register interest in receiving application information, which will send it all chat records as application data.</span></span>  <span data-ttu-id="85019-137">Ciò consente di monitorare l'attività di chat all'interno del cloud.</span><span class="sxs-lookup"><span data-stu-id="85019-137">This allows it to monitor chat activity within the cloud.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="85019-138">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="85019-138">See also</span></span>

- <xref:System.Net.PeerToPeer>
