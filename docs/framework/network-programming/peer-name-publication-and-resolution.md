---
title: Pubblicazione e risoluzione di nomi di peer
ms.date: 03/30/2017
ms.assetid: f0370e08-9fa6-4ee5-ab78-9a58a20a7da2
ms.openlocfilehash: 4a0787972a61f5700d1e8728be96db8ef9ee749e
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/15/2020
ms.locfileid: "64623195"
---
# <a name="peer-name-publication-and-resolution"></a><span data-ttu-id="85313-102">Pubblicazione e risoluzione di nomi di peer</span><span class="sxs-lookup"><span data-stu-id="85313-102">Peer Name Publication and Resolution</span></span>

## <a name="publishing-a-peer-name"></a><span data-ttu-id="85313-103">Pubblicazione di un nome di peer</span><span class="sxs-lookup"><span data-stu-id="85313-103">Publishing a peer name</span></span>  

 <span data-ttu-id="85313-104">Per pubblicare un nuovo ID PNRP, un peer esegue le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="85313-104">To publish a new PNRP ID, a peer performs the following:</span></span>  
  
- <span data-ttu-id="85313-105">Invia i messaggi di pubblicazione PNRP ai suoi vicini di cache (i peer che hanno registrato ID PNRP nel livello più basso della cache) per inizializzare le rispettive cache.</span><span class="sxs-lookup"><span data-stu-id="85313-105">Sends PNRP publication messages to its cache neighbors (the peers that have registered PNRP IDs in the lowest level of the cache) to seed their caches.</span></span>  
  
- <span data-ttu-id="85313-106">Sceglie casualmente nodi nel cloud che non sono adiacenti e invia loro richieste di risoluzione dei nomi PNRP per il proprio ID P2P.</span><span class="sxs-lookup"><span data-stu-id="85313-106">Chooses random nodes in the cloud that are not its neighbors and sends them PNRP name resolution requests for its own P2P ID.</span></span> <span data-ttu-id="85313-107">Il processo di determinazione dell'endpoint risultante inizializza le cache dei nodi casuali nel cloud con l'ID PNRP del peer di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="85313-107">The resulting endpoint determination process seeds the caches of random nodes in the cloud with the PNRP ID of the publishing peer.</span></span>  
  
<span data-ttu-id="85313-108">I nodi della versione 2 PNRP non pubblicano ID PNRP se stanno solo risolvendo altri ID P2P.</span><span class="sxs-lookup"><span data-stu-id="85313-108">PNRP version 2 nodes do not publish PNRP IDs if they are only resolving other P2P IDs.</span></span> <span data-ttu-id="85313-109">Il valore del Registro di sistema HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PeerNet\PNRP\IPV6-Global\SearchOnly=1 (tipo REG_DWORD) specifica che i peer possono usare PNRP solo per la risoluzione dei nomi e mai per la pubblicazione dei nomi.</span><span class="sxs-lookup"><span data-stu-id="85313-109">The HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PeerNet\PNRP\IPV6-Global\SearchOnly=1 registry value (REG_DWORD type) specifies that peers only use PNRP for name resolution, never for name publication.</span></span> <span data-ttu-id="85313-110">Questo valore del Registro di sistema può essere configurato anche tramite Criteri di gruppo.</span><span class="sxs-lookup"><span data-stu-id="85313-110">This registry value can also be configured through Group Policy.</span></span>  
  
## <a name="resolving-a-peer-name"></a><span data-ttu-id="85313-111">Risoluzione di un nome di peer</span><span class="sxs-lookup"><span data-stu-id="85313-111">Resolving a peer name</span></span>

 <span data-ttu-id="85313-112">L'individuazione di altri peer in una rete o cloud PNRP è un processo costituito da due fasi:</span><span class="sxs-lookup"><span data-stu-id="85313-112">Locating other peers in a PNRP network or cloud is a process comprised of two phases:</span></span>  
  
1. <span data-ttu-id="85313-113">Determinazione dell'endpoint</span><span class="sxs-lookup"><span data-stu-id="85313-113">Endpoint Determination</span></span>  
  
2. <span data-ttu-id="85313-114">Risoluzione dell'ID PNRP</span><span class="sxs-lookup"><span data-stu-id="85313-114">PNRP ID Resolution</span></span>  
  
 <span data-ttu-id="85313-115">Nella fase di determinazione dell'endpoint peer, un peer che sta tentando di risolvere l'ID PNRP di un servizio in un altro computer determina l'indirizzo IPv6 di tale peer remoto.</span><span class="sxs-lookup"><span data-stu-id="85313-115">In the endpoint determination phase, a peer that is attempting to resolve the PNRP ID of a service on another computer determines the IPv6 address of that remote peer.</span></span>  <span data-ttu-id="85313-116">Il peer remoto è quello che ha pubblicato o che è associato all'ID PNRP del computer o del servizio.</span><span class="sxs-lookup"><span data-stu-id="85313-116">The remote peer is the one that published, or is associated with, the PNRP ID of the computer or service.</span></span>  
  
 <span data-ttu-id="85313-117">Dopo avere verificato che l'endpoint remoto sia stato registrato nel cloud PNRP, nella fase di risoluzione dell'ID PNRP il peer richiedente invia una richiesta dell'ID PNRP del servizio desiderato a tale endpoint.</span><span class="sxs-lookup"><span data-stu-id="85313-117">After confirming that the remote endpoint has been registered into the PNRP cloud, the requesting peer in the PNRP ID resolution phase sends a request to that peer endpoint for the PNRP ID of the desired service.</span></span> <span data-ttu-id="85313-118">L'endpoint invia una risposta confermando l'ID PNRP del servizio, un commento e fino a 4 kilobyte di informazioni aggiuntive che il peer richiedente può usare per comunicazioni future.</span><span class="sxs-lookup"><span data-stu-id="85313-118">The endpoint sends a reply confirming the PNRP ID of the service, a comment, and up to 4 kilobytes of additional information that the requesting peer can use for future communication.</span></span> <span data-ttu-id="85313-119">Ad esempio, se l'endpoint desiderato è un server di gioco, i dati dei record dei nomi di peer aggiuntivi possono contenere informazioni sul gioco, il livello e il numero attuale di giocatori.</span><span class="sxs-lookup"><span data-stu-id="85313-119">For example, if the desired endpoint is a gaming server, the additional peer name record data can contain information about the game, the level of play, and the current number of players.</span></span>  
  
 <span data-ttu-id="85313-120">Nella fase di determinazione dell'endpoint, PNRP usa un processo iterativo per individuare il nodo che ha pubblicato l'ID PNRP. Nel processo, il nodo che esegue la risoluzione ha il compito di contattare in successione i nodi più vicini all'ID PNRP di destinazione.</span><span class="sxs-lookup"><span data-stu-id="85313-120">In the endpoint determination phase, PNRP uses an iterative process for locating the node that published the PNRP ID, in which the node performing the resolution is responsible for contacting nodes that are successively closer to the target PNRP ID.</span></span>  
  
 <span data-ttu-id="85313-121">Per eseguire la risoluzione dei nomi in PNRP, il peer esamina le voci nella propria cache per individuare una voce corrispondente all'ID PNRP di destinazione.</span><span class="sxs-lookup"><span data-stu-id="85313-121">To perform name resolution in PNRP, the peer examines the entries in its own cache for an entry that matches the target PNRP ID.</span></span> <span data-ttu-id="85313-122">Se viene trovata, il peer invia un messaggio di richiesta PNRP al peer e attende una risposta.</span><span class="sxs-lookup"><span data-stu-id="85313-122">If found, the peer sends a PNRP Request message to the peer and waits for a response.</span></span> <span data-ttu-id="85313-123">In caso negativo, il peer invia un messaggio di richiesta PNRP al peer che corrisponde alla voce che ha l'ID PNRP che assomiglia di più all'ID PNRP.</span><span class="sxs-lookup"><span data-stu-id="85313-123">If an entry for the PNRP ID is not found, the peer sends a PNRP Request message to the peer that corresponds to the entry that has a PNRP ID that most closely matches the target PNRP ID.</span></span> <span data-ttu-id="85313-124">Il nodo che riceve il messaggio di richiesta PNRP controlla nella sua cache ed esegue le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="85313-124">The node that receives the PNRP Request message examines its own cache and does the following:</span></span>  
  
- <span data-ttu-id="85313-125">Se trova l'ID PNRP, il peer dell'endpoint richiesto risponde direttamente al peer richiedente.</span><span class="sxs-lookup"><span data-stu-id="85313-125">If the PNRP ID is found, the requested endpoint peer replies directly to the requesting peer.</span></span>  
  
- <span data-ttu-id="85313-126">Se l'ID PNRP non viene trovato e un ID PNRP nella cache si avvicina di più all'ID PNRP di destinazione, il peer richiesto invia una risposta al peer richiedente contenente l'indirizzo IPv6 del peer che rappresenta la voce con un ID PNRP più simile all'ID PNRP di destinazione.</span><span class="sxs-lookup"><span data-stu-id="85313-126">If the PNRP ID is not found and a PNRP ID in the cache is closer to the target PNRP ID, the requested peer sends a response to the requesting peer containing the IPv6 address of the peer that represents the entry with a PNRP ID that more closely matches the target PNRP ID.</span></span> <span data-ttu-id="85313-127">Usando l'indirizzo IP nella risposta, il nodo richiedente invia un altro messaggio di richiesta PNRP all'indirizzo IPv6 per rispondere o esaminarne la cache.</span><span class="sxs-lookup"><span data-stu-id="85313-127">Using the IP address in the response, the requesting node sends another PNRP Request message to the IPv6 address to respond or examine its cache.</span></span>  
  
- <span data-ttu-id="85313-128">Se non trova l'ID PNRP e se nella sua cache non è presente alcun ID PNRP più simile a quello di destinazione, il peer che ha ricevuto la richiesta invia al richiedente una risposta con la situazione accertata.</span><span class="sxs-lookup"><span data-stu-id="85313-128">If the PNRP ID is not found and there is no PNRP ID in its cache that is closer to the target PNRP ID, the requested peer sends the requesting peer a response that indicates this condition.</span></span> <span data-ttu-id="85313-129">Il peer richiedente sceglie quindi il secondo ID PNRP più vicino.</span><span class="sxs-lookup"><span data-stu-id="85313-129">The requesting peer then chooses the next-closest PNRP ID.</span></span>  
  
<span data-ttu-id="85313-130">Il peer richiedente continua questo processo con iterazioni successive, fino a individuare il nodo che ha registrato l'ID PNRP.</span><span class="sxs-lookup"><span data-stu-id="85313-130">The requesting peer continues this process with successive iterations, eventually locating the node that registered the PNRP ID.</span></span>  
  
 <span data-ttu-id="85313-131">All'interno dello spazio dei nomi <xref:System.Net.PeerToPeer> esiste una relazione molti-a-molti tra i record <xref:System.Net.PeerToPeer.PeerName> che contengono gli endpoint e i cloud o le reti PNRP in cui comunicano.</span><span class="sxs-lookup"><span data-stu-id="85313-131">Within the <xref:System.Net.PeerToPeer> namespace, there is a many-to-many relationship between the <xref:System.Net.PeerToPeer.PeerName> records that contain endpoints and PNRP clouds or meshes in which they communicate.</span></span> <span data-ttu-id="85313-132">In presenza di voci duplicate o non aggiornate o di più nodi con lo stesso nome di peer, i nodi PNRP possono ottenere informazioni aggiornate usando la classe <xref:System.Net.PeerToPeer.PeerNameResolver>.</span><span class="sxs-lookup"><span data-stu-id="85313-132">When there are duplicate or stale entries, or multiple nodes with the same peer name, PNRP nodes can obtain current information using the <xref:System.Net.PeerToPeer.PeerNameResolver> class.</span></span> <span data-ttu-id="85313-133">I metodi <xref:System.Net.PeerToPeer.PeerNameResolver> usano un singolo nome di peer per semplificare la prospettiva per i record dei nomi uno-a-molti per i peer e uno-a-molti per i cloud.</span><span class="sxs-lookup"><span data-stu-id="85313-133">The <xref:System.Net.PeerToPeer.PeerNameResolver> methods use a single peer name to simplify the perspective to one peer-to-many peer name records and the same one peer to many clouds.</span></span> <span data-ttu-id="85313-134">Il meccanismo è simile all'esecuzione di una query tramite un join su una tabella relazionale.</span><span class="sxs-lookup"><span data-stu-id="85313-134">This is similar to a query performed using a relational-table join.</span></span> <span data-ttu-id="85313-135">Al completamento, l'oggetto Resolver restituisce un <xref:System.Net.PeerToPeer.PeerNameRecordCollection> per il nome di peer specificato.</span><span class="sxs-lookup"><span data-stu-id="85313-135">Upon successful completion, the Resolver object returns a <xref:System.Net.PeerToPeer.PeerNameRecordCollection> for the specified peer name.</span></span>  <span data-ttu-id="85313-136">Ad esempio, un nome di peer comparirebbe in tutti i record di nomi di peer della raccolta, ordinati in base al cloud.</span><span class="sxs-lookup"><span data-stu-id="85313-136">For example, a peer name would occur in all the peer name records in the collection, ordered by cloud.</span></span> <span data-ttu-id="85313-137">Queste sono le istanze del nome di peer i cui dati di supporto potrebbero essere richiesti da un'applicazione basata sul protocollo PNRP.</span><span class="sxs-lookup"><span data-stu-id="85313-137">These are the instances of the peer name whose supporting data may be requested by a PNRP-based application.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="85313-138">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="85313-138">See also</span></span>

- <xref:System.Net.PeerToPeer>
