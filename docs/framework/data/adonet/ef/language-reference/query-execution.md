---
title: Esecuzione di query
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: c0e6cf23-63ac-47dd-bfe9-d5bdca826fac
ms.openlocfilehash: e372744eea3eed7fc3f7ee9c8bbdd711c95b586e
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/12/2020
ms.locfileid: "79149973"
---
# <a name="query-execution"></a><span data-ttu-id="cf527-102">Esecuzione di query</span><span class="sxs-lookup"><span data-stu-id="cf527-102">Query Execution</span></span>
<span data-ttu-id="cf527-103">Dopo essere stata creata da un utente, una query LINQ viene convertita in un albero dei comandi.</span><span class="sxs-lookup"><span data-stu-id="cf527-103">After a LINQ query is created by a user, it is converted to a command tree.</span></span> <span data-ttu-id="cf527-104">Un albero dei comandi è una rappresentazione di una query compatibile con Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="cf527-104">A command tree is a representation of a query that is compatible with the Entity Framework.</span></span> <span data-ttu-id="cf527-105">L'albero dei comandi viene quindi eseguito sull'origine dati.</span><span class="sxs-lookup"><span data-stu-id="cf527-105">The command tree is then executed against the data source.</span></span> <span data-ttu-id="cf527-106">In fase di runtime della query, tutte le espressioni di query, ovvero tutti i componenti della query, vengono valutate, incluse le espressioni usate nella materializzazione del risultato.</span><span class="sxs-lookup"><span data-stu-id="cf527-106">At query execution time, all query expressions (that is, all components of the query) are evaluated, including those expressions that are used in result materialization.</span></span>  
  
 <span data-ttu-id="cf527-107">Il momento di esecuzione delle espressioni di query può variare.</span><span class="sxs-lookup"><span data-stu-id="cf527-107">At what point query expressions are executed can vary.</span></span> <span data-ttu-id="cf527-108">Le query LINQ vengono sempre eseguite quando la variabile di query viene scorsa e non quando viene creata.</span><span class="sxs-lookup"><span data-stu-id="cf527-108">LINQ queries are always executed when the query variable is iterated over, not when the query variable is created.</span></span> <span data-ttu-id="cf527-109">Questa operazione è *denominata esecuzione posticipata*.</span><span class="sxs-lookup"><span data-stu-id="cf527-109">This is called *deferred execution*.</span></span> <span data-ttu-id="cf527-110">È inoltre possibile forzare l'esecuzione immediata di una query. Questa operazione è utile per memorizzare nella cache i risultati della query</span><span class="sxs-lookup"><span data-stu-id="cf527-110">You can also force a query to execute immediately, which is useful for caching query results.</span></span> <span data-ttu-id="cf527-111">e verrà descritta di seguito in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="cf527-111">This is described later in this topic.</span></span>  
  
 <span data-ttu-id="cf527-112">Quando viene eseguita una query LINQ to Entities, è possibile che alcune espressioni nella query vengano eseguite nel server e che alcune parti vengano eseguite localmente nel client.</span><span class="sxs-lookup"><span data-stu-id="cf527-112">When a LINQ to Entities query is executed, some expressions in the query might be executed on the server and some parts might be executed locally on the client.</span></span> <span data-ttu-id="cf527-113">La valutazione sul lato client di un'espressione viene effettuata prima dell'esecuzione della query nel server.</span><span class="sxs-lookup"><span data-stu-id="cf527-113">Client-side evaluation of an expression takes place before the query is executed on the server.</span></span> <span data-ttu-id="cf527-114">Se un'espressione viene valutata nel client, il risultato della valutazione sostituisce l'espressione nella query e la query viene quindi eseguita nel server.</span><span class="sxs-lookup"><span data-stu-id="cf527-114">If an expression is evaluated on the client, the result of that evaluation is substituted for the expression in the query, and the query is then executed on the server.</span></span> <span data-ttu-id="cf527-115">Poiché le query vengono eseguite sull'origine dati, la configurazione dell'origine dati prevale sul comportamento specificato nel client.</span><span class="sxs-lookup"><span data-stu-id="cf527-115">Because queries are executed on the data source, the data source configuration overrides the behavior specified in the client.</span></span> <span data-ttu-id="cf527-116">La gestione dei valori Null e la precisione numerica dipendono ad esempio dalle impostazioni del server.</span><span class="sxs-lookup"><span data-stu-id="cf527-116">For example, null value handling and numerical precision depend on the server settings.</span></span> <span data-ttu-id="cf527-117">Tutte le eccezioni generate durante l'esecuzione della query nel server vengono passate direttamente al client.</span><span class="sxs-lookup"><span data-stu-id="cf527-117">Any exceptions thrown during query execution on the server are passed directly up to the client.</span></span>  

> [!TIP]
> <span data-ttu-id="cf527-118">Per un comodo riepilogo degli operatori di query in formato tabella, che consente di identificare rapidamente il comportamento di esecuzione di un operatore, vedere Classificazione degli operatori di query standard in base a [Manner of Execution (C)](../../../../../csharp/programming-guide/concepts/linq/classification-of-standard-query-operators-by-manner-of-execution.md).</span><span class="sxs-lookup"><span data-stu-id="cf527-118">For a convenient summary of query operators in table format, which lets you quickly identify an operator's execution behavior, see [Classification of Standard Query Operators by Manner of Execution (C#)](../../../../../csharp/programming-guide/concepts/linq/classification-of-standard-query-operators-by-manner-of-execution.md).</span></span>

## <a name="deferred-query-execution"></a><span data-ttu-id="cf527-119">Esecuzione di query posticipata</span><span class="sxs-lookup"><span data-stu-id="cf527-119">Deferred query execution</span></span>  
 <span data-ttu-id="cf527-120">In una query che restituisce una sequenza di valori, la variabile di query stessa non contiene mai i risultati della query ma viene usata solo per l'archiviazione dei comandi della query.</span><span class="sxs-lookup"><span data-stu-id="cf527-120">In a query that returns a sequence of values, the query variable itself never holds the query results and only stores the query commands.</span></span> <span data-ttu-id="cf527-121">L'esecuzione della query viene posticipata finché non viene eseguita un'iterazione della variabile di query in un ciclo `foreach` o `For Each`.</span><span class="sxs-lookup"><span data-stu-id="cf527-121">Execution of the query is deferred until the query variable is iterated over in a `foreach` or `For Each` loop.</span></span> <span data-ttu-id="cf527-122">Questa operazione è nota come *esecuzione posticipata*; ovvero l'esecuzione della query si verifica qualche tempo dopo la costruzione della query.</span><span class="sxs-lookup"><span data-stu-id="cf527-122">This is known as *deferred execution*; that is, query execution occurs some time after the query is constructed.</span></span> <span data-ttu-id="cf527-123">È quindi possibile eseguire una query il numero di volte desiderato.</span><span class="sxs-lookup"><span data-stu-id="cf527-123">This means that you can execute a query as frequently as you want to.</span></span> <span data-ttu-id="cf527-124">Tale caratteristica è utile, ad esempio, quando si dispone di un database che viene aggiornato da altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="cf527-124">This is useful when, for example, you have a database that is being updated by other applications.</span></span> <span data-ttu-id="cf527-125">Nell'applicazione è possibile creare una query per recuperare le informazioni più recenti ed eseguire ripetutamente la query che restituisce ogni volta le informazioni aggiornate.</span><span class="sxs-lookup"><span data-stu-id="cf527-125">In your application, you can create a query to retrieve the latest information and repeatedly execute the query, returning the updated information every time.</span></span>  
  
 <span data-ttu-id="cf527-126">L'esecuzione posticipata consente di combinare più query o di estendere una query.</span><span class="sxs-lookup"><span data-stu-id="cf527-126">Deferred execution enables multiple queries to be combined or a query to be extended.</span></span> <span data-ttu-id="cf527-127">Una query estesa viene modificata in modo da includere nuove operazioni. Le modifiche verranno quindi riflesse nell'eventuale esecuzione.</span><span class="sxs-lookup"><span data-stu-id="cf527-127">When a query is extended, it is modified to include the new operations, and the eventual execution will reflect the changes.</span></span> <span data-ttu-id="cf527-128">Nell'esempio seguente la prima query restituisce tutti i prodotti.</span><span class="sxs-lookup"><span data-stu-id="cf527-128">In the following example, the first query returns all the products.</span></span> <span data-ttu-id="cf527-129">La seconda query estende la prima usando `Where` per restituire tutti i prodotti di taglia "L":</span><span class="sxs-lookup"><span data-stu-id="cf527-129">The second query extends the first by using `Where` to return all the products of size "L":</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#Composing1](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#composing1)]
 [!code-vb[DP L2E Conceptual Examples#Composing1](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#composing1)]  
  
 <span data-ttu-id="cf527-130">Dopo aver eseguito una query, per tutte le query successive vengono usati gli operatori LINQ in memoria.</span><span class="sxs-lookup"><span data-stu-id="cf527-130">After a query has been executed all successive queries will use the in-memory LINQ operators.</span></span> <span data-ttu-id="cf527-131">Se si scorre una variabile di query usando un'istruzione `foreach` o `For Each` o chiamando uno degli operatori di conversione LINQ, la query viene eseguita immediatamente.</span><span class="sxs-lookup"><span data-stu-id="cf527-131">Iterating over the query variable by using a `foreach` or `For Each` statement or by calling one of the LINQ conversion operators will cause immediate execution.</span></span> <span data-ttu-id="cf527-132">Gli operatori di conversione includono <xref:System.Linq.Enumerable.ToList%2A>, <xref:System.Linq.Enumerable.ToArray%2A>, <xref:System.Linq.Enumerable.ToLookup%2A> e <xref:System.Linq.Enumerable.ToDictionary%2A>.</span><span class="sxs-lookup"><span data-stu-id="cf527-132">These conversion operators include the following: <xref:System.Linq.Enumerable.ToList%2A>, <xref:System.Linq.Enumerable.ToArray%2A>, <xref:System.Linq.Enumerable.ToLookup%2A>, and <xref:System.Linq.Enumerable.ToDictionary%2A>.</span></span>  
  
## <a name="immediate-query-execution"></a><span data-ttu-id="cf527-133">Esecuzione di query immediata</span><span class="sxs-lookup"><span data-stu-id="cf527-133">Immediate Query Execution</span></span>  
 <span data-ttu-id="cf527-134">A differenza dell'esecuzione posticipata delle query che restituiscono una sequenza di valori, le query che restituiscono un valore singleton vengono eseguite immediatamente.</span><span class="sxs-lookup"><span data-stu-id="cf527-134">In contrast to the deferred execution of queries that produce a sequence of values, queries that return a singleton value are executed immediately.</span></span> <span data-ttu-id="cf527-135">Alcuni esempi di query singleton sono <xref:System.Linq.Enumerable.Average%2A>, <xref:System.Linq.Enumerable.Count%2A>, <xref:System.Linq.Enumerable.First%2A> e <xref:System.Linq.Enumerable.Max%2A>.</span><span class="sxs-lookup"><span data-stu-id="cf527-135">Some examples of singleton queries are <xref:System.Linq.Enumerable.Average%2A>, <xref:System.Linq.Enumerable.Count%2A>, <xref:System.Linq.Enumerable.First%2A>, and <xref:System.Linq.Enumerable.Max%2A>.</span></span> <span data-ttu-id="cf527-136">Tali query vengono eseguite immediatamente perché la query deve restituire una sequenza per calcolare il risultato singleton.</span><span class="sxs-lookup"><span data-stu-id="cf527-136">These execute immediately because the query must produce a sequence to calculate the singleton result.</span></span> <span data-ttu-id="cf527-137">È anche possibile forzare l'esecuzione immediata.</span><span class="sxs-lookup"><span data-stu-id="cf527-137">You can also force immediate execution.</span></span> <span data-ttu-id="cf527-138">Questa operazione è utile quando si desidera memorizzare nella cache i risultati di una query.</span><span class="sxs-lookup"><span data-stu-id="cf527-138">This is useful when you want to cache the results of a query.</span></span> <span data-ttu-id="cf527-139">Per forzare l'esecuzione immediata di una query che non restituisce un valore singleton, è possibile chiamare il metodo <xref:System.Linq.Enumerable.ToList%2A>, <xref:System.Linq.Enumerable.ToDictionary%2A> o <xref:System.Linq.Enumerable.ToArray%2A> su una query o su una variabile di query.</span><span class="sxs-lookup"><span data-stu-id="cf527-139">To force immediate execution of a query that does not produce a singleton value, you can call the <xref:System.Linq.Enumerable.ToList%2A> method, the <xref:System.Linq.Enumerable.ToDictionary%2A> method, or the <xref:System.Linq.Enumerable.ToArray%2A> method on a query or query variable.</span></span> <span data-ttu-id="cf527-140">Nell'esempio seguente viene usato il metodo <xref:System.Linq.Enumerable.ToArray%2A> per restituire immediatamente una matrice da una sequenza.</span><span class="sxs-lookup"><span data-stu-id="cf527-140">The following example uses the <xref:System.Linq.Enumerable.ToArray%2A> method to immediately evaluate a sequence into an array.</span></span>  
  
 [!code-csharp[DP L2E Examples#ToArray](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Examples/CS/Program.cs#toarray)]
 [!code-vb[DP L2E Examples#ToArray](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Examples/VB/Module1.vb#toarray)]  
  
 <span data-ttu-id="cf527-141">È anche possibile forzare l'esecuzione inserendo il ciclo `foreach` o `For Each` immediatamente dopo l'espressione di query, mentre chiamando <xref:System.Linq.Enumerable.ToList%2A> o <xref:System.Linq.Enumerable.ToArray%2A> si memorizzano nella cache tutti i dati in un singolo oggetto della raccolta.</span><span class="sxs-lookup"><span data-stu-id="cf527-141">You could also force execution by putting the `foreach` or `For Each` loop immediately after the query expression, but by calling <xref:System.Linq.Enumerable.ToList%2A> or <xref:System.Linq.Enumerable.ToArray%2A> you cache all the data in a single collection object.</span></span>  
  
## <a name="store-execution"></a><span data-ttu-id="cf527-142">Esecuzione nell'archivio</span><span class="sxs-lookup"><span data-stu-id="cf527-142">Store Execution</span></span>  
 <span data-ttu-id="cf527-143">Poiché in genere le espressioni in LINQ to Entities vengono valutate nel server, non è previsto che il comportamento dell'espressione sia conforme alla semantica CLR (Common Language Runtime), ma piuttosto a quella dell'origine dati.</span><span class="sxs-lookup"><span data-stu-id="cf527-143">In general, expressions in LINQ to Entities are evaluated on the server, and the behavior of the expression should not be expected to follow common language runtime (CLR) semantics, but those of the data source.</span></span> <span data-ttu-id="cf527-144">Vi sono tuttavia eccezioni, ad esempio quando l'espressione viene eseguita nel client.</span><span class="sxs-lookup"><span data-stu-id="cf527-144">There are exceptions to this, however, such as when the expression is executed on the client.</span></span> <span data-ttu-id="cf527-145">Questo può provocare risultati imprevisti, ad esempio quando il server e il client si trovano in fusi orari diversi.</span><span class="sxs-lookup"><span data-stu-id="cf527-145">This could cause unexpected results, for example when the server and client are in different time zones.</span></span>  
  
 <span data-ttu-id="cf527-146">Alcune espressioni nella query possono venire eseguite nel client.</span><span class="sxs-lookup"><span data-stu-id="cf527-146">Some expressions in the query might be executed on the client.</span></span> <span data-ttu-id="cf527-147">In generale, è previsto che la maggior parte dell'esecuzione della query avvenga nel server.</span><span class="sxs-lookup"><span data-stu-id="cf527-147">In general, most query execution is expected to occur on the server.</span></span> <span data-ttu-id="cf527-148">Oltre ai metodi eseguiti su elementi della query mappati all'origine dati, vi sono spesso espressioni nella query che possono essere eseguite localmente.</span><span class="sxs-lookup"><span data-stu-id="cf527-148">Aside from methods executed against query elements mapped to the data source, there are often expressions in the query that can be executed locally.</span></span> <span data-ttu-id="cf527-149">L'esecuzione locale di un'espressione di query produce un valore che può essere usato nell'esecuzione della query o nella costruzione del risultato.</span><span class="sxs-lookup"><span data-stu-id="cf527-149">Local execution of a query expression yields a value that can be used in the query execution or result construction.</span></span>  
  
 <span data-ttu-id="cf527-150">Determinate operazioni vengono eseguite sempre nel client, ad esempio l'associazione di valori, le sottoespressioni, le sottoquery e la materializzazione di oggetti nei risultati della query.</span><span class="sxs-lookup"><span data-stu-id="cf527-150">Certain operations are always executed on the client, such as binding of values, sub expressions, sub queries from closures, and materialization of objects into query results.</span></span> <span data-ttu-id="cf527-151">Di conseguenza questi elementi, ad esempio i valori dei parametri, non possono essere aggiornati durante l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="cf527-151">The net effect of this is that these elements (for example, parameter values) cannot be updated during the execution.</span></span> <span data-ttu-id="cf527-152">I tipi anonimi possono essere costruiti inline nell'origine dati, ma questo comportamento non deve essere presupposto.</span><span class="sxs-lookup"><span data-stu-id="cf527-152">Anonymous types can be constructed inline on the data source, but should not be assumed to do so.</span></span> <span data-ttu-id="cf527-153">Anche i raggruppamenti inline possono essere costruiti nell'origine dati, ma questo comportamento non deve essere presupposto in ogni istanza.</span><span class="sxs-lookup"><span data-stu-id="cf527-153">Inline groupings can be constructed in the data source, as well, but this should not be assumed in every instance.</span></span> <span data-ttu-id="cf527-154">In generale, è consigliabile non fare presupposizioni relativamente agli elementi che verranno costruiti nel server.</span><span class="sxs-lookup"><span data-stu-id="cf527-154">In general, it is best not to make any assumptions about what is constructed on the server.</span></span>  
  
 <span data-ttu-id="cf527-155">Contenuto della sezione vengono descritti scenari in cui il codice viene eseguito localmente nel client.</span><span class="sxs-lookup"><span data-stu-id="cf527-155">This section describes the scenarios in which code is executed locally on the client.</span></span> <span data-ttu-id="cf527-156">Per altre informazioni sui tipi di espressioni eseguiti localmente, vedere [Espressioni nelle query LINQ to Entities](expressions-in-linq-to-entities-queries.md).</span><span class="sxs-lookup"><span data-stu-id="cf527-156">For more information about which types of expressions are executed locally, see [Expressions in LINQ to Entities Queries](expressions-in-linq-to-entities-queries.md).</span></span>  
  
### <a name="literals-and-parameters"></a><span data-ttu-id="cf527-157">Valori letterali e parametri</span><span class="sxs-lookup"><span data-stu-id="cf527-157">Literals and Parameters</span></span>  
 <span data-ttu-id="cf527-158">Le variabili locali, ad esempio la variabile `orderID` nell'esempio seguente, vengono valutate nel client.</span><span class="sxs-lookup"><span data-stu-id="cf527-158">Local variables, such as the `orderID` variable in the following example, are evaluated on the client.</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#LiteralParameter1](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#literalparameter1)]
 [!code-vb[DP L2E Conceptual Examples#LiteralParameter1](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#literalparameter1)]  
  
 <span data-ttu-id="cf527-159">Anche i parametri dei metodi vengono valutati nel client.</span><span class="sxs-lookup"><span data-stu-id="cf527-159">Method parameters are also evaluated on the client.</span></span> <span data-ttu-id="cf527-160">Un esempio è costituito dal parametro `orderID` passato al metodo `MethodParameterExample`, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="cf527-160">The `orderID` parameter passed into the `MethodParameterExample` method, below, is an example.</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#MethodParameterExample](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#methodparameterexample)]
 [!code-vb[DP L2E Conceptual Examples#MethodParameterExample](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#methodparameterexample)]  
  
### <a name="casting-literals-on-the-client"></a><span data-ttu-id="cf527-161">Esecuzione del cast di valori letterali nel client</span><span class="sxs-lookup"><span data-stu-id="cf527-161">Casting Literals on the Client</span></span>  
 <span data-ttu-id="cf527-162">Il cast da un valore `null` a un tipo CLR viene eseguito nel client:</span><span class="sxs-lookup"><span data-stu-id="cf527-162">Casting from `null` to a CLR type is executed on the client:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#NullCastToString](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#nullcasttostring)]
 [!code-vb[DP L2E Conceptual Examples#NullCastToString](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#nullcasttostring)]  
  
 <span data-ttu-id="cf527-163">Il cast a un tipo, ad esempio un oggetto <xref:System.Decimal> che ammette i valori Null, viene eseguito nel client:</span><span class="sxs-lookup"><span data-stu-id="cf527-163">Casting to a type, such as a nullable <xref:System.Decimal>, is executed on the client:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#CastToNullable](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#casttonullable)]
 [!code-vb[DP L2E Conceptual Examples#CastToNullable](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#casttonullable)]  
  
### <a name="constructors-for-literals"></a><span data-ttu-id="cf527-164">Costruttori per i valori letterali</span><span class="sxs-lookup"><span data-stu-id="cf527-164">Constructors for Literals</span></span>  
 <span data-ttu-id="cf527-165">I nuovi tipi CLR di cui è possibile eseguire il mapping al modello concettuale vengono eseguiti nel client:</span><span class="sxs-lookup"><span data-stu-id="cf527-165">New CLR types that can be mapped to conceptual model types are executed on the client:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#ConstructorForLiteral](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#constructorforliteral)]
 [!code-vb[DP L2E Conceptual Examples#ConstructorForLiteral](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#constructorforliteral)]  
  
 <span data-ttu-id="cf527-166">Anche le nuove matrici vengono eseguite nel client.</span><span class="sxs-lookup"><span data-stu-id="cf527-166">New arrays are also executed on the client.</span></span>  
  
## <a name="store-exceptions"></a><span data-ttu-id="cf527-167">Eccezioni nell'archivio</span><span class="sxs-lookup"><span data-stu-id="cf527-167">Store Exceptions</span></span>  
 <span data-ttu-id="cf527-168">Qualsiasi errore che si verifica nell'archivio durante l'esecuzione della query viene passato al client e non viene mappato o gestito.</span><span class="sxs-lookup"><span data-stu-id="cf527-168">Any store errors that are encountered during query execution are passed up to the client, and are not mapped or handled.</span></span>  
  
## <a name="store-configuration"></a><span data-ttu-id="cf527-169">Configurazione dell'archivio</span><span class="sxs-lookup"><span data-stu-id="cf527-169">Store Configuration</span></span>  
 <span data-ttu-id="cf527-170">Quando la query viene eseguita nell'archivio, la configurazione dell'archivio sostituisce tutti i comportamenti client e la semantica dell'archivio viene espressa per tutte le operazioni e le espressioni.</span><span class="sxs-lookup"><span data-stu-id="cf527-170">When the query executes on the store, the store configuration overrides all client behaviors, and store semantics are expressed for all operations and expressions.</span></span> <span data-ttu-id="cf527-171">Ciò può determinare una differenza nel comportamento tra l'esecuzione nell'archivio e quella conforme a CLR per quanto riguarda aspetti come il confronto di valori Null, l'ordinamento di GUID, la precisione e l'accuratezza di operazioni che includono tipi di dati non precisi, ad esempio tipi a virgola mobile o <xref:System.DateTime>, e le operazioni di stringa.</span><span class="sxs-lookup"><span data-stu-id="cf527-171">This can result in a difference in behavior between CLR and store execution in areas such as null comparisons, GUID ordering, precision and accuracy of operations involving non-precise data types (such as floating point types or <xref:System.DateTime>), and string operations.</span></span> <span data-ttu-id="cf527-172">È importante tenere presente questo aspetto quando si esaminano i risultati della query.</span><span class="sxs-lookup"><span data-stu-id="cf527-172">It is important to keep this in mind when examining query results.</span></span>  
  
 <span data-ttu-id="cf527-173">Di seguito vengono illustrate alcune differenze di comportamento tra CLR e SQL Server:</span><span class="sxs-lookup"><span data-stu-id="cf527-173">For example, the following are some differences in behavior between the CLR and SQL Server:</span></span>  
  
- <span data-ttu-id="cf527-174">In SQL Server i GUID vengono ordinati in modo diverso rispetto a CLR.</span><span class="sxs-lookup"><span data-stu-id="cf527-174">SQL Server orders GUIDs differently than the CLR.</span></span>  
  
- <span data-ttu-id="cf527-175">Possono esserci anche differenze nella precisione del risultato in caso di utilizzo del tipo Decimal in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="cf527-175">There can also be differences in result precision when dealing with the Decimal type on SQL Server.</span></span> <span data-ttu-id="cf527-176">Queste differenze sono dovute ai requisiti fissi di precisione del tipo Decimal in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="cf527-176">This is due to the fixed precision requirements of the SQL Server decimal type.</span></span> <span data-ttu-id="cf527-177">La media dei valori <xref:System.Decimal> 0,0, 0,0 e 1,0 è ad esempio 0,3333333333333333333333333333 nella memoria del client, ma 0,333333 nell'archivio, in base alla precisione predefinita per il tipo Decimal di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="cf527-177">For example, the average of <xref:System.Decimal> values 0.0, 0.0, and 1.0 is 0.3333333333333333333333333333 in memory on the client, but 0.333333 in the store (based on the default precision for SQL Server’s decimal type).</span></span>  
  
- <span data-ttu-id="cf527-178">Anche alcune operazioni di confronto di stringhe vengono gestite in SQL Server in modo diverso rispetto a quanto avviene in CLR.</span><span class="sxs-lookup"><span data-stu-id="cf527-178">Some string comparison operations are also handled differently in SQL Server than in the CLR.</span></span> <span data-ttu-id="cf527-179">Il comportamento del confronto di stringhe dipende dalle impostazioni delle regole di confronto nel server.</span><span class="sxs-lookup"><span data-stu-id="cf527-179">String comparison behavior depends on the collation settings on the server.</span></span>  
  
- <span data-ttu-id="cf527-180">Le chiamate alle funzioni o ai metodi, quando incluse in una query LINQ to Entities, vengono mappate a funzioni canoniche in Entity Framework, che vengono convertite quindi in Transact-SQL ed eseguite nel database di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="cf527-180">Function or method calls, when included in a LINQ to Entities query, are mapped to canonical functions in the Entity Framework, which are then translated to Transact-SQL and executed on the SQL Server database.</span></span> <span data-ttu-id="cf527-181">In alcuni casi il comportamento delle funzioni mappate può differire dall'implementazione nelle librerie di classi di base.</span><span class="sxs-lookup"><span data-stu-id="cf527-181">There are cases when the behavior these mapped functions exhibit might differ from the implementation in the base class libraries.</span></span> <span data-ttu-id="cf527-182">La chiamata ai metodi <xref:System.String.Contains%2A>, <xref:System.String.StartsWith%2A> e <xref:System.String.EndsWith%2A> con una stringa vuota come parametro restituisce ad esempio `true` quando eseguita in CLR, mentre restituisce `false` in caso di esecuzione in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="cf527-182">For example, calling the <xref:System.String.Contains%2A>, <xref:System.String.StartsWith%2A>, and <xref:System.String.EndsWith%2A> methods with an empty string as a parameter will return `true` when executed in the CLR, but will return `false` when executed in SQL Server.</span></span> <span data-ttu-id="cf527-183">Anche il metodo <xref:System.String.EndsWith%2A> può restituire risultati diversi, in quanto due stringhe che differiscono solo per lo spazio vuoto finale vengono considerate uguali in SQL Server ma non in CLR.</span><span class="sxs-lookup"><span data-stu-id="cf527-183">The <xref:System.String.EndsWith%2A> method can also return different results because SQL Server considers two strings to be equal if they only differ in trailing white space, whereas the CLR considers them to be not equal.</span></span> <span data-ttu-id="cf527-184">Questo comportamento è illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="cf527-184">This is illustrated by the following example:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#CanonicalFuncVsCLRBaseType](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#canonicalfuncvsclrbasetype)]
 [!code-vb[DP L2E Conceptual Examples#CanonicalFuncVsCLRBaseType](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#canonicalfuncvsclrbasetype)]
