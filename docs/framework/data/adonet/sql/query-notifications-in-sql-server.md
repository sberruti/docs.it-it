---
title: Notifiche di query in SQL Server
ms.date: 03/30/2017
ms.assetid: 0f0ba1a1-3180-4af8-87f7-c795dc8f8f55
ms.openlocfilehash: 11d9a1a800bea4224853a57b128ca89c9f2cf781
ms.sourcegitcommit: 700ea803fb06c5ce98de017c7f76463ba33ff4a9
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/19/2020
ms.locfileid: "77452370"
---
# <a name="query-notifications-in-sql-server"></a><span data-ttu-id="64f7b-102">Notifiche di query in SQL Server</span><span class="sxs-lookup"><span data-stu-id="64f7b-102">Query Notifications in SQL Server</span></span>
<span data-ttu-id="64f7b-103">Basate sull'infrastruttura Service Broker, le notifiche di query consentono di inviare notifiche alle applicazioni quando i dati vengono modificati.</span><span class="sxs-lookup"><span data-stu-id="64f7b-103">Built upon the Service Broker infrastructure, query notifications allow applications to be notified when data has changed.</span></span> <span data-ttu-id="64f7b-104">Questa funzionalità è particolarmente utile per le applicazioni che forniscono una cache di informazioni da un database, ad esempio un'applicazione Web, e che richiedono una notifica quando i dati di origine vengono modificati.</span><span class="sxs-lookup"><span data-stu-id="64f7b-104">This feature is particularly useful for applications that provide a cache of information from a database, such as a Web application, and need to be notified when the source data is changed.</span></span>  
  
 <span data-ttu-id="64f7b-105">Sono disponibili tre metodi per implementare le notifiche di query usando ADO.NET:</span><span class="sxs-lookup"><span data-stu-id="64f7b-105">There are three ways you can implement query notifications using ADO.NET:</span></span>  
  
1. <span data-ttu-id="64f7b-106">L'implementazione di basso livello è fornita dalla classe `SqlNotificationRequest` che espone la funzionalità sul lato server e consente di eseguire un comando con una richiesta di notifica.</span><span class="sxs-lookup"><span data-stu-id="64f7b-106">The low-level implementation is provided by the `SqlNotificationRequest` class that exposes server-side functionality, enabling you to execute a command with a notification request.</span></span>  
  
2. <span data-ttu-id="64f7b-107">L'implementazione di alto livello è fornita dalla classe `SqlDependency`, che consente un'astrazione di alto livello della funzionalità di notifica tra l'applicazione di origine e SQL Server, permettendo di usare una dipendenza per rilevare le modifiche nel server.</span><span class="sxs-lookup"><span data-stu-id="64f7b-107">The high-level implementation is provided by the `SqlDependency` class, which is a class that provides a high-level abstraction of notification functionality between the source application and SQL Server, enabling you to use a dependency to detect changes in the server.</span></span> <span data-ttu-id="64f7b-108">Nella maggior parte dei casi si tratta del modo più semplice ed efficace per sfruttare la funzionalità di notifica di SQL Server in applicazioni client gestite usando il provider di dati .NET Framework per SQL Server.</span><span class="sxs-lookup"><span data-stu-id="64f7b-108">In most cases, this is the simplest and most effective way to leverage SQL Server notifications capability by managed client applications using the .NET Framework Data Provider for SQL Server.</span></span>  
  
3. <span data-ttu-id="64f7b-109">Nelle applicazioni Web compilate con ASP.NET 2.0 o versione successiva è inoltre possibile usare le classi helper `SqlCacheDependency`.</span><span class="sxs-lookup"><span data-stu-id="64f7b-109">In addition, Web applications built using ASP.NET 2.0 or later can use the `SqlCacheDependency` helper classes.</span></span>  
  
 <span data-ttu-id="64f7b-110">Le notifiche di query vengono usate per applicazioni che richiedono l'aggiornamento delle visualizzazioni o delle cache in seguito a modifiche dei dati sottostanti.</span><span class="sxs-lookup"><span data-stu-id="64f7b-110">Query notifications are used for applications that need to refresh displays or caches in response to changes in underlying data.</span></span> <span data-ttu-id="64f7b-111">Microsoft SQL Server consente ad applicazioni .NET Framework di inviare un comando a SQL Server e di richiedere che venga generata una notifica se l'esecuzione del comando produrrebbe set di risultati diversi da quelli recuperati inizialmente.</span><span class="sxs-lookup"><span data-stu-id="64f7b-111">Microsoft SQL Server allows .NET Framework applications to send a command to SQL Server and request notification if executing the same command would produce result sets different from those initially retrieved.</span></span> <span data-ttu-id="64f7b-112">Le notifiche generate nel server vengono inviate tramite code per l'elaborazione successiva.</span><span class="sxs-lookup"><span data-stu-id="64f7b-112">Notifications generated at the server are sent through queues to be processed later.</span></span>  
  
 <span data-ttu-id="64f7b-113">È possibile impostare le notifiche per le istruzioni SELECT ed EXECUTE.</span><span class="sxs-lookup"><span data-stu-id="64f7b-113">You can set up notifications for SELECT and EXECUTE statements.</span></span> <span data-ttu-id="64f7b-114">Quando si usa un'istruzione EXECUTE, SQL Server registra una notifica per il comando eseguito anziché per l'istruzione EXECUTE stessa.</span><span class="sxs-lookup"><span data-stu-id="64f7b-114">When using an EXECUTE statement, SQL Server registers a notification for the command executed rather than the EXECUTE statement itself.</span></span> <span data-ttu-id="64f7b-115">Il comando deve soddisfare i requisiti e le limitazioni per un'istruzione SELECT.</span><span class="sxs-lookup"><span data-stu-id="64f7b-115">The command must meet the requirements and limitations for a SELECT statement.</span></span> <span data-ttu-id="64f7b-116">Quando un comando che registra una notifica contiene più di un'istruzione, il Motore di database crea una notifica per ogni istruzione inclusa nel batch.</span><span class="sxs-lookup"><span data-stu-id="64f7b-116">When a command that registers a notification contains more than one statement, the Database Engine creates a notification for each statement in the batch.</span></span>  
  
 <span data-ttu-id="64f7b-117">Se si sviluppa un'applicazione in cui sono necessarie notifiche di sottosecondo affidabili in caso di modifica dei dati, vedere le sezioni **pianificazione di una strategia efficiente** per le notifiche delle query e **alternative alle notifiche delle query** nell'articolo [pianificazione di notifiche](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/ms187528(v=sql.105)) .</span><span class="sxs-lookup"><span data-stu-id="64f7b-117">If you are developing an application where you need reliable sub-second notifications when data changes, review the sections **Planning an Efficient Query Notifications Strategy** and **Alternatives to Query Notifications** in the [Planning for Notifications](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/ms187528(v=sql.105)) article.</span></span> <span data-ttu-id="64f7b-118">Per ulteriori informazioni sulle notifiche di query e SQL Server Service Broker, vedere i collegamenti seguenti agli articoli della documentazione di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="64f7b-118">For more information about Query Notifications and SQL Server Service Broker, see the following links to articles in the SQL Server documentation.</span></span>  
  
 <span data-ttu-id="64f7b-119">**Documentazione di SQL Server**</span><span class="sxs-lookup"><span data-stu-id="64f7b-119">**SQL Server documentation**</span></span>  
  
- <span data-ttu-id="64f7b-120">[Uso delle notifiche delle query](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/ms175110(v=sql.105))</span><span class="sxs-lookup"><span data-stu-id="64f7b-120">[Using Query Notifications](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/ms175110(v=sql.105))</span></span>  
  
- <span data-ttu-id="64f7b-121">[Creazione di una query da notificare](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/ms181122(v=sql.105))</span><span class="sxs-lookup"><span data-stu-id="64f7b-121">[Creating a Query for Notification](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/ms181122(v=sql.105))</span></span>  
  
- <span data-ttu-id="64f7b-122">[Sviluppo (Service Broker)](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/bb522889(v=sql.105))</span><span class="sxs-lookup"><span data-stu-id="64f7b-122">[Development (Service Broker)](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/bb522889(v=sql.105))</span></span>  
  
- <span data-ttu-id="64f7b-123">[Centro informazioni per lo sviluppatore di Service Broker](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/ms166100(v=sql.105))</span><span class="sxs-lookup"><span data-stu-id="64f7b-123">[Service Broker Developer InfoCenter](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/ms166100(v=sql.105))</span></span>  
  
- <span data-ttu-id="64f7b-124">[Guida per gli sviluppatori di Service Broker](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/bb522908(v=sql.105))</span><span class="sxs-lookup"><span data-stu-id="64f7b-124">[Developer's Guide (Service Broker)](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/bb522908(v=sql.105))</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="64f7b-125">Contenuto della sezione</span><span class="sxs-lookup"><span data-stu-id="64f7b-125">In This Section</span></span>  
 [<span data-ttu-id="64f7b-126">Abilitazione di notifiche di query</span><span class="sxs-lookup"><span data-stu-id="64f7b-126">Enabling Query Notifications</span></span>](enabling-query-notifications.md)  
 <span data-ttu-id="64f7b-127">Viene descritto come usare le notifiche di query, compresi i requisiti per l'abilitazione e l'uso.</span><span class="sxs-lookup"><span data-stu-id="64f7b-127">Discusses how to use query notifications, including the requirements for enabling and using them.</span></span>  
  
 [<span data-ttu-id="64f7b-128">SqlDependency in un'applicazione ASP.NET</span><span class="sxs-lookup"><span data-stu-id="64f7b-128">SqlDependency in an ASP.NET Application</span></span>](sqldependency-in-an-aspnet-app.md)  
 <span data-ttu-id="64f7b-129">Viene illustrato come usare le notifiche di query da un'applicazione ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="64f7b-129">Demonstrates how to use query notifications from an ASP.NET application.</span></span>  
  
 [<span data-ttu-id="64f7b-130">Rilevamento di modifiche con SqlDependency</span><span class="sxs-lookup"><span data-stu-id="64f7b-130">Detecting Changes with SqlDependency</span></span>](detecting-changes-with-sqldependency.md)  
 <span data-ttu-id="64f7b-131">Viene illustrato come rilevare i casi in cui i risultati delle query saranno diversi da quelli ricevuti in origine.</span><span class="sxs-lookup"><span data-stu-id="64f7b-131">Demonstrates how to detect when query results will be different from those originally received.</span></span>  
  
 [<span data-ttu-id="64f7b-132">Esecuzione di SqlCommand con SqlNotificationRequest</span><span class="sxs-lookup"><span data-stu-id="64f7b-132">SqlCommand Execution with a SqlNotificationRequest</span></span>](sqlcommand-execution-with-a-sqlnotificationrequest.md)  
 <span data-ttu-id="64f7b-133">Viene illustrata la configurazione di un oggetto <xref:System.Data.SqlClient.SqlCommand> da usare con una notifica di query.</span><span class="sxs-lookup"><span data-stu-id="64f7b-133">Demonstrates configuring a <xref:System.Data.SqlClient.SqlCommand> object to work with a query notification.</span></span>  
  
## <a name="reference"></a><span data-ttu-id="64f7b-134">Riferimento</span><span class="sxs-lookup"><span data-stu-id="64f7b-134">Reference</span></span>  
 <xref:System.Data.Sql.SqlNotificationRequest>  
 <span data-ttu-id="64f7b-135">Vengono descritti la classe <xref:System.Data.Sql.SqlNotificationRequest> e tutti i relativi membri.</span><span class="sxs-lookup"><span data-stu-id="64f7b-135">Describes the <xref:System.Data.Sql.SqlNotificationRequest> class and all of its members.</span></span>  
  
 <xref:System.Data.SqlClient.SqlDependency>  
 <span data-ttu-id="64f7b-136">Vengono descritti la classe <xref:System.Data.SqlClient.SqlDependency> e tutti i relativi membri.</span><span class="sxs-lookup"><span data-stu-id="64f7b-136">Describes the <xref:System.Data.SqlClient.SqlDependency> class and all of its members.</span></span>  
  
 <xref:System.Web.Caching.SqlCacheDependency>  
 <span data-ttu-id="64f7b-137">Vengono descritti la classe <xref:System.Web.Caching.SqlCacheDependency> e tutti i relativi membri.</span><span class="sxs-lookup"><span data-stu-id="64f7b-137">Describes the <xref:System.Web.Caching.SqlCacheDependency> class and all of its members.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="64f7b-138">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="64f7b-138">See also</span></span>

- [<span data-ttu-id="64f7b-139">SQL Server e ADO.NET</span><span class="sxs-lookup"><span data-stu-id="64f7b-139">SQL Server and ADO.NET</span></span>](index.md)
- [<span data-ttu-id="64f7b-140">Panoramica di ADO.NET</span><span class="sxs-lookup"><span data-stu-id="64f7b-140">ADO.NET Overview</span></span>](../ado-net-overview.md)
