---
title: Proprietà di dipendenza di sola lettura
ms.date: 03/30/2017
helpviewer_keywords:
- dependency properties [WPF], read-only
- read-only dependency properties [WPF]
ms.assetid: f23d6ec9-3780-4c09-a2ff-b2f0a2deddf1
ms.openlocfilehash: 8adc90182f0f42f52e6ace4e13c68acb3539516b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/12/2020
ms.locfileid: "79187177"
---
# <a name="read-only-dependency-properties"></a><span data-ttu-id="2a6c7-102">Proprietà di dipendenza di sola lettura</span><span class="sxs-lookup"><span data-stu-id="2a6c7-102">Read-Only Dependency Properties</span></span>
<span data-ttu-id="2a6c7-103">Questo argomento descrive le proprietà di dipendenza di sola lettura, incluse le proprietà di dipendenza di sola lettura esistenti e gli scenari e le tecniche per la creazione di una proprietà di dipendenza di sola lettura personalizzata.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-103">This topic describes read-only dependency properties, including existing read-only dependency properties and the scenarios and techniques for creating a custom read-only dependency property.</span></span>  

<a name="prerequisites"></a>
## <a name="prerequisites"></a><span data-ttu-id="2a6c7-104">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="2a6c7-104">Prerequisites</span></span>  
 <span data-ttu-id="2a6c7-105">Nell'argomento si presuppone la conoscenza degli scenari di base dell'implementazione di una proprietà di dipendenza e del modo in cui i metadati vengono applicati a una proprietà di dipendenza personalizzata.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-105">This topic assumes that you understand the basic scenarios of implementing a dependency property, and how metadata is applied to a custom dependency property.</span></span> <span data-ttu-id="2a6c7-106">Per il contesto, vedere [Proprietà di dipendenza personalizzate](custom-dependency-properties.md) e [Metadati delle proprietà di dipendenza](dependency-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="2a6c7-106">See [Custom Dependency Properties](custom-dependency-properties.md) and [Dependency Property Metadata](dependency-property-metadata.md) for context.</span></span>  
  
<a name="existing"></a>
## <a name="existing-read-only-dependency-properties"></a><span data-ttu-id="2a6c7-107">Proprietà di dipendenza di sola lettura esistenti</span><span class="sxs-lookup"><span data-stu-id="2a6c7-107">Existing Read-Only Dependency Properties</span></span>  
 <span data-ttu-id="2a6c7-108">Alcune delle proprietà di dipendenza definite nel framework [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] sono di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-108">Some of the dependency properties defined in the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] framework are read-only.</span></span> <span data-ttu-id="2a6c7-109">La ragione più comune per specificare una proprietà di dipendenza di sola lettura è che si tratta di proprietà che devono essere usate per la determinazione dello stato. Se però lo stato è influenzato da una molteplicità di fattori, la semplice impostazione della proprietà su quello stato non rappresenta la soluzione appropriata nell'ottica della progettazione di un'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-109">The typical reason for specifying a read-only dependency property is that these are properties that should be used for state determination, but where that state is influenced by a multitude of factors, but just setting the property to that state isn't desirable from a user interface design perspective.</span></span> <span data-ttu-id="2a6c7-110">Ad esempio, <xref:System.Windows.UIElement.IsMouseOver%2A> la proprietà è in realtà solo lo stato di superficie come determinato dall'input del mouse.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-110">For example, the property <xref:System.Windows.UIElement.IsMouseOver%2A> is really just surfacing state as determined from the mouse input.</span></span> <span data-ttu-id="2a6c7-111">Ogni tentativo di impostare questo valore a livello di codice aggirando il vero input del mouse sarebbe imprevedibile e potrebbe causare incongruenze.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-111">Any attempt to set this value programmatically by circumventing the true mouse input would be unpredictable and would cause inconsistency.</span></span>  
  
 <span data-ttu-id="2a6c7-112">Dal momento che non possono essere impostate, le proprietà di dipendenza di sola lettura non sono appropriate per molti degli scenari in cui in genere offrono una soluzione (vale a dire: data binding, possibilità di applicare direttamente uno stile a un valore, convalida, animazione, ereditarietà).</span><span class="sxs-lookup"><span data-stu-id="2a6c7-112">By virtue of not being settable, read-only dependency properties aren't appropriate for many of the scenarios for which dependency properties normally offer a solution (namely: data binding, directly stylable to a value, validation, animation, inheritance).</span></span> <span data-ttu-id="2a6c7-113">Nonostante non possano essere impostate, queste proprietà hanno in ogni caso alcune delle funzionalità aggiuntive supportate dalle proprietà di dipendenza nel sistema di proprietà.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-113">Despite not being settable, read-only dependency properties still have some of the additional capabilities supported by dependency properties in the property system.</span></span> <span data-ttu-id="2a6c7-114">La funzionalità più importante consiste nel fatto che la proprietà di dipendenza di sola lettura può essere usata come trigger di proprietà in uno stile.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-114">The most important remaining capability is that the read-only dependency property can still be used as a property trigger in a style.</span></span> <span data-ttu-id="2a6c7-115">Non è possibile abilitare i trigger con una normale proprietà DI Common Language Runtime (CLR); deve essere una proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-115">You can't enable triggers with a normal common language runtime (CLR) property; it needs to be a dependency property.</span></span> <span data-ttu-id="2a6c7-116">La proprietà di <xref:System.Windows.UIElement.IsMouseOver%2A> cui sopra è un esempio perfetto di uno scenario in cui potrebbe essere molto utile definire uno stile per un controllo, in cui alcune proprietà visibili, ad esempio uno sfondo, primo piano o proprietà simili di elementi compositi all'interno del controllo, cambieranno quando l'utente posiziona il mouse su un'area definita del controllo.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-116">The aforementioned <xref:System.Windows.UIElement.IsMouseOver%2A> property is a perfect example of a scenario where it might be quite useful to define a style for a control, where some visible property such as a background, foreground, or similar properties of composited elements within the control will change when the user places a mouse over some defined region of your control.</span></span> <span data-ttu-id="2a6c7-117">Le modifiche a una proprietà di dipendenza di sola lettura possono anche essere rilevate e segnalate dai processi di invalidamento inerenti del sistema di proprietà, che infatti è dotato del supporto interno della funzionalità del trigger di proprietà.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-117">Changes in a read-only dependency property can also be detected and reported by the property system's inherent invalidation processes, and this in fact supports the property trigger functionality internally.</span></span>  
  
<a name="new"></a>
## <a name="creating-custom-read-only-dependency-properties"></a><span data-ttu-id="2a6c7-118">Creazione di proprietà di dipendenza di sola lettura personalizzate</span><span class="sxs-lookup"><span data-stu-id="2a6c7-118">Creating Custom Read-Only Dependency Properties</span></span>  
 <span data-ttu-id="2a6c7-119">Assicurarsi di leggere la sezione precedente sui motivi per cui le proprietà di dipendenza di sola lettura non funzionano per molti scenari comuni di proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-119">Make sure to read the section above regarding why read-only dependency properties won't work for many typical dependency-property scenarios.</span></span> <span data-ttu-id="2a6c7-120">Se tuttavia si ha uno scenario adatto, è possibile creare una proprietà di dipendenza di sola lettura personalizzata.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-120">But if you have an appropriate scenario, you may wish to create your own read-only dependency property.</span></span>  
  
 <span data-ttu-id="2a6c7-121">Gran parte del processo di creazione di una proprietà di dipendenza di sola lettura è identico a quello descritto negli argomenti [Proprietà di dipendenza personalizzate](custom-dependency-properties.md) e [Implementare una proprietà di dipendenza](how-to-implement-a-dependency-property.md).</span><span class="sxs-lookup"><span data-stu-id="2a6c7-121">Much of the process of creating a read-only dependency property is the same as is described in the [Custom Dependency Properties](custom-dependency-properties.md) and [Implement a Dependency Property](how-to-implement-a-dependency-property.md) topics.</span></span> <span data-ttu-id="2a6c7-122">Vi sono tre differenze importanti:</span><span class="sxs-lookup"><span data-stu-id="2a6c7-122">There are three important differences:</span></span>  
  
- <span data-ttu-id="2a6c7-123">Quando si registra la <xref:System.Windows.DependencyProperty.RegisterReadOnly%2A> proprietà, chiamare <xref:System.Windows.DependencyProperty.Register%2A> il metodo anziché il metodo normale per la registrazione della proprietà.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-123">When registering your property, call the <xref:System.Windows.DependencyProperty.RegisterReadOnly%2A> method instead of the normal <xref:System.Windows.DependencyProperty.Register%2A> method for property registration.</span></span>  
  
- <span data-ttu-id="2a6c7-124">Quando si implementa la proprietà "wrapper" CLR, assicurarsi che anche il wrapper non disponga di un'implementazione impostata, in modo che non vi sia alcuna incoerenza nello stato di sola lettura per il wrapper pubblico esposto.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-124">When implementing the CLR "wrapper" property, make sure that the wrapper too doesn't have a set implementation, so that there is no inconsistency in read-only state for the public wrapper you expose.</span></span>  
  
- <span data-ttu-id="2a6c7-125">L'oggetto restituito dalla registrazione di <xref:System.Windows.DependencyPropertyKey> sola <xref:System.Windows.DependencyProperty>lettura è anziché .</span><span class="sxs-lookup"><span data-stu-id="2a6c7-125">The object returned by the read-only registration is <xref:System.Windows.DependencyPropertyKey> rather than <xref:System.Windows.DependencyProperty>.</span></span> <span data-ttu-id="2a6c7-126">Anche se è necessario archiviare il campo come membro, questo in genere non viene reso un membro pubblico del tipo.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-126">You should still store this field as a member but typically you would not make it a public member of the type.</span></span>  
  
 <span data-ttu-id="2a6c7-127">Naturalmente, il valore o campo privato sottostante della proprietà di dipendenza di sola lettura può essere scritto usando qualsiasi logica.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-127">Whatever private field or value you have backing your read-only dependency property can of course be fully writable using whatever logic you decide.</span></span> <span data-ttu-id="2a6c7-128">Tuttavia, il modo più semplice per impostare la proprietà inizialmente o come parte della logica di runtime consiste nell'utilizzare le API del sistema di proprietà, anziché aggirare il sistema di proprietà e impostare direttamente il campo di supporto privato.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-128">However, the most straightforward way to set the property either initially or as part of runtime logic is to use the property system's APIs, rather than circumventing the property system and setting the private backing field directly.</span></span> <span data-ttu-id="2a6c7-129">In particolare, esiste una <xref:System.Windows.DependencyObject.SetValue%2A> firma che accetta <xref:System.Windows.DependencyPropertyKey>un parametro di tipo .</span><span class="sxs-lookup"><span data-stu-id="2a6c7-129">In particular, there is a signature of <xref:System.Windows.DependencyObject.SetValue%2A> that accepts a parameter of type <xref:System.Windows.DependencyPropertyKey>.</span></span> <span data-ttu-id="2a6c7-130">Come e dove si imposta questo valore a livello di codice all'interno della logica dell'applicazione influirà su come si desidera impostare l'accesso su <xref:System.Windows.DependencyPropertyKey> creato quando è stata registrata la proprietà di dipendenza per la prima volta.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-130">How and where you set this value programmatically within your application logic will affect how you may wish to set access on the <xref:System.Windows.DependencyPropertyKey> created when you first registered the dependency property.</span></span> <span data-ttu-id="2a6c7-131">Se si gestisce tutta questa logica all'interno della classe è possibile renderla privata o, se è necessario impostarla da un'altra porzione dell'assembly, è possibile impostarla come interna.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-131">If you handle this logic all within the class you could make it private, or if you require it to be set from other portions of the assembly you might set it internal.</span></span> <span data-ttu-id="2a6c7-132">Un approccio <xref:System.Windows.DependencyObject.SetValue%2A> consiste nel chiamare all'interno di un gestore eventi di classe di un evento rilevante che informa un'istanza della classe che il valore della proprietà archiviata deve essere modificato.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-132">One approach is to call <xref:System.Windows.DependencyObject.SetValue%2A> within a class event handler of a relevant event that informs a class instance that the stored property value needs to be changed.</span></span> <span data-ttu-id="2a6c7-133">Un altro approccio consiste nel unire le <xref:System.Windows.PropertyChangedCallback> <xref:System.Windows.CoerceValueCallback> proprietà di dipendenza usando i callback e associati come parte dei metadati di tali proprietà durante la registrazione.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-133">Another approach is to tie dependency properties together by using paired <xref:System.Windows.PropertyChangedCallback> and <xref:System.Windows.CoerceValueCallback> callbacks as part of those properties' metadata during registration.</span></span>  
  
 <span data-ttu-id="2a6c7-134">Poiché <xref:System.Windows.DependencyPropertyKey> l'oggetto è privato e non viene propagato dal sistema di proprietà all'esterno del codice, una proprietà di dipendenza di sola lettura ha una maggiore sicurezza delle impostazioni rispetto a una proprietà di dipendenza di lettura/scrittura.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-134">Because the <xref:System.Windows.DependencyPropertyKey> is private, and is not propagated by the property system outside of your code, a read-only dependency property does have better setting security than a read-write dependency property.</span></span> <span data-ttu-id="2a6c7-135">Per una proprietà di dipendenza di lettura e scrittura, il campo di identificazione è pubblico in modo esplicito oppure implicito, per cui la proprietà può essere impostata senza alcuna limitazione.</span><span class="sxs-lookup"><span data-stu-id="2a6c7-135">For a read-write dependency property, the identifying field is explicitly or implicitly public and thus the property is widely settable.</span></span> <span data-ttu-id="2a6c7-136">Per informazioni più specifiche, vedere [Sicurezza della proprietà di dipendenza](dependency-property-security.md).</span><span class="sxs-lookup"><span data-stu-id="2a6c7-136">For more specifics, see [Dependency Property Security](dependency-property-security.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2a6c7-137">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="2a6c7-137">See also</span></span>

- [<span data-ttu-id="2a6c7-138">Cenni preliminari sulle proprietà di dipendenza</span><span class="sxs-lookup"><span data-stu-id="2a6c7-138">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="2a6c7-139">Proprietà di dipendenza personalizzate</span><span class="sxs-lookup"><span data-stu-id="2a6c7-139">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="2a6c7-140">Applicazione di stili e modelli</span><span class="sxs-lookup"><span data-stu-id="2a6c7-140">Styling and Templating</span></span>](../../../desktop-wpf/fundamentals/styles-templates-overview.md)
