---
title: TypeConverter e XAML
ms.date: 03/30/2017
helpviewer_keywords:
- XAML [WPF], TypeConverter class
ms.assetid: f6313e4d-e89d-497d-ac87-b43511a1ae4b
ms.openlocfilehash: 6b8b58228e94ed12557e97406e55cc4165753076
ms.sourcegitcommit: 011314e0c8eb4cf4a11d92078f58176c8c3efd2d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/09/2020
ms.locfileid: "77095086"
---
# <a name="typeconverters-and-xaml"></a><span data-ttu-id="b3254-102">TypeConverter e XAML</span><span class="sxs-lookup"><span data-stu-id="b3254-102">TypeConverters and XAML</span></span>
<span data-ttu-id="b3254-103">Questo argomento illustra lo scopo della conversione del tipo string come funzionalità generale del linguaggio XAML.</span><span class="sxs-lookup"><span data-stu-id="b3254-103">This topic introduces the purpose of type conversion from string as a general XAML language feature.</span></span> <span data-ttu-id="b3254-104">Nella .NET Framework la classe <xref:System.ComponentModel.TypeConverter> svolge uno scopo specifico come parte dell'implementazione di una classe personalizzata gestita che può essere usata come valore della proprietà nell'utilizzo degli attributi XAML.</span><span class="sxs-lookup"><span data-stu-id="b3254-104">In the .NET Framework, the <xref:System.ComponentModel.TypeConverter> class serves a particular purpose as part of the implementation for a managed custom class that can be used as a property value in XAML attribute usage.</span></span> <span data-ttu-id="b3254-105">Se si scrive una classe personalizzata e si vuole che le istanze della classe siano utilizzabili come valori di attributo impostabili XAML, potrebbe essere necessario applicare una <xref:System.ComponentModel.TypeConverterAttribute> alla classe, scrivere una classe <xref:System.ComponentModel.TypeConverter> personalizzata o entrambe.</span><span class="sxs-lookup"><span data-stu-id="b3254-105">If you write a custom class, and you want instances of your class to be usable as XAML settable attribute values, you might need to apply a <xref:System.ComponentModel.TypeConverterAttribute> to your class, write a custom <xref:System.ComponentModel.TypeConverter> class, or both.</span></span>  

## <a name="type-conversion-concepts"></a><span data-ttu-id="b3254-106">Concetti relativi alla conversione di tipi</span><span class="sxs-lookup"><span data-stu-id="b3254-106">Type Conversion Concepts</span></span>  
  
### <a name="xaml-and-string-values"></a><span data-ttu-id="b3254-107">Valori XAML e stringa</span><span class="sxs-lookup"><span data-stu-id="b3254-107">XAML and String Values</span></span>  
 <span data-ttu-id="b3254-108">Quando si imposta un valore di attributo in un file XAML, il tipo iniziale di tale valore è una stringa di solo testo.</span><span class="sxs-lookup"><span data-stu-id="b3254-108">When you set an attribute value in a XAML file, the initial type of that value is a string in pure text.</span></span> <span data-ttu-id="b3254-109">Anche altre primitive, ad esempio <xref:System.Double>, sono inizialmente stringhe di testo per un processore XAML.</span><span class="sxs-lookup"><span data-stu-id="b3254-109">Even other primitives such as <xref:System.Double> are initially text strings to a XAML processor.</span></span>  
  
 <span data-ttu-id="b3254-110">Un processore XAML necessita di due informazioni per elaborare un valore di attributo.</span><span class="sxs-lookup"><span data-stu-id="b3254-110">A XAML processor needs two pieces of information in order to process an attribute value.</span></span> <span data-ttu-id="b3254-111">La prima informazione è il tipo di valore della proprietà che si imposta.</span><span class="sxs-lookup"><span data-stu-id="b3254-111">The first piece of information is the value type of the property that is being set.</span></span> <span data-ttu-id="b3254-112">Qualsiasi stringa che definisce un valore di attributo e che viene elaborata in XAML deve essere convertita o risolta in un valore di quel tipo.</span><span class="sxs-lookup"><span data-stu-id="b3254-112">Any string that defines an attribute value and that is processed in XAML must ultimately be converted or resolved to a value of that type.</span></span> <span data-ttu-id="b3254-113">Se il valore è una primitiva riconosciuta dal parser XAML (ad esempio un valore numerico), viene tentata una conversione diretta della stringa.</span><span class="sxs-lookup"><span data-stu-id="b3254-113">If the value is a primitive that is understood by the XAML parser (such as a numeric value), a direct conversion of the string is attempted.</span></span> <span data-ttu-id="b3254-114">Se il valore è un'enumerazione, la stringa viene usata per controllare la corrispondenza di un nome con una costante denominata in tale enumerazione.</span><span class="sxs-lookup"><span data-stu-id="b3254-114">If the value is an enumeration, the string is used to check for a name match to a named constant in that enumeration.</span></span> <span data-ttu-id="b3254-115">Se il valore non è né una primitiva riconosciuta dal parser né un'enumerazione, il tipo in questione deve essere in grado di fornire un'istanza del tipo o un valore basato su una stringa convertita.</span><span class="sxs-lookup"><span data-stu-id="b3254-115">If the value is neither a parser-understood primitive nor an enumeration, then the type in question must be able to provide an instance of the type, or a value, based on a converted string.</span></span> <span data-ttu-id="b3254-116">Ciò è possibile indicando una classe di convertitore di tipi.</span><span class="sxs-lookup"><span data-stu-id="b3254-116">This is done by indicating a type converter class.</span></span> <span data-ttu-id="b3254-117">Il convertitore di tipi è una classe helper che fornisce valori di un'altra classe, sia per gli scenari XAML che, potenzialmente, per le chiamate nel codice .NET.</span><span class="sxs-lookup"><span data-stu-id="b3254-117">The type converter is effectively a helper class for providing values of another class, both for the XAML scenario and also potentially for code calls in .NET code.</span></span>  
  
### <a name="using-existing-type-conversion-behavior-in-xaml"></a><span data-ttu-id="b3254-118">Uso del comportamento di conversione dei tipi esistente in XAML</span><span class="sxs-lookup"><span data-stu-id="b3254-118">Using Existing Type Conversion Behavior in XAML</span></span>  
 <span data-ttu-id="b3254-119">A seconda del livello di conoscenza dei concetti XAML sottostanti, è possibile che si usi già il comportamento di conversione dei tipi nel codice XAML dell'applicazione di base senza rendersene conto.</span><span class="sxs-lookup"><span data-stu-id="b3254-119">Depending on your familiarity with the underlying XAML concepts, you may already be using type conversion behavior in basic application XAML without realizing it.</span></span> <span data-ttu-id="b3254-120">WPF, ad esempio, definisce letteralmente centinaia di proprietà che accettano un valore di tipo <xref:System.Windows.Point>.</span><span class="sxs-lookup"><span data-stu-id="b3254-120">For instance, WPF defines literally hundreds of properties that take a value of type <xref:System.Windows.Point>.</span></span> <span data-ttu-id="b3254-121">Un <xref:System.Windows.Point> è un valore che descrive una coordinata in uno spazio delle coordinate bidimensionale e ha solo due proprietà importanti: <xref:System.Windows.Point.X%2A> e <xref:System.Windows.Point.Y%2A>.</span><span class="sxs-lookup"><span data-stu-id="b3254-121">A <xref:System.Windows.Point> is a value that describes a coordinate in a two-dimensional coordinate space, and it really just has two important properties: <xref:System.Windows.Point.X%2A> and <xref:System.Windows.Point.Y%2A>.</span></span> <span data-ttu-id="b3254-122">Quando si specifica un punto in XAML, lo si specifica come stringa con un delimitatore (in genere una virgola) tra i valori <xref:System.Windows.Point.X%2A> e <xref:System.Windows.Point.Y%2A> forniti.</span><span class="sxs-lookup"><span data-stu-id="b3254-122">When you specify a point in XAML, you specify it as a string with a delimiter (typically a comma) between the <xref:System.Windows.Point.X%2A> and <xref:System.Windows.Point.Y%2A> values you provide.</span></span> <span data-ttu-id="b3254-123">Ad esempio: `<LinearGradientBrush StartPoint="0,0" EndPoint="1,1"/>`.</span><span class="sxs-lookup"><span data-stu-id="b3254-123">For example: `<LinearGradientBrush StartPoint="0,0" EndPoint="1,1"/>`.</span></span>  
  
 <span data-ttu-id="b3254-124">Anche questo tipo semplice di <xref:System.Windows.Point> e il relativo utilizzo semplice in XAML coinvolgono un convertitore di tipi.</span><span class="sxs-lookup"><span data-stu-id="b3254-124">Even this simple type of <xref:System.Windows.Point> and its simple usage in XAML involve a type converter.</span></span> <span data-ttu-id="b3254-125">In questo caso è la classe <xref:System.Windows.PointConverter>.</span><span class="sxs-lookup"><span data-stu-id="b3254-125">In this case that is the class <xref:System.Windows.PointConverter>.</span></span>  
  
 <span data-ttu-id="b3254-126">Il convertitore di tipi per <xref:System.Windows.Point> definito a livello di classe semplifica gli utilizzi di markup di tutte le proprietà che accettano <xref:System.Windows.Point>.</span><span class="sxs-lookup"><span data-stu-id="b3254-126">The type converter for <xref:System.Windows.Point> defined at the class level streamlines the markup usages of all properties that take <xref:System.Windows.Point>.</span></span> <span data-ttu-id="b3254-127">Senza un convertitore di tipi, per l'esempio illustrato in precedenza sarebbe necessario ricorrere al seguente markup molto più dettagliato:</span><span class="sxs-lookup"><span data-stu-id="b3254-127">Without a type converter here, you would need the following much more verbose markup for the same example shown previously:</span></span>  

```xaml
<LinearGradientBrush>
  <LinearGradientBrush.StartPoint>
    <Point X="0" Y="0"/>
  </LinearGradientBrush.StartPoint>
  <LinearGradientBrush.EndPoint>
    <Point X="1" Y="1"/>
  </LinearGradientBrush.EndPoint>
</LinearGradientBrush>
 ```
  
 <span data-ttu-id="b3254-128">La scelta tra l'uso di una stringa di conversione del tipo o di una sintassi equivalente più dettagliata è, in genere, una questione di stile di codifica.</span><span class="sxs-lookup"><span data-stu-id="b3254-128">Whether to use the type conversion string or a more verbose equivalent syntax is generally a coding style choice.</span></span> <span data-ttu-id="b3254-129">Anche il flusso di lavoro degli strumenti XAML può influire sul modo in cui vengono impostati i valori.</span><span class="sxs-lookup"><span data-stu-id="b3254-129">Your XAML tooling workflow might also influence how values are set.</span></span> <span data-ttu-id="b3254-130">Alcuni strumenti XAML tendono a generare la forma più dettagliata del markup perché è più facile eseguire il round trip nelle visualizzazioni delle finestre di progettazione o nel meccanismo di serializzazione.</span><span class="sxs-lookup"><span data-stu-id="b3254-130">Some XAML tools tend to emit the most verbose form of the markup because it is easier to round-trip to designer views or its own serialization mechanism.</span></span>  
  
 <span data-ttu-id="b3254-131">I convertitori di tipi esistenti possono in genere essere individuati in WPF e .NET Framework tipi controllando una classe (o una proprietà) per la presenza di un <xref:System.ComponentModel.TypeConverterAttribute>applicato.</span><span class="sxs-lookup"><span data-stu-id="b3254-131">Existing type converters can generally be discovered on WPF and .NET Framework types by checking a class (or property) for the presence of an applied <xref:System.ComponentModel.TypeConverterAttribute>.</span></span> <span data-ttu-id="b3254-132">Questo attributo assegnerà un nome alla classe che costituisce il convertitore di tipi di supporto per i valori del tipo in questione, sia per gli scenari XAML sia, eventualmente, per altri scopi.</span><span class="sxs-lookup"><span data-stu-id="b3254-132">This attribute will name the class that is the supporting type converter for values of that type, for XAML purposes as well as potentially other purposes.</span></span>  
  
### <a name="type-converters-and-markup-extensions"></a><span data-ttu-id="b3254-133">Convertitori di tipi ed estensioni di markup</span><span class="sxs-lookup"><span data-stu-id="b3254-133">Type Converters and Markup Extensions</span></span>  
 <span data-ttu-id="b3254-134">Le estensioni di markup e i convertitori di tipi rivestono ruoli ortogonali in termini di comportamento del processore XAML e di scenari ai cui sono applicati.</span><span class="sxs-lookup"><span data-stu-id="b3254-134">Markup extensions and type converters fill orthogonal roles in terms of XAML processor behavior and the scenarios that they are applied to.</span></span> <span data-ttu-id="b3254-135">Anche se il contesto è disponibile per gli utilizzi di estensione di markup, il comportamento della conversione di tipi di proprietà in cui un'estensione di markup fornisce un valore in genere non è selezionato nelle implementazioni dell'estensione di markup.</span><span class="sxs-lookup"><span data-stu-id="b3254-135">Although context is available for markup extension usages, type conversion behavior of properties where a markup extension provides a value is generally is not checked in the markup extension implementations.</span></span> <span data-ttu-id="b3254-136">In altre parole, anche se un'estensione di markup restituisce una stringa di testo come output di `ProvideValue`, il comportamento di conversione dei tipi su tale stringa così come applicato a una proprietà o a un tipo di valore della proprietà specifico non viene richiamato. In genere, lo scopo di un'estensione di markup è quello di elaborare una stringa e restituire un oggetto senza coinvolgere alcun convertitore di tipi.</span><span class="sxs-lookup"><span data-stu-id="b3254-136">In other words, even if a markup extension returns a text string as its `ProvideValue` output, type conversion behavior on that string as applied to a specific property or property value type is not invoked, Generally, the purpose of a markup extension is to process a string and return an object without any type converter involved.</span></span>  
  
 <span data-ttu-id="b3254-137">Una situazione comune che richiede un'estensione di markup invece che un convertitore di tipi è il riferimento a un oggetto già esistente.</span><span class="sxs-lookup"><span data-stu-id="b3254-137">One common situation where a markup extension is necessary rather than a type converter is to make a reference to an object that already exists.</span></span> <span data-ttu-id="b3254-138">Nella migliore delle ipotesi, un convertitore di tipi senza stato può solo generare una nuova istanza, che potrebbe non essere il comportamento ottimale.</span><span class="sxs-lookup"><span data-stu-id="b3254-138">At best, a stateless type converter could only generate a new instance, which might not be desirable.</span></span> <span data-ttu-id="b3254-139">Per altre informazioni sulle estensioni di markup, vedere [Estensioni di markup e XAML WPF](markup-extensions-and-wpf-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="b3254-139">For more information on markup extensions, see [Markup Extensions and WPF XAML](markup-extensions-and-wpf-xaml.md).</span></span>  
  
### <a name="native-type-converters"></a><span data-ttu-id="b3254-140">Convertitori di tipi nativi</span><span class="sxs-lookup"><span data-stu-id="b3254-140">Native Type Converters</span></span>  
 <span data-ttu-id="b3254-141">Nell'implementazione WPF e .NET Framework del parser XAML ci sono determinati tipi che prevedono la gestione nativa della conversione del tipo, anche se non si tratta di tipi convenzionalmente considerati primitive.</span><span class="sxs-lookup"><span data-stu-id="b3254-141">In the WPF and .NET Framework implementation of the XAML parser, there are certain types that have native type conversion handling, yet are not types that might conventionally be thought of as primitives.</span></span> <span data-ttu-id="b3254-142">Un esempio dei tipi in questione è <xref:System.DateTime>.</span><span class="sxs-lookup"><span data-stu-id="b3254-142">An example of such a type is <xref:System.DateTime>.</span></span> <span data-ttu-id="b3254-143">Il motivo è basato sul funzionamento dell'architettura .NET Framework: il tipo <xref:System.DateTime> è definito in mscorlib, la libreria più elementare di .NET.</span><span class="sxs-lookup"><span data-stu-id="b3254-143">The reason for this is based on how the .NET Framework architecture works: the type <xref:System.DateTime> is defined in mscorlib, the most basic library in .NET.</span></span> <span data-ttu-id="b3254-144">non è consentito assegnare a <xref:System.DateTime> un attributo che deriva da un altro assembly che introduce una dipendenza (<xref:System.ComponentModel.TypeConverterAttribute> è dal sistema), quindi il consueto meccanismo di individuazione del convertitore di tipi mediante attribuzione non può essere supportato.</span><span class="sxs-lookup"><span data-stu-id="b3254-144"><xref:System.DateTime> is not permitted to be attributed with an attribute that comes from another assembly that introduces a dependency (<xref:System.ComponentModel.TypeConverterAttribute> is from System) so the usual type converter discovery mechanism by attributing cannot be supported.</span></span> <span data-ttu-id="b3254-145">Il parser XAML ha invece di un elenco di tipi che necessitano di tale elaborazione nativa ed elabora questi tipi in modo analogo all'elaborazione delle primitive effettive.</span><span class="sxs-lookup"><span data-stu-id="b3254-145">Instead, the XAML parser has a list of types that need such native processing and processes these similarly to how the true primitives are processed.</span></span> <span data-ttu-id="b3254-146">Nel caso di <xref:System.DateTime> ciò comporta una chiamata al <xref:System.DateTime.Parse%2A>.</span><span class="sxs-lookup"><span data-stu-id="b3254-146">(In the case of <xref:System.DateTime> this involves a call to <xref:System.DateTime.Parse%2A>.)</span></span>  
  
<a name="Implementing_a_Type_Converter"></a>   
## <a name="implementing-a-type-converter"></a><span data-ttu-id="b3254-147">Implementazione di un convertitore di tipi</span><span class="sxs-lookup"><span data-stu-id="b3254-147">Implementing a Type Converter</span></span>  
  
### <a name="typeconverter"></a><span data-ttu-id="b3254-148">TypeConverter</span><span class="sxs-lookup"><span data-stu-id="b3254-148">TypeConverter</span></span>  
 <span data-ttu-id="b3254-149">Nell'esempio <xref:System.Windows.Point> fornito in precedenza, è stata indicata la classe <xref:System.Windows.PointConverter>.</span><span class="sxs-lookup"><span data-stu-id="b3254-149">In the <xref:System.Windows.Point> example given previously, the class <xref:System.Windows.PointConverter> was mentioned.</span></span> <span data-ttu-id="b3254-150">Per le implementazioni di .NET di XAML, tutti i convertitori di tipi usati per XAML sono classi che derivano dalla classe di base <xref:System.ComponentModel.TypeConverter>.</span><span class="sxs-lookup"><span data-stu-id="b3254-150">For .NET implementations of XAML, all type converters that are used for XAML purposes are classes that derive from the base class <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="b3254-151">La classe <xref:System.ComponentModel.TypeConverter> esisteva nelle versioni di .NET Framework che precedono l'esistenza di XAML; uno degli usi originali è stato quello di fornire la conversione di stringa per le finestre di dialogo delle proprietà nelle finestre di progettazione visiva.</span><span class="sxs-lookup"><span data-stu-id="b3254-151">The <xref:System.ComponentModel.TypeConverter> class existed in versions of .NET Framework that precede the existence of XAML; one of its original usages was to provide string conversion for property dialogs in visual designers.</span></span> <span data-ttu-id="b3254-152">Per XAML, il ruolo di <xref:System.ComponentModel.TypeConverter> viene espanso in modo da includere la classe di base per le conversioni da a stringa e da stringa che consentono l'analisi di un valore di attributo stringa ed eventualmente l'elaborazione di un valore di runtime di una particolare proprietà dell'oggetto in una stringa per la serializzazione come attributo.</span><span class="sxs-lookup"><span data-stu-id="b3254-152">For XAML, the role of <xref:System.ComponentModel.TypeConverter> is expanded to include being the base class for to-string and from-string conversions that enable parsing a string attribute value, and possibly processing a run-time value of a particular object property back into a string for serialization as an attribute.</span></span>  
  
 <span data-ttu-id="b3254-153"><xref:System.ComponentModel.TypeConverter> definisce quattro membri rilevanti per la conversione da e verso stringhe per finalità di elaborazione XAML:</span><span class="sxs-lookup"><span data-stu-id="b3254-153"><xref:System.ComponentModel.TypeConverter> defines four members that are relevant for converting to and from strings for XAML processing purposes:</span></span>  
  
- <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>  
  
- <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A>  
  
- <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>  
  
- <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>  
  
 <span data-ttu-id="b3254-154">Di questi, il metodo più importante è <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>.</span><span class="sxs-lookup"><span data-stu-id="b3254-154">Of these, the most important method is <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>.</span></span> <span data-ttu-id="b3254-155">Questo metodo converte la stringa di input nel tipo di oggetto richiesto.</span><span class="sxs-lookup"><span data-stu-id="b3254-155">This method converts the input string to the required object type.</span></span> <span data-ttu-id="b3254-156">In modo rigoroso, è possibile implementare il metodo <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> per convertire una gamma molto più ampia di tipi nel tipo di destinazione designato del convertitore e, di conseguenza, fornire finalità che si estendono oltre XAML, ad esempio il supporto delle conversioni in fase di esecuzione, ma per finalità XAML è solo il percorso del codice che può elaborare un input di <xref:System.String> che è importante.</span><span class="sxs-lookup"><span data-stu-id="b3254-156">Strictly speaking, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> method could be implemented to convert a much wider range of types into the converter's intended destination type, and thus serve purposes that extend beyond XAML such as supporting run-time conversions, but for XAML purposes it is only the code path that can process a <xref:System.String> input that matters.</span></span>  
  
 <span data-ttu-id="b3254-157">Il metodo più importante successivo è <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span><span class="sxs-lookup"><span data-stu-id="b3254-157">The next most important method is <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span></span> <span data-ttu-id="b3254-158">Se un'applicazione viene convertita in una rappresentazione del markup (ad esempio, se viene salvata in XAML come file), <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> è responsabile della produzione di una rappresentazione di markup.</span><span class="sxs-lookup"><span data-stu-id="b3254-158">If an application is converted to a markup representation (for instance, if it is saved to XAML as a file), <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> is responsible for producing a markup representation.</span></span> <span data-ttu-id="b3254-159">In questo caso, il percorso di codice importante per XAML è quando si passa una `destinationType` di <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="b3254-159">In this case, the code path that matters for XAML is when you pass a `destinationType` of <xref:System.String> .</span></span>  
  
 <span data-ttu-id="b3254-160"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> e <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> sono metodi di supporto usati quando un servizio esegue una query sulle funzionalità dell'implementazione di <xref:System.ComponentModel.TypeConverter> .</span><span class="sxs-lookup"><span data-stu-id="b3254-160"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> and <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> are support methods that are used when a service queries the capabilities of the <xref:System.ComponentModel.TypeConverter> implementation.</span></span> <span data-ttu-id="b3254-161">È necessario implementare questi metodi per restituire `true` per i casi specifici del tipo supportati dai metodi di conversione equivalenti del convertitore.</span><span class="sxs-lookup"><span data-stu-id="b3254-161">You must implement these methods to return `true` for type-specific cases that the equivalent conversion methods of your converter support.</span></span> <span data-ttu-id="b3254-162">Per XAML, si tratta in genere del tipo <xref:System.String> .</span><span class="sxs-lookup"><span data-stu-id="b3254-162">For XAML purposes, this generally means the <xref:System.String> type.</span></span>  
  
### <a name="culture-information-and-type-converters-for-xaml"></a><span data-ttu-id="b3254-163">Informazioni relative alle impostazioni cultura e convertitori di tipi per XAML</span><span class="sxs-lookup"><span data-stu-id="b3254-163">Culture Information and Type Converters for XAML</span></span>  

 <span data-ttu-id="b3254-164">Ogni implementazione di <xref:System.ComponentModel.TypeConverter> può avere una propria interpretazione di ciò che costituisce una stringa valida per una conversione e può anche usare o ignorare la descrizione del tipo passata come parametri.</span><span class="sxs-lookup"><span data-stu-id="b3254-164">Each <xref:System.ComponentModel.TypeConverter> implementation can have its own interpretation of what constitutes a valid string for a conversion, and can also use or ignore the type description passed as parameters.</span></span> <span data-ttu-id="b3254-165">C'è un'importante considerazione per quanto riguarda le impostazioni cultura e la conversione di tipi in XAML.</span><span class="sxs-lookup"><span data-stu-id="b3254-165">There is an important consideration with regard to culture and XAML type conversion.</span></span> <span data-ttu-id="b3254-166">L'uso di stringhe localizzabili come valori di attributo è completamente supportato in XAML.</span><span class="sxs-lookup"><span data-stu-id="b3254-166">Using localizable strings as attribute values is entirely supported by XAML.</span></span> <span data-ttu-id="b3254-167">L'uso di una stringa localizzabile come input del convertitore di tipi con requisiti di impostazioni cultura specifici non è però supportato, perché i convertitori di tipi per i valori di attributi XAML implicano un comportamento di analisi basato su un'unica lingua e sulle impostazioni cultura `en-US`.</span><span class="sxs-lookup"><span data-stu-id="b3254-167">But using that localizable string as type converter input with specific culture requirements is not supported, because type converters for XAML attribute values involve a necessarily fixed-language parsing behavior, using `en-US` culture.</span></span> <span data-ttu-id="b3254-168">Per ulteriori informazioni sui motivi di progettazione di questa restrizione, consultare la specifica del linguaggio XAML ([\[MS-XAML\]](https://download.microsoft.com/download/0/A/6/0A6F7755-9AF5-448B-907D-13985ACCF53E/[MS-XAML].pdf).</span><span class="sxs-lookup"><span data-stu-id="b3254-168">For more information on the design reasons for this restriction, you should consult the XAML language specification ([\[MS-XAML\]](https://download.microsoft.com/download/0/A/6/0A6F7755-9AF5-448B-907D-13985ACCF53E/[MS-XAML].pdf).</span></span>  
  
 <span data-ttu-id="b3254-169">Un caso in cui le impostazioni cultura possono rappresentare un problema è ad esempio l'uso, in alcune impostazioni cultura, della virgola come separatore decimale per i numeri.</span><span class="sxs-lookup"><span data-stu-id="b3254-169">As an example where culture can be an issue, some cultures use a comma as their decimal point delimiter for numbers.</span></span> <span data-ttu-id="b3254-170">Tale caratteristica è in conflitto con il comportamento di molti convertitori di tipi XAML di WPF, che usano la virgola come delimitatore (in base a precedenti storici come il formato X,Y comune o gli elenchi delimitati da virgole).</span><span class="sxs-lookup"><span data-stu-id="b3254-170">This will collide with the behavior that many of the WPF XAML type converters have, which is to use a comma as a delimiter (based on historical precedents such as the common X,Y form, or comma delimited lists).</span></span> <span data-ttu-id="b3254-171">Nemmeno il passaggio di impostazioni cultura nel codice XAML adiacente (impostando ad esempio `Language` o `xml:lang` sulle impostazioni cultura `sl-SI` che prevedono l'uso della virgola come separatore decimale) può consentire di risolvere il problema.</span><span class="sxs-lookup"><span data-stu-id="b3254-171">Even passing a culture in the surrounding XAML (setting `Language` or `xml:lang` to the `sl-SI` culture, an example of a culture that uses a comma for decimal in this way) does not solve the issue.</span></span>  
  
### <a name="implementing-convertfrom"></a><span data-ttu-id="b3254-172">Implementazione di ConvertFrom</span><span class="sxs-lookup"><span data-stu-id="b3254-172">Implementing ConvertFrom</span></span>  
 <span data-ttu-id="b3254-173">Per essere utilizzabile come implementazione di <xref:System.ComponentModel.TypeConverter> che supporti XAML, il metodo <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> per il convertitore deve accettare una stringa come parametro `value` .</span><span class="sxs-lookup"><span data-stu-id="b3254-173">To be usable as a <xref:System.ComponentModel.TypeConverter> implementation that supports XAML, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> method for that converter must accept a string as the `value` parameter.</span></span> <span data-ttu-id="b3254-174">Se la stringa ha un formato valido e può essere convertita dall'implementazione di <xref:System.ComponentModel.TypeConverter>, l'oggetto restituito deve supportare un cast nel tipo previsto dalla proprietà.</span><span class="sxs-lookup"><span data-stu-id="b3254-174">If the string was in valid format, and can be converted by the <xref:System.ComponentModel.TypeConverter> implementation, then the returned object must support a cast to the type expected by the property.</span></span> <span data-ttu-id="b3254-175">In caso contrario, l'implementazione <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> deve restituire `null`.</span><span class="sxs-lookup"><span data-stu-id="b3254-175">Otherwise, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementation must return `null`.</span></span>  
  
 <span data-ttu-id="b3254-176">Ogni implementazione di <xref:System.ComponentModel.TypeConverter> può avere una propria interpretazione di ciò che costituisce una stringa valida per una conversione e può anche usare o ignorare la descrizione del tipo o i contesti di impostazioni cultura passati come parametri.</span><span class="sxs-lookup"><span data-stu-id="b3254-176">Each <xref:System.ComponentModel.TypeConverter> implementation can have its own interpretation of what constitutes a valid string for a conversion, and can also use or ignore the type description or culture contexts passed as parameters.</span></span> <span data-ttu-id="b3254-177">L'elaborazione della sintassi XAML di WPF potrebbe tuttavia non passare i valori al contesto della descrizione del tipo in tutti i casi e potrebbe non passare nemmeno le impostazioni cultura basate su `xml:lang`.</span><span class="sxs-lookup"><span data-stu-id="b3254-177">However, the WPF XAML processing might not pass values to the type description context in all cases, and also might not pass culture based on `xml:lang`.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="b3254-178">Non usare i caratteri parentesi graffa, in particolare {, come elemento del formato stringa.</span><span class="sxs-lookup"><span data-stu-id="b3254-178">Do not use the curly brace characters, particularly {, as a possible element of your string format.</span></span> <span data-ttu-id="b3254-179">Questi caratteri vengono usati esclusivamente come punti di ingresso e di uscita di una sequenza di estensione del markup.</span><span class="sxs-lookup"><span data-stu-id="b3254-179">These characters are reserved as the entry and exit for a markup extension sequence.</span></span>  
  
### <a name="implementing-convertto"></a><span data-ttu-id="b3254-180">Implementazione di ConvertTo</span><span class="sxs-lookup"><span data-stu-id="b3254-180">Implementing ConvertTo</span></span>  
 <span data-ttu-id="b3254-181"><xref:System.ComponentModel.TypeConverter.ConvertTo%2A> viene potenzialmente usato per il supporto della serializzazione.</span><span class="sxs-lookup"><span data-stu-id="b3254-181"><xref:System.ComponentModel.TypeConverter.ConvertTo%2A> is potentially used for serialization support.</span></span> <span data-ttu-id="b3254-182">Il supporto della serializzazione tramite <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> per il tipo personalizzato e il relativo convertitore di tipi non è un requisito assoluto.</span><span class="sxs-lookup"><span data-stu-id="b3254-182">Serialization support through <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> for your custom type and its type converter is not an absolute requirement.</span></span> <span data-ttu-id="b3254-183">Tuttavia, se si implementa un controllo o si usa la serializzazione come parte delle funzionalità o della progettazione della classe, sarà necessario implementare <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span><span class="sxs-lookup"><span data-stu-id="b3254-183">However, if you are implementing a control, or using serialization of as part of the features or design of your class, you should implement <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span></span>  
  
 <span data-ttu-id="b3254-184">Per essere utilizzabile come implementazione di <xref:System.ComponentModel.TypeConverter> che supporta XAML, il metodo <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> per tale convertitore deve accettare un'istanza del tipo (o un valore) supportata come parametro `value`.</span><span class="sxs-lookup"><span data-stu-id="b3254-184">To be usable as a <xref:System.ComponentModel.TypeConverter> implementation that supports XAML, the <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> method for that converter must accept an instance of the type (or a value) being supported as the `value` parameter.</span></span> <span data-ttu-id="b3254-185">Quando il `destinationType` parametro è il tipo <xref:System.String>, l'oggetto restituito deve essere in grado di eseguire il cast come <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="b3254-185">When the `destinationType` parameter is the type <xref:System.String>, then the returned object must be able to be cast as <xref:System.String>.</span></span> <span data-ttu-id="b3254-186">La stringa restituita deve rappresentare un valore serializzato di `value`.</span><span class="sxs-lookup"><span data-stu-id="b3254-186">The returned string must represent a serialized value of `value`.</span></span> <span data-ttu-id="b3254-187">Idealmente, il formato di serializzazione scelto deve essere in grado di generare lo stesso valore se tale stringa venisse passata all'implementazione <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> dello stesso convertitore, senza perdite significative di informazioni.</span><span class="sxs-lookup"><span data-stu-id="b3254-187">Ideally, the serialization format you choose should be capable of generating the same value if that string were passed to the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementation of the same converter, without significant loss of information.</span></span>  
  
 <span data-ttu-id="b3254-188">Se il valore non può essere serializzato o il convertitore non supporta la serializzazione, l'implementazione del <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> deve restituire `null`ed è consentito generare un'eccezione in questo caso.</span><span class="sxs-lookup"><span data-stu-id="b3254-188">If the value cannot be serialized, or the converter does not support serialization, the <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> implementation must return `null`, and is permitted to throw an exception in this case.</span></span> <span data-ttu-id="b3254-189">Tuttavia, se si generano eccezioni, è necessario segnalare l'impossibilità di usare tale conversione come parte dell'implementazione di <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> in modo che la procedura consigliata per verificare con <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> prima di evitare le eccezioni sia supportata.</span><span class="sxs-lookup"><span data-stu-id="b3254-189">But if you do throw exceptions, you should report the inability to use that conversion as part of your <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementation so that the best practice of checking with <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> first to avoid exceptions is supported.</span></span>  
  
 <span data-ttu-id="b3254-190">Se `destinationType` parametro non è di tipo <xref:System.String>, è possibile scegliere la gestione del convertitore.</span><span class="sxs-lookup"><span data-stu-id="b3254-190">If `destinationType` parameter is not of type <xref:System.String>, you can choose your own converter handling.</span></span> <span data-ttu-id="b3254-191">In genere, viene ripristinata la gestione dell'implementazione di base, che nel <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> basemost genera un'eccezione specifica.</span><span class="sxs-lookup"><span data-stu-id="b3254-191">Typically, you would revert to base implementation handling, which in the basemost <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> raises a specific exception.</span></span>  
  
### <a name="implementing-canconvertto"></a><span data-ttu-id="b3254-192">Implementazione di CanConvertTo</span><span class="sxs-lookup"><span data-stu-id="b3254-192">Implementing CanConvertTo</span></span>  
 <span data-ttu-id="b3254-193">L'implementazione di <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> deve restituire `true` per un oggetto `destinationType` di tipo <xref:System.String>; in caso contrario, deve rinviare all'implementazione di base.</span><span class="sxs-lookup"><span data-stu-id="b3254-193">Your <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementation should return `true` for `destinationType` of type <xref:System.String>, and otherwise defer to the base implementation.</span></span>  
  
### <a name="implementing-canconvertfrom"></a><span data-ttu-id="b3254-194">Implementazione di CanConvertFrom</span><span class="sxs-lookup"><span data-stu-id="b3254-194">Implementing CanConvertFrom</span></span>  
 <span data-ttu-id="b3254-195">L'implementazione di <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> deve restituire `true` per un oggetto `sourceType` di tipo <xref:System.String>; in caso contrario, deve rinviare all'implementazione di base.</span><span class="sxs-lookup"><span data-stu-id="b3254-195">Your <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> implementation should return `true` for `sourceType` of type <xref:System.String>, and otherwise defer to the base implementation.</span></span>  
  
<a name="Applying_the_TypeConverterAttribute"></a>   
## <a name="applying-the-typeconverterattribute"></a><span data-ttu-id="b3254-196">Applicazione di TypeConverterAttribute</span><span class="sxs-lookup"><span data-stu-id="b3254-196">Applying the TypeConverterAttribute</span></span>  
 <span data-ttu-id="b3254-197">Affinché il convertitore di tipi personalizzato venga usato come convertitore di tipi di azione per una classe personalizzata da un processore XAML, è necessario applicare il <xref:System.ComponentModel.TypeConverterAttribute> alla definizione della classe.</span><span class="sxs-lookup"><span data-stu-id="b3254-197">In order for your custom type converter to be used as the acting type converter for a custom class by a XAML processor, you must apply the <xref:System.ComponentModel.TypeConverterAttribute> to your class definition.</span></span> <span data-ttu-id="b3254-198">L'oggetto <xref:System.ComponentModel.TypeConverterAttribute.ConverterTypeName%2A> specificato tramite l'attributo deve corrispondere al nome di tipo del convertitore dei tipi personalizzato.</span><span class="sxs-lookup"><span data-stu-id="b3254-198">The <xref:System.ComponentModel.TypeConverterAttribute.ConverterTypeName%2A> that you specify through the attribute must be the type name of your custom type converter.</span></span> <span data-ttu-id="b3254-199">Se si applica questo attributo, quando un processore XAML gestisce valori per i quali il tipo di proprietà usa il tipo di classe personalizzato, può usare stringhe di input e restituire istanze di oggetti.</span><span class="sxs-lookup"><span data-stu-id="b3254-199">With this attribute applied, when a XAML processor handles values where the property type uses your custom class type, it can input strings and return object instances.</span></span>  
  
 <span data-ttu-id="b3254-200">Si può anche fornire un convertitore dei tipi per le singole proprietà.</span><span class="sxs-lookup"><span data-stu-id="b3254-200">You can also provide a type converter on a per-property basis.</span></span> <span data-ttu-id="b3254-201">Anziché applicare una <xref:System.ComponentModel.TypeConverterAttribute> alla definizione della classe, applicarla a una definizione di proprietà (la definizione principale, non la `get`/le implementazioni `set` al suo interno).</span><span class="sxs-lookup"><span data-stu-id="b3254-201">Instead of applying a <xref:System.ComponentModel.TypeConverterAttribute> to the class definition, apply it to a property definition (the main definition, not the `get`/`set` implementations within it).</span></span> <span data-ttu-id="b3254-202">Il tipo della proprietà deve corrispondere al tipo elaborato dal convertitore dei tipi personalizzato.</span><span class="sxs-lookup"><span data-stu-id="b3254-202">The type of the property must match the type that is processed by your custom type converter.</span></span> <span data-ttu-id="b3254-203">Se questo attributo viene applicato, quando un processore XAML gestisce i valori di quella proprietà, può elaborare stringhe di input e restituire istanze di oggetti.</span><span class="sxs-lookup"><span data-stu-id="b3254-203">With this attribute applied, when a XAML processor handles values of that property, it can process input strings and return object instances.</span></span> <span data-ttu-id="b3254-204">La tecnica del convertitore dei tipi per proprietà è particolarmente utile se si sceglie di usare un tipo di proprietà da Microsoft .NET Framework o da un'altra libreria in cui non è possibile controllare la definizione della classe e non è possibile applicare un <xref:System.ComponentModel.TypeConverterAttribute>.</span><span class="sxs-lookup"><span data-stu-id="b3254-204">The per-property type converter technique is particularly useful if you choose to use a property type from Microsoft .NET Framework or from some other library where you cannot control the class definition and cannot apply a <xref:System.ComponentModel.TypeConverterAttribute> there.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b3254-205">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="b3254-205">See also</span></span>

- <xref:System.ComponentModel.TypeConverter>
- [<span data-ttu-id="b3254-206">Panoramica di XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="b3254-206">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="b3254-207">Estensioni di markup e XAML WPF</span><span class="sxs-lookup"><span data-stu-id="b3254-207">Markup Extensions and WPF XAML</span></span>](markup-extensions-and-wpf-xaml.md)
- [<span data-ttu-id="b3254-208">Descrizione dettagliata della sintassi XAML</span><span class="sxs-lookup"><span data-stu-id="b3254-208">XAML Syntax In Detail</span></span>](xaml-syntax-in-detail.md)
