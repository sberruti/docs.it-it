---
title: Alberi
ms.date: 03/30/2017
helpviewer_keywords:
- logical tree [WPF]
- element tree [WPF]
- visual tree [WPF]
ms.assetid: e83f25e5-d66b-4fc7-92d2-50130c9a6649
ms.openlocfilehash: d4b17c34fb33f73ca1c173bebc8f94ddac5b1942
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/24/2020
ms.locfileid: "76746573"
---
# <a name="trees-in-wpf"></a><span data-ttu-id="4d2ca-102">Strutture ad albero in WPF</span><span class="sxs-lookup"><span data-stu-id="4d2ca-102">Trees in WPF</span></span>
<span data-ttu-id="4d2ca-103">In molte tecnologie gli elementi e i componenti sono organizzati in una struttura ad albero in cui gli sviluppatori modificano direttamente i nodi degli oggetti nell'albero per influire sul rendering o sul comportamento di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-103">In many technologies, elements and components are organized in a tree structure where developers directly manipulate the object nodes in the tree to affect the rendering or behavior of an application.</span></span> [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="4d2ca-104">usa anche molte metafore correlate alla struttura ad albero per definire le relazioni tra gli elementi del programma.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-104">also uses several tree structure metaphors to define relationships between program elements.</span></span> <span data-ttu-id="4d2ca-105">In genere gli sviluppatori WPF possono creare un'applicazione nel codice o definire parti dell'applicazione in XAML usando come riferimento concettuale la metafora della struttura ad albero di oggetti, ma chiameranno un'API specifica o useranno un markup specifico a tale scopo anziché un'API di modifica della struttura ad albero di oggetti generica simile a quella usata nel modello DOM XML.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-105">For the most part WPF developers can create an application in code or define portions of the application in XAML while thinking conceptually about the object tree metaphor, but will be calling specific API or using specific markup to do so rather than some general object tree manipulation API such as you might use in XML DOM.</span></span> <span data-ttu-id="4d2ca-106">WPF espone due classi helper che forniscono una visualizzazione della metafora dell'albero <xref:System.Windows.LogicalTreeHelper> e <xref:System.Windows.Media.VisualTreeHelper>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-106">WPF exposes two helper classes that provide a tree metaphor view, <xref:System.Windows.LogicalTreeHelper> and <xref:System.Windows.Media.VisualTreeHelper>.</span></span> <span data-ttu-id="4d2ca-107">Nella documentazione di WPF vengono inoltre usati i termini struttura ad albero visuale e albero logico, in quanto tali strutture ad albero sono utili per la comprensione del comportamento di alcune funzionalità chiave di WPF.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-107">The terms visual tree and logical tree are also used in the WPF documentation because these same trees are useful for understanding the behavior of certain key WPF features.</span></span> <span data-ttu-id="4d2ca-108">In questo argomento vengono descritte le caratteristiche della struttura ad albero visuale e dell'albero logico, viene illustrato il modo in cui tali alberi sono correlati a un concetto generale di albero degli oggetti e vengono introdotti <xref:System.Windows.LogicalTreeHelper> e <xref:System.Windows.Media.VisualTreeHelper>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-108">This topic defines what the visual tree and logical tree represent, discusses how such trees relate to an overall object tree concept, and introduces <xref:System.Windows.LogicalTreeHelper> and <xref:System.Windows.Media.VisualTreeHelper>s.</span></span>  

<a name="element_tree"></a>   
## <a name="trees-in-wpf"></a><span data-ttu-id="4d2ca-109">Strutture ad albero in WPF</span><span class="sxs-lookup"><span data-stu-id="4d2ca-109">Trees in WPF</span></span>  
 <span data-ttu-id="4d2ca-110">La struttura ad albero più completa in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] è la struttura ad albero di oggetti.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-110">The most complete tree structure in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is the object tree.</span></span> <span data-ttu-id="4d2ca-111">Se si definisce la pagina di un'applicazione in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] e quindi si carica il codice [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], la struttura ad albero viene creata in base alle relazioni di annidamento degli elementi nel markup.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-111">If you define an application page in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and then load the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], the tree structure is created based on the nesting relationships of the elements in the markup.</span></span> <span data-ttu-id="4d2ca-112">Se si definisce un'applicazione o una parte dell'applicazione nel codice, la struttura ad albero viene creata in base a come si assegnano i valori per le proprietà che implementano il modello di contenuto per un determinato oggetto.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-112">If you define an application or a portion of the application in code, then the tree structure is created based on how you assign property values for properties that implement the content model for a given object.</span></span> <span data-ttu-id="4d2ca-113">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] la struttura ad albero di oggetti completa viene concettualizzata e può essere segnalata alla relativa API pubblica in due modi diversi: come albero logico e come struttura ad albero visuale.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-113">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], there are two ways that the complete object tree is conceptualized and can be reported to its public API: as the logical tree and as the visual tree.</span></span> <span data-ttu-id="4d2ca-114">Le distinzioni tra albero logico e struttura ad albero visuale non sono sempre necessariamente importanti, ma possono talvolta causare problemi con alcuni sottosistemi [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] e influire sulle scelte fatte nel markup o nel codice.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-114">The distinctions between logical tree and visual tree are not always necessarily important, but they can occasionally cause issues with certain [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] subsystems and affect choices you make in markup or code.</span></span>  
  
 <span data-ttu-id="4d2ca-115">Anche se non sempre si modifica direttamente l'albero logico o la struttura ad albero visuale, la corretta comprensione dei concetti correlati all'interazione delle strutture ad albero è utile per comprendere WPF in quanto tecnologia.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-115">Even though you do not always manipulate either the logical tree or the visual tree directly, understanding the concepts of how the trees interact is useful for understanding WPF as a technology.</span></span> <span data-ttu-id="4d2ca-116">Il concetto di WPF come metafora della struttura ad albero è anche essenziale per comprendere il funzionamento dell'ereditarietà delle proprietà e del routing degli eventi in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4d2ca-116">Thinking of WPF as a tree metaphor of some kind is also crucial to understanding how property inheritance and event routing work in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
> [!NOTE]
> <span data-ttu-id="4d2ca-117">Poiché la struttura ad albero di oggetti è più un concetto che un'API effettiva, è possibile pensare a tale concetto anche come a un oggetto grafico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-117">Because the object tree is more of a concept than an actual API, another way to think of the concept is as an object graph.</span></span> <span data-ttu-id="4d2ca-118">In pratica, in fase di esecuzione ci sono relazioni tra gli oggetti per cui la metafora di struttura ad albero non è valida.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-118">In practice, there are relationships between objects at run time where the tree metaphor will break down.</span></span> <span data-ttu-id="4d2ca-119">Ciononostante, in particolare con l'interfaccia utente definita in XAML, la metafora della struttura ad albero è sufficientemente pertinente da far sì che nella maggior parte della documentazione di WPF venga usato il termine struttura ad albero di oggetti per fare riferimento a tale concetto generale.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-119">Nevertheless, particularly with XAML-defined UI, the tree metaphor is relevant enough that most WPF documentation will use the term object tree when referencing this general concept.</span></span>  
  
<a name="logical_tree"></a>   
## <a name="the-logical-tree"></a><span data-ttu-id="4d2ca-120">Albero logico</span><span class="sxs-lookup"><span data-stu-id="4d2ca-120">The Logical Tree</span></span>  
 <span data-ttu-id="4d2ca-121">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] è possibile aggiungere contenuto agli elementi dell'interfaccia utente impostando proprietà degli oggetti di supporto per tali elementi.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-121">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], you add content to UI elements by setting properties of the objects that back those elements.</span></span> <span data-ttu-id="4d2ca-122">Ad esempio, si aggiungono elementi a un controllo <xref:System.Windows.Controls.ListBox> modificando la relativa proprietà <xref:System.Windows.Controls.ItemsControl.Items%2A>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-122">For example, you add items to a <xref:System.Windows.Controls.ListBox> control by manipulating its <xref:System.Windows.Controls.ItemsControl.Items%2A> property.</span></span> <span data-ttu-id="4d2ca-123">Questa operazione consente di inserire elementi nell'<xref:System.Windows.Controls.ItemCollection> che corrisponde al valore della proprietà <xref:System.Windows.Controls.ItemsControl.Items%2A>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-123">By doing this, you are placing items into the <xref:System.Windows.Controls.ItemCollection> that is the <xref:System.Windows.Controls.ItemsControl.Items%2A> property value.</span></span> <span data-ttu-id="4d2ca-124">Analogamente, per aggiungere oggetti a una <xref:System.Windows.Controls.DockPanel>, è possibile modificare il relativo valore della proprietà <xref:System.Windows.Controls.Panel.Children%2A>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-124">Similarly, to add objects to a <xref:System.Windows.Controls.DockPanel>, you manipulate its <xref:System.Windows.Controls.Panel.Children%2A> property value.</span></span> <span data-ttu-id="4d2ca-125">Qui si aggiungono oggetti al <xref:System.Windows.Controls.UIElementCollection>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-125">Here, you are adding objects to the <xref:System.Windows.Controls.UIElementCollection>.</span></span> <span data-ttu-id="4d2ca-126">Per un esempio di codice, vedere [procedura: aggiungere un elemento in modo dinamico](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms752374(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="4d2ca-126">For a code example, see [How to: Add an Element Dynamically](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms752374(v=vs.100)).</span></span>  
  
 <span data-ttu-id="4d2ca-127">In [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)], quando si inseriscono voci di elenco in un <xref:System.Windows.Controls.ListBox> o in controlli o altri elementi dell'interfaccia utente in un <xref:System.Windows.Controls.DockPanel>, si usano anche le proprietà <xref:System.Windows.Controls.ItemsControl.Items%2A> e <xref:System.Windows.Controls.Panel.Children%2A>, in modo esplicito o implicito, come nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-127">In [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)], when you place list items in a <xref:System.Windows.Controls.ListBox> or controls or other UI elements in a <xref:System.Windows.Controls.DockPanel>, you also use the <xref:System.Windows.Controls.ItemsControl.Items%2A> and <xref:System.Windows.Controls.Panel.Children%2A> properties, either explicitly or implicitly, as in the following example.</span></span>  
  
 [!code-xaml[TreeOvwsSupport#AllCode](~/samples/snippets/csharp/VS_Snippets_Wpf/TreeOvwsSupport/CS/page1.xaml#allcode)]  
  
 <span data-ttu-id="4d2ca-128">Se si elaborasse questo codice XAML come XML in un modello DOM (Document Object Model) e fossero stati inclusi tag impostati come commenti impliciti (operazione consentita), la struttura ad albero DOM XML risultante includerebbe elementi per `<ListBox.Items>` e altri elementi impliciti.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-128">If you were to process this XAML as XML under a document object model, and if you had included the tags commented out as implicit (which would have been legal), then the resulting XML DOM tree would have included elements for `<ListBox.Items>` and the other implicit items.</span></span> <span data-ttu-id="4d2ca-129">Poiché tuttavia XAML non elabora in questo modo durante la lettura del markup e la scrittura negli oggetti, l'oggetto grafico risultante non includerà letteralmente `ListBox.Items`.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-129">But XAML does not process that way when you read the markup and write to objects, the resulting object graph does not literally include `ListBox.Items`.</span></span> <span data-ttu-id="4d2ca-130">Dispone tuttavia di una proprietà <xref:System.Windows.Controls.ListBox> denominata `Items` che contiene una <xref:System.Windows.Controls.ItemCollection>e che <xref:System.Windows.Controls.ItemCollection> viene inizializzata ma vuota quando viene elaborato il <xref:System.Windows.Controls.ListBox> XAML.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-130">It does however have a <xref:System.Windows.Controls.ListBox> property named `Items` that contains a <xref:System.Windows.Controls.ItemCollection>, and that <xref:System.Windows.Controls.ItemCollection> is initialized but empty when the <xref:System.Windows.Controls.ListBox> XAML is processed.</span></span> <span data-ttu-id="4d2ca-131">Quindi, ogni elemento oggetto figlio esistente come contenuto per il <xref:System.Windows.Controls.ListBox> viene aggiunto al <xref:System.Windows.Controls.ItemCollection> dalle chiamate del parser per `ItemCollection.Add`.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-131">Then, each child object element that exists as content for the <xref:System.Windows.Controls.ListBox> is added to the <xref:System.Windows.Controls.ItemCollection> by parser calls to `ItemCollection.Add`.</span></span> <span data-ttu-id="4d2ca-132">Fino a questo punto, in questo esempio di elaborazione di XAML in una struttura ad albero di oggetti la struttura ad albero di oggetti creata sembra fondamentalmente essere un albero logico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-132">This example of processing XAML into an object tree is so far seemingly an example where the created object tree is basically the logical tree.</span></span>  
  
 <span data-ttu-id="4d2ca-133">Tuttavia, l'albero logico non è l'intero oggetto grafico esistente per l'interfaccia utente dell'applicazione in fase di esecuzione, anche in caso di factoring degli elementi della sintassi implicita XAML. Il motivo principale è che sono gli oggetti visivi e i modelli.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-133">However, the logical tree is not the entire object graph that exists for your application UI at run time, even with the XAML implicit syntax items factored out. The main reason for this is visuals and templates.</span></span> <span data-ttu-id="4d2ca-134">Si consideri, ad esempio, il <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-134">For example, consider the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="4d2ca-135">L'albero logico segnala l'oggetto <xref:System.Windows.Controls.Button> e anche la relativa stringa `Content`.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-135">The logical tree reports the <xref:System.Windows.Controls.Button> object and also its string `Content`.</span></span> <span data-ttu-id="4d2ca-136">Nella struttura ad albero di oggetti di runtime, tuttavia, questo pulsante è molto più complesso.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-136">But there is more to this button in the run-time object tree.</span></span> <span data-ttu-id="4d2ca-137">In particolare, il pulsante viene visualizzato sullo schermo nel modo in cui è stato applicato un modello di controllo <xref:System.Windows.Controls.Button> specifico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-137">In particular, the button only appears on screen the way it does because a specific <xref:System.Windows.Controls.Button> control template was applied.</span></span> <span data-ttu-id="4d2ca-138">Gli oggetti visivi provenienti da un modello applicato, ad esempio il <xref:System.Windows.Controls.Border> definito dal modello di grigio scuro intorno al pulsante visivo, non vengono segnalati nell'albero logico, anche se si sta osservando l'albero logico in fase di esecuzione, ad esempio gestendo un evento di input dall'interfaccia utente visibile e quindi leggendo l'albero logico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-138">The visuals that come from an applied template (such as the template-defined <xref:System.Windows.Controls.Border> of dark gray around the visual button) are not reported in the logical tree, even if you are looking at the logical tree during run time (such as handling an input event from the visible UI and then reading the logical tree).</span></span> <span data-ttu-id="4d2ca-139">Per trovare gli oggetti visivi del modello, è invece necessario esaminare la struttura ad albero visuale.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-139">To find the template visuals, you would instead need to examine the visual tree.</span></span>  
  
 <span data-ttu-id="4d2ca-140">Per altre informazioni sul mapping tra la sintassi [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] e l'oggetto grafico creato e sulla sintassi implicita in XAML, vedere [Descrizione dettagliata della sintassi XAML](xaml-syntax-in-detail.md) o [Cenni preliminari su XAML (WPF)](xaml-overview-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="4d2ca-140">For more information about how [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] syntax maps to the created object graph, and implicit syntax in XAML, see [XAML Syntax In Detail](xaml-syntax-in-detail.md) or [XAML Overview (WPF)](xaml-overview-wpf.md).</span></span>  
  
<a name="tree_property_inheritance_event_routing"></a>   
### <a name="the-purpose-of-the-logical-tree"></a><span data-ttu-id="4d2ca-141">Scopo dell'albero logico</span><span class="sxs-lookup"><span data-stu-id="4d2ca-141">The Purpose of the Logical Tree</span></span>  
 <span data-ttu-id="4d2ca-142">L'albero logico consente ai modelli di contenuto di scorrere rapidamente i relativi oggetti figlio possibili e rende i modelli di contenuto estendibili.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-142">The logical tree exists so that content models can readily iterate over their possible child objects, and so that content models can be extensible.</span></span> <span data-ttu-id="4d2ca-143">L'albero logico fornisce inoltre un framework per determinate notifiche, ad esempio relative al caricamento di tutti gli oggetti nell'albero logico stesso.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-143">Also, the logical tree provides a framework for certain notifications, such as when all objects in the logical tree are loaded.</span></span> <span data-ttu-id="4d2ca-144">Fondamentalmente l'albero logico è un'approssimazione di un oggetto grafico di runtime a livello di framework, che esclude gli oggetti visivi, ma è efficace per molte operazioni di query sulla composizione dell'applicazione di runtime.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-144">Basically, the logical tree is an approximation of a run time object graph at the framework level, which excludes visuals, but is adequate for many querying operations against your own run time application's composition.</span></span>  
  
 <span data-ttu-id="4d2ca-145">Inoltre, i riferimenti a risorse statiche e dinamiche vengono risolti osservando verso l'alto l'albero logico per le raccolte di <xref:System.Windows.FrameworkElement.Resources%2A> nell'oggetto richiedente iniziale, quindi proseguendo l'albero logico e controllando ogni <xref:System.Windows.FrameworkElement> (o <xref:System.Windows.FrameworkContentElement>) per un altro valore `Resources` contenente un <xref:System.Windows.ResourceDictionary>, possibilmente contenente tale chiave.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-145">In addition, both static and dynamic resource references are resolved by looking upwards through the logical tree for <xref:System.Windows.FrameworkElement.Resources%2A> collections on the initial requesting object, and then continuing up the logical tree and checking each <xref:System.Windows.FrameworkElement> (or <xref:System.Windows.FrameworkContentElement>) for another `Resources` value that contains a <xref:System.Windows.ResourceDictionary>, possibly containing that key.</span></span> <span data-ttu-id="4d2ca-146">L'albero logico viene usato per la ricerca delle risorse, quando sono presenti sia l'albero logico, sia la struttura ad albero visuale.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-146">The logical tree is used for resource lookup when both the logical tree and the visual tree are present.</span></span> <span data-ttu-id="4d2ca-147">Per altre informazioni sui dizionari risorse e sulla ricerca, vedere [Risorse XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="4d2ca-147">For more information on resource dictionaries and lookup, see [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span></span>  
  
<a name="composition"></a>   
### <a name="composition-of-the-logical-tree"></a><span data-ttu-id="4d2ca-148">Composizione dell'albero logico</span><span class="sxs-lookup"><span data-stu-id="4d2ca-148">Composition of the Logical Tree</span></span>  
 <span data-ttu-id="4d2ca-149">L'albero logico viene definito a livello di Framework WPF, il che significa che l'elemento di base WPF più rilevante per le operazioni di albero logico è <xref:System.Windows.FrameworkElement> o <xref:System.Windows.FrameworkContentElement>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-149">The logical tree is defined at the WPF framework-level, which means that the WPF base element that is most relevant for logical tree operations is either <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="4d2ca-150">Tuttavia, come si può vedere se si usa effettivamente l'API <xref:System.Windows.LogicalTreeHelper>, l'albero logico contiene talvolta nodi che non sono <xref:System.Windows.FrameworkElement> o <xref:System.Windows.FrameworkContentElement>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-150">However, as you can see if you actually use the <xref:System.Windows.LogicalTreeHelper> API, the logical tree sometimes contains nodes that are not either <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="4d2ca-151">Ad esempio, l'albero logico segnala il valore <xref:System.Windows.Controls.TextBlock.Text%2A> di un <xref:System.Windows.Controls.TextBlock>, che è una stringa.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-151">For instance, the logical tree reports the <xref:System.Windows.Controls.TextBlock.Text%2A> value of a <xref:System.Windows.Controls.TextBlock>, which is a string.</span></span>  
  
<a name="override_logical_tree"></a>   
### <a name="overriding-the-logical-tree"></a><span data-ttu-id="4d2ca-152">Override dell'albero logico</span><span class="sxs-lookup"><span data-stu-id="4d2ca-152">Overriding the Logical Tree</span></span>  
 <span data-ttu-id="4d2ca-153">Gli autori di controlli avanzati possono eseguire l'override dell'albero logico eseguendo l'override di diverse API che definiscono il modo in cui un oggetto generale o un modello di contenuto aggiunge o rimuove oggetti all'interno dell'albero logico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-153">Advanced control authors can override the logical tree by overriding several APIs that define how a general object or content model adds or removes objects within the logical tree.</span></span> <span data-ttu-id="4d2ca-154">Per un esempio relativo all'override dell'albero logico, vedere [Eseguire l'override dell'albero logico](how-to-override-the-logical-tree.md).</span><span class="sxs-lookup"><span data-stu-id="4d2ca-154">For an example of how to override the logical tree, see [Override the Logical Tree](how-to-override-the-logical-tree.md).</span></span>  
  
<a name="pvi"></a>   
### <a name="property-value-inheritance"></a><span data-ttu-id="4d2ca-155">Ereditarietà del valore della proprietà</span><span class="sxs-lookup"><span data-stu-id="4d2ca-155">Property Value Inheritance</span></span>  
 <span data-ttu-id="4d2ca-156">L'ereditarietà dei valori delle proprietà funziona tramite un albero ibrido.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-156">Property value inheritance operates through a hybrid tree.</span></span> <span data-ttu-id="4d2ca-157">I metadati effettivi che contengono la proprietà <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> che consente l'ereditarietà della proprietà è la classe <xref:System.Windows.FrameworkPropertyMetadata> a livello di Framework WPF.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-157">The actual metadata that contains the <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> property that enables property inheritance is the WPF framework-level <xref:System.Windows.FrameworkPropertyMetadata> class.</span></span> <span data-ttu-id="4d2ca-158">Pertanto, sia l'elemento padre che include il valore originale che l'oggetto figlio che eredita tale valore devono essere <xref:System.Windows.FrameworkElement> o <xref:System.Windows.FrameworkContentElement>ed entrambi devono essere parte di un albero logico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-158">Therefore, both the parent that holds the original value and the child object that inherits that value must both be <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>, and they must both be part of some logical tree.</span></span> <span data-ttu-id="4d2ca-159">Per le proprietà WPF esistenti che supportano l'ereditarietà delle proprietà, tuttavia, l'ereditarietà dei valori delle proprietà può essere mantenuta tramite un nuovo oggetto non incluso nell'albero logico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-159">However, for existing WPF properties that support property inheritance, property value inheritance is able to perpetuate through an intervening object that is not in the logical tree.</span></span> <span data-ttu-id="4d2ca-160">Questa caratteristica è pertinente per lo più se si vuole fare in modo che gli elementi del modello usino valori di proprietà ereditati impostati sull'istanza basata sul modello o a livelli ancora superiori di composizione a livello di pagina e quindi più in alto nell'albero logico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-160">Mainly this is relevant for having template elements use any inherited property values set either on the instance that is templated, or at still higher levels of page-level composition and therefore higher in the logical tree.</span></span> <span data-ttu-id="4d2ca-161">Per garantire un funzionamento coerente dell'ereditarietà dei valori delle proprietà oltre tale limite, la proprietà che eredita deve essere registrata come proprietà associata. È consigliabile seguire questo modello anche se si vuole definire una proprietà di dipendenza personalizzata con un comportamento di ereditarietà della proprietà.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-161">In order for property value inheritance to work consistently across such a boundary, the inheriting property must be registered as an attached property, and you should follow this pattern if you intend to define a custom dependency property with property inheritance behavior.</span></span> <span data-ttu-id="4d2ca-162">L'albero esatto usato per l'ereditarietà delle proprietà non può essere completamente previsto da un metodo di utilità di una classe helper, nemmeno in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-162">The exact tree used for property inheritance cannot be entirely anticipated by a helper class utility method, even at run time.</span></span> <span data-ttu-id="4d2ca-163">Per altre informazioni, vedere [Ereditarietà del valore della proprietà](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="4d2ca-163">For more information, see [Property Value Inheritance](property-value-inheritance.md).</span></span>  
  
<a name="two_trees"></a>   
## <a name="the-visual-tree"></a><span data-ttu-id="4d2ca-164">Struttura ad albero visuale</span><span class="sxs-lookup"><span data-stu-id="4d2ca-164">The Visual Tree</span></span>  
 <span data-ttu-id="4d2ca-165">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] oltre al concetto di albero logico c'è anche il concetto di struttura ad albero visuale.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-165">In addition to the concept of the logical tree, there is also the concept of the visual tree in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="4d2ca-166">La struttura ad albero visuale descrive la struttura degli oggetti visivi, come rappresentati dalla classe di base <xref:System.Windows.Media.Visual>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-166">The visual tree describes the structure of visual objects, as represented by the <xref:System.Windows.Media.Visual> base class.</span></span> <span data-ttu-id="4d2ca-167">Quando si scrive un modello per un controllo, si definisce o ridefinisce la struttura ad albero visuale relativa a quel controllo.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-167">When you write a template for a control, you are defining or redefining the visual tree that applies for that control.</span></span> <span data-ttu-id="4d2ca-168">La struttura ad albero visuale è di interesse anche per gli sviluppatori che vogliono un controllo di livello inferiore sul disegno per ragioni di prestazioni e ottimizzazione.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-168">The visual tree is also of interest to developers who want lower-level control over drawing for performance and optimization reasons.</span></span> <span data-ttu-id="4d2ca-169">Un'esposizione della struttura ad albero visuale come parte della programmazione di applicazioni [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] convenzionale è rappresentata dal fatto che le route degli eventi indirizzati percorrono per lo più la struttura ad albero visuale e non l'albero logico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-169">One exposure of the visual tree as part of conventional [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application programming is that event routes for a routed event mostly travel along the visual tree, not the logical tree.</span></span> <span data-ttu-id="4d2ca-170">Questa sottigliezza del comportamento degli eventi indirizzati potrebbe non essere immediatamente visibile, a meno che l'utente non sia un autore di controlli.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-170">This subtlety of routed event behavior might not be immediately apparent unless you are a control author.</span></span> <span data-ttu-id="4d2ca-171">Il routing di eventi nella struttura ad albero visuale consente ai controlli che implementano la composizione a livello visivo di gestire eventi o creare setter di eventi.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-171">Routing events through the visual tree enables controls that implement composition at the visual level to handle events or create event setters.</span></span>  
  
<a name="trees_content"></a>   
## <a name="trees-content-elements-and-content-hosts"></a><span data-ttu-id="4d2ca-172">Alberi, elementi di contenuto e host di contenuto</span><span class="sxs-lookup"><span data-stu-id="4d2ca-172">Trees, Content Elements, and Content Hosts</span></span>  
 <span data-ttu-id="4d2ca-173">Gli elementi di contenuto (classi che derivano da <xref:System.Windows.ContentElement>) non fanno parte della struttura ad albero visuale. non ereditano da <xref:System.Windows.Media.Visual> e non dispongono di una rappresentazione visiva.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-173">Content elements (classes that derive from <xref:System.Windows.ContentElement>) are not part of the visual tree; they do not inherit from <xref:System.Windows.Media.Visual> and do not have a visual representation.</span></span> <span data-ttu-id="4d2ca-174">Per essere visualizzato in un'interfaccia utente, è necessario che un <xref:System.Windows.ContentElement> sia ospitato in un host di contenuto che sia un <xref:System.Windows.Media.Visual> e un partecipante dell'albero logico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-174">In order to appear in a UI at all, a <xref:System.Windows.ContentElement> must be hosted in a content host that is both a <xref:System.Windows.Media.Visual> and a logical tree participant.</span></span> <span data-ttu-id="4d2ca-175">Un oggetto di questo tipo è in genere un <xref:System.Windows.FrameworkElement>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-175">Usually such an object is a <xref:System.Windows.FrameworkElement>.</span></span> <span data-ttu-id="4d2ca-176">È possibile pensare all'host di contenuto come a un "browser" per il contenuto, che sceglie come visualizzare tale contenuto all'interno dell'area dello schermo controllata dall'host.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-176">You can conceptualize that the content host is somewhat like a "browser" for the content and chooses how to display that content within the screen region that the host controls.</span></span> <span data-ttu-id="4d2ca-177">Quando il contenuto è ospitato, può partecipare ad alcuni processi dell'albero che normalmente sono associati alla struttura ad albero visuale.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-177">When the content is hosted, the content can be made a participant in certain tree processes that are normally associated with the visual tree.</span></span> <span data-ttu-id="4d2ca-178">In genere, la classe host <xref:System.Windows.FrameworkElement> include il codice di implementazione che aggiunge qualsiasi <xref:System.Windows.ContentElement> ospitata alla route dell'evento tramite sottonodi dell'albero logico del contenuto, anche se il contenuto ospitato non fa parte della struttura ad albero visuale vera e propria.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-178">Generally, the <xref:System.Windows.FrameworkElement> host class includes implementation code that adds any hosted <xref:System.Windows.ContentElement> to the event route through subnodes of the content logical tree, even though the hosted content is not part of the true visual tree.</span></span> <span data-ttu-id="4d2ca-179">Questa operazione è necessaria in modo che un <xref:System.Windows.ContentElement> possa originare un evento indirizzato che viene indirizzato a qualsiasi elemento diverso da se stesso.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-179">This is necessary so that a <xref:System.Windows.ContentElement> can source a routed event that routes to any element other than itself.</span></span>  
  
<a name="tree_traversal"></a>   
## <a name="tree-traversal"></a><span data-ttu-id="4d2ca-180">Attraversamento dell'albero</span><span class="sxs-lookup"><span data-stu-id="4d2ca-180">Tree Traversal</span></span>  
 <span data-ttu-id="4d2ca-181">La classe <xref:System.Windows.LogicalTreeHelper> fornisce i metodi <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>, <xref:System.Windows.LogicalTreeHelper.GetParent%2A>e <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> per l'attraversamento dell'albero logico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-181">The <xref:System.Windows.LogicalTreeHelper> class provides the <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>, <xref:System.Windows.LogicalTreeHelper.GetParent%2A>, and <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> methods for logical tree traversal.</span></span> <span data-ttu-id="4d2ca-182">Nella maggior parte dei casi, non è necessario attraversare l'albero logico dei controlli esistenti, perché i controlli espongono quasi sempre i relativi elementi figlio logici come proprietà di raccolta dedicata che supporta l'accesso alla raccolta, ad esempio `Add`, un indicizzatore e così via.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-182">In most cases, you should not have to traverse the logical tree of existing controls, because these controls almost always expose their logical child elements as a dedicated collection property that supports collection access such as `Add`, an indexer, and so on.</span></span> <span data-ttu-id="4d2ca-183">L'attraversamento dell'albero è principalmente uno scenario usato dagli autori di controlli che scelgono di non derivare da pattern di controllo previsti, ad esempio <xref:System.Windows.Controls.ItemsControl> o <xref:System.Windows.Controls.Panel> in cui le proprietà della raccolta sono già definite e che desiderano fornire il proprio supporto della proprietà della raccolta.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-183">Tree traversal is mainly a scenario that is used by control authors who choose not to derive from intended control patterns such as <xref:System.Windows.Controls.ItemsControl> or <xref:System.Windows.Controls.Panel> where collection properties are already defined, and who intend to provide their own collection property support.</span></span>  
  
 <span data-ttu-id="4d2ca-184">La struttura ad albero visuale supporta inoltre una classe helper per l'attraversamento della struttura ad albero visuale <xref:System.Windows.Media.VisualTreeHelper>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-184">The visual tree also supports a helper class for visual tree traversal, <xref:System.Windows.Media.VisualTreeHelper>.</span></span> <span data-ttu-id="4d2ca-185">La struttura ad albero visuale non è esposta in modo appropriato tramite proprietà specifiche del controllo, quindi la classe <xref:System.Windows.Media.VisualTreeHelper> è il modo consigliato per attraversare la struttura ad albero visuale, se necessario per lo scenario di programmazione.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-185">The visual tree is not exposed as conveniently through control-specific properties, so the <xref:System.Windows.Media.VisualTreeHelper> class is the recommended way to traverse the visual tree if that is necessary for your programming scenario.</span></span> <span data-ttu-id="4d2ca-186">Per altre informazioni, vedere [Cenni preliminari sul rendering della grafica WPF](../graphics-multimedia/wpf-graphics-rendering-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4d2ca-186">For more information, see [WPF Graphics Rendering Overview](../graphics-multimedia/wpf-graphics-rendering-overview.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="4d2ca-187">A volte è necessario esaminare la struttura ad albero visuale di un modello applicato.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-187">Sometimes it is necessary to examine the visual tree of an applied template.</span></span> <span data-ttu-id="4d2ca-188">Quando si usa questa tecnica, è necessario procedere con attenzione.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-188">You should be careful when using this technique.</span></span> <span data-ttu-id="4d2ca-189">Anche se si attraversa una struttura ad albero visuale per un controllo in cui si definisce il modello, gli utenti del controllo possono sempre modificare il modello impostando la proprietà <xref:System.Windows.Controls.Control.Template%2A> sulle istanze e anche l'utente finale può influenzare il modello applicato modificando il tema del sistema.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-189">Even if you are traversing a visual tree for a control where you define the template, consumers of your control can always change the template by setting the <xref:System.Windows.Controls.Control.Template%2A> property on instances, and even the end user can influence the applied template by changing the system theme.</span></span>  
  
<a name="routes"></a>   
## <a name="routes-for-routed-events-as-a-tree"></a><span data-ttu-id="4d2ca-190">Route per eventi indirizzati come "albero"</span><span class="sxs-lookup"><span data-stu-id="4d2ca-190">Routes for Routed Events as a "Tree"</span></span>  
 <span data-ttu-id="4d2ca-191">Come indicato in precedenza, la route di qualsiasi evento indirizzato percorre un singolo percorso predeterminato di un albero che consiste in una forma ibrida delle rappresentazioni di struttura ad albero visuale e albero logico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-191">As mentioned before, the route of any given routed event travels along a single and predetermined path of a tree that is a hybrid of the visual and logical tree representations.</span></span> <span data-ttu-id="4d2ca-192">La route degli eventi può percorrere l'albero procedendo verso l'alto o verso il basso, a seconda che si tratti di un evento indirizzato di bubbling o di tunneling.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-192">The event route can travel either in the up or down directions within the tree depending on whether it is a tunneling or bubbling routed event.</span></span> <span data-ttu-id="4d2ca-193">Il concetto di route dell'evento non prevede una classe helper di supporto diretto, che potrebbe essere usata per "percorrere" la route dell'evento indipendentemente dalla generazione di un evento che effettivamente percorre una route.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-193">The event route concept does not have a directly supporting helper class that could be used to "walk" the event route independently of raising an event that actually routes.</span></span> <span data-ttu-id="4d2ca-194">Esiste una classe che rappresenta la route, <xref:System.Windows.EventRoute>, ma i metodi di tale classe sono in genere per uso interno.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-194">There is a class that represents the route, <xref:System.Windows.EventRoute>, but the methods of that class are generally for internal use only.</span></span>  
  
<a name="resourcesandtrees"></a>   
## <a name="resource-dictionaries-and-trees"></a><span data-ttu-id="4d2ca-195">Dizionari risorse e alberi</span><span class="sxs-lookup"><span data-stu-id="4d2ca-195">Resource Dictionaries and Trees</span></span>  
 <span data-ttu-id="4d2ca-196">La ricerca nei dizionari risorse di tutti gli oggetti `Resources` definiti in una pagina attraversa fondamentalmente l'albero logico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-196">Resource dictionary lookup for all `Resources` defined in a page traverses basically the logical tree.</span></span> <span data-ttu-id="4d2ca-197">Gli oggetti non inclusi nell'albero logico possono fare riferimento a risorse con chiave, ma la sequenza di ricerca delle risorse inizia nel punto in cui l'oggetto è connesso all'albero logico.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-197">Objects that are not in the logical tree can reference keyed resources, but the resource lookup sequence begins at the point where that object is connected to the logical tree.</span></span> <span data-ttu-id="4d2ca-198">In WPF solo i nodi della struttura ad albero logica possono avere una proprietà `Resources` che contiene una <xref:System.Windows.ResourceDictionary>, pertanto non vi è alcun vantaggio nell'attraversamento della struttura ad albero visuale per la ricerca di risorse con chiave da una <xref:System.Windows.ResourceDictionary>.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-198">In WPF, only logical tree nodes can have a `Resources` property that contains a <xref:System.Windows.ResourceDictionary>, therefore there is no benefit in traversing the visual tree looking for keyed resources from a <xref:System.Windows.ResourceDictionary>.</span></span>  
  
 <span data-ttu-id="4d2ca-199">La ricerca delle risorse può però estendersi anche oltre l'albero logico diretto.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-199">However, resource lookup can also extend beyond the immediate logical tree.</span></span> <span data-ttu-id="4d2ca-200">Per il markup dell'applicazione, la ricerca delle risorse può proseguire verso l'altro nei dizionari risorse a livello di applicazione e quindi verso il supporto dei temi e i valori di sistema a cui viene fatto riferimento come chiavi o proprietà statiche.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-200">For application markup, the resource lookup can then continue onward to application-level resource dictionaries and then to theme support and system values that are referenced as static properties or keys.</span></span> <span data-ttu-id="4d2ca-201">Se i riferimenti alle risorse sono dinamici, i temi stessi possono fare riferimento anche ai valori di sistema esterni all'albero logico del tema.</span><span class="sxs-lookup"><span data-stu-id="4d2ca-201">Themes themselves can also reference system values outside of the theme logical tree if the resource references are dynamic.</span></span> <span data-ttu-id="4d2ca-202">Per altre informazioni sui dizionari risorse e sulla logica di ricerca, vedere [Risorse XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="4d2ca-202">For more information on resource dictionaries and the lookup logic, see [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4d2ca-203">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="4d2ca-203">See also</span></span>

- [<span data-ttu-id="4d2ca-204">Cenni preliminari sull'input</span><span class="sxs-lookup"><span data-stu-id="4d2ca-204">Input Overview</span></span>](input-overview.md)
- [<span data-ttu-id="4d2ca-205">Cenni preliminari sul rendering della grafica WPF</span><span class="sxs-lookup"><span data-stu-id="4d2ca-205">WPF Graphics Rendering Overview</span></span>](../graphics-multimedia/wpf-graphics-rendering-overview.md)
- [<span data-ttu-id="4d2ca-206">Cenni preliminari sugli eventi indirizzati</span><span class="sxs-lookup"><span data-stu-id="4d2ca-206">Routed Events Overview</span></span>](routed-events-overview.md)
- [<span data-ttu-id="4d2ca-207">Inizializzazione di elementi oggetto non presenti in una struttura ad albero di oggetti</span><span class="sxs-lookup"><span data-stu-id="4d2ca-207">Initialization for Object Elements Not in an Object Tree</span></span>](initialization-for-object-elements-not-in-an-object-tree.md)
- [<span data-ttu-id="4d2ca-208">Architettura WPF</span><span class="sxs-lookup"><span data-stu-id="4d2ca-208">WPF Architecture</span></span>](wpf-architecture.md)
