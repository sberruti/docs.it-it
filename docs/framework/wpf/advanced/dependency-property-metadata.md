---
title: Metadati delle proprietà di dipendenza
ms.date: 03/30/2017
helpviewer_keywords:
- APIs [WPF], metadata
- dependency properties [WPF], metadata
- metadata [WPF], for dependency properties
- overriding metadata [WPF]
ms.assetid: d01ed009-b722-41bf-b82f-fe1a8cdc50dd
ms.openlocfilehash: 3d84510fce69e81929cbe9b6088e12aaf3409769
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/12/2020
ms.locfileid: "79186373"
---
# <a name="dependency-property-metadata"></a><span data-ttu-id="1577b-102">Metadati delle proprietà di dipendenza</span><span class="sxs-lookup"><span data-stu-id="1577b-102">Dependency Property Metadata</span></span>
<span data-ttu-id="1577b-103">Il [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] sistema di proprietà include un sistema di report di metadati che va oltre ciò che può essere segnalato su una proprietà tramite la reflection o le caratteristiche generali di Common Language Runtime (CLR).</span><span class="sxs-lookup"><span data-stu-id="1577b-103">The [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] property system includes a metadata reporting system that goes beyond what can be reported about a property through reflection or general common language runtime (CLR) characteristics.</span></span> <span data-ttu-id="1577b-104">I metadati di una proprietà di dipendenza possono anche essere assegnati in modo univoco dalla classe che definisce una proprietà di dipendenza, possono essere modificati quando la proprietà di dipendenza viene aggiunta a una classe diversa ed è possibile eseguirne specificatamente l'override tramite tutte le classi derivate che ereditano la proprietà di dipendenza dalla classe di base in fase di definizione.</span><span class="sxs-lookup"><span data-stu-id="1577b-104">Metadata for a dependency property can also be assigned uniquely by the class that defines a dependency property, can be changed when the dependency property is added to a different class, and can be specifically overridden by all derived classes that inherit the dependency property from the defining base class.</span></span>  

<a name="prerequisites"></a>
## <a name="prerequisites"></a><span data-ttu-id="1577b-105">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="1577b-105">Prerequisites</span></span>  
 <span data-ttu-id="1577b-106">Questo argomento presuppone la conoscenza delle proprietà di dipendenza dal punto di vista di un consumer delle proprietà di dipendenza esistenti nelle classi di [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], nonché la lettura dell'argomento [Panoramica sulle proprietà di dipendenza](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1577b-106">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](dependency-properties-overview.md).</span></span> <span data-ttu-id="1577b-107">Per seguire gli esempi illustrati in questo argomento, è anche necessario conoscere [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] e saper scrivere applicazioni [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1577b-107">In order to follow the examples in this topic, you should also understand [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and know how to write [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>  
  
<a name="dp_metadata_contents"></a>
## <a name="how-dependency-property-metadata-is-used"></a><span data-ttu-id="1577b-108">Come usare i metadati delle proprietà di dipendenza</span><span class="sxs-lookup"><span data-stu-id="1577b-108">How Dependency Property Metadata is Used</span></span>  
 <span data-ttu-id="1577b-109">I metadati della proprietà di dipendenza sono un oggetto sul quale è possibile eseguire query per esaminare le caratteristiche di una proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="1577b-109">Dependency property metadata exists as an object that can be queried to examine the characteristics of a dependency property.</span></span> <span data-ttu-id="1577b-110">Anche il sistema di proprietà accede frequentemente ai metadati durante l'elaborazione di qualsiasi proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="1577b-110">This metadata is also accessed frequently by the property system as it processes any given dependency property.</span></span> <span data-ttu-id="1577b-111">L'oggetto metadati di una proprietà di dipendenza può contenere i seguenti tipi di informazioni:</span><span class="sxs-lookup"><span data-stu-id="1577b-111">The metadata object for a dependency property can contain the following types of information:</span></span>  
  
- <span data-ttu-id="1577b-112">Valore predefinito per la proprietà di dipendenza, se non è possibile determinare altri valori per la proprietà di dipendenza in base al valore locale, allo stile, all'ereditarietà e così via. Per una descrizione approfondita del modo in cui i valori predefiniti partecipano alla precedenza utilizzata dal sistema di proprietà durante l'assegnazione dei valori per le proprietà di dipendenza, vedere [Precedenza](dependency-property-value-precedence.md)dei valori delle proprietà di dipendenza .</span><span class="sxs-lookup"><span data-stu-id="1577b-112">Default value for the dependency property, if no other value can be determined for the dependency property by local value, style, inheritance, etc. For a thorough discussion of how default values participate in the precedence used by the property system when assigning values for dependency properties, see [Dependency Property Value Precedence](dependency-property-value-precedence.md).</span></span>  
  
- <span data-ttu-id="1577b-113">I riferimenti a implementazioni di callback che influiscono sui comportamenti di coercizione o di notifica di modifica in base al tipo di proprietario.</span><span class="sxs-lookup"><span data-stu-id="1577b-113">References to callback implementations that affect coercion or change-notification behaviors on a per-owner-type basis.</span></span> <span data-ttu-id="1577b-114">Notare che questi callback vengono spesso definiti con un livello di accesso non pubblico, pertanto in genere non è possibile ottenere i riferimenti effettivi dai metadati, a meno che i riferimenti non rientrino nell'ambito di accesso consentito.</span><span class="sxs-lookup"><span data-stu-id="1577b-114">Note that these callbacks are often defined with a nonpublic access level, so obtaining the actual references from metadata is generally not possible unless the references are within your permitted access scope.</span></span> <span data-ttu-id="1577b-115">Per altre informazioni sui callback per le proprietà di dipendenza, vedere [Callback e convalida delle proprietà di dipendenza](dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="1577b-115">For more information on dependency property callbacks, see [Dependency Property Callbacks and Validation](dependency-property-callbacks-and-validation.md).</span></span>  
  
- <span data-ttu-id="1577b-116">Se la proprietà di dipendenza in questione viene considerata come una proprietà a livello di framework WPF, i metadati potrebbero contenere caratteristiche della proprietà di dipendenza a livello di framework WPF, che segnalano informazioni e stato per servizi come la logica di ereditarietà delle proprietà e il motore di layout a livello di framework WPF.</span><span class="sxs-lookup"><span data-stu-id="1577b-116">If the dependency property in question is considered to be a WPF framework-level property, the metadata might contain WPF framework-level dependency property characteristics, which report information and state for services such as the WPF framework-level layout engine and property inheritance logic.</span></span> <span data-ttu-id="1577b-117">Per altre informazioni su questo aspetto dei metadati delle proprietà di dipendenza, vedere [Metadati delle proprietà del framework](framework-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="1577b-117">For more information on this aspect of dependency property metadata, see [Framework Property Metadata](framework-property-metadata.md).</span></span>  
  
<a name="APIs"></a>
## <a name="metadata-apis"></a><span data-ttu-id="1577b-118">API dei metadati</span><span class="sxs-lookup"><span data-stu-id="1577b-118">Metadata APIs</span></span>  
 <span data-ttu-id="1577b-119">Il tipo che segnala la maggior parte delle <xref:System.Windows.PropertyMetadata> informazioni sui metadati utilizzate dal sistema di proprietà è la classe .</span><span class="sxs-lookup"><span data-stu-id="1577b-119">The type that reports most of the metadata information used by the property system is the <xref:System.Windows.PropertyMetadata> class.</span></span> <span data-ttu-id="1577b-120">Le istanze dei metadati possono essere specificate facoltativamente quando le proprietà di dipendenza vengono registrate nel sistema di proprietà e una seconda volta per i tipi che si aggiungono come proprietari o che eseguono l'override dei metadati ereditati dalla definizione della proprietà di dipendenza della classe di base.</span><span class="sxs-lookup"><span data-stu-id="1577b-120">Metadata instances are optionally specified when dependency properties are registered with the property system, and can be specified again for additional types that either add themselves as owners or override metadata they inherit from the base class dependency property definition.</span></span> <span data-ttu-id="1577b-121">Per i casi in cui la registrazione <xref:System.Windows.PropertyMetadata> di una proprietà non specifica i metadati, viene creato un valore predefinito con i valori predefiniti per tale classe. I metadati registrati <xref:System.Windows.PropertyMetadata> vengono restituiti <xref:System.Windows.DependencyProperty.GetMetadata%2A> come quando si chiamano i vari <xref:System.Windows.DependencyObject> overload che ottengono metadati da una proprietà di dipendenza in un'istanza.</span><span class="sxs-lookup"><span data-stu-id="1577b-121">(For cases where a property registration does not specify metadata, a default <xref:System.Windows.PropertyMetadata> is created with default values for that class.)The registered metadata is returned as <xref:System.Windows.PropertyMetadata> when you call the various <xref:System.Windows.DependencyProperty.GetMetadata%2A> overloads that get metadata from a dependency property on a <xref:System.Windows.DependencyObject> instance.</span></span>  
  
 <span data-ttu-id="1577b-122">La <xref:System.Windows.PropertyMetadata> classe viene quindi derivata da per fornire metadati più specifici per le divisioni dell'architettura, ad esempio le classi a livello di framework WPFWPF.</span><span class="sxs-lookup"><span data-stu-id="1577b-122">The <xref:System.Windows.PropertyMetadata> class is then derived from to provide more specific metadata for architectural divisions such as the WPF framework-level classes.</span></span> <span data-ttu-id="1577b-123"><xref:System.Windows.UIPropertyMetadata>aggiunge report di <xref:System.Windows.FrameworkPropertyMetadata> animazione e fornisce le proprietà a livello di framework WPF menzionate nella sezione precedente.</span><span class="sxs-lookup"><span data-stu-id="1577b-123"><xref:System.Windows.UIPropertyMetadata> adds animation reporting, and <xref:System.Windows.FrameworkPropertyMetadata> provides the WPF framework-level properties mentioned in the previous section.</span></span> <span data-ttu-id="1577b-124">Quando le proprietà di dipendenza vengono registrate, possono essere registrate con queste <xref:System.Windows.PropertyMetadata> classi derivate.</span><span class="sxs-lookup"><span data-stu-id="1577b-124">When dependency properties are registered, they can be registered with these <xref:System.Windows.PropertyMetadata> derived classes.</span></span> <span data-ttu-id="1577b-125">Quando i metadati vengono <xref:System.Windows.PropertyMetadata> esaminati, è possibile eseguire il cast del tipo di base alle classi derivate in modo da poter esaminare le proprietà più specifiche.</span><span class="sxs-lookup"><span data-stu-id="1577b-125">When the metadata is examined, the base <xref:System.Windows.PropertyMetadata> type can potentially be cast to the derived classes so that you can examine the more specific properties.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1577b-126">Le caratteristiche della proprietà <xref:System.Windows.FrameworkPropertyMetadata> che possono essere specificate in sono talvolta indicate in questa documentazione come "flags".</span><span class="sxs-lookup"><span data-stu-id="1577b-126">The property characteristics that can be specified in <xref:System.Windows.FrameworkPropertyMetadata> are sometimes referred to in this documentation as "flags".</span></span> <span data-ttu-id="1577b-127">Quando si creano nuove istanze di metadati da utilizzare nelle registrazioni delle proprietà <xref:System.Windows.FrameworkPropertyMetadataOptions> di dipendenza o negli override dei metadati, si specificano questi valori utilizzando l'enumerazione flagwise e quindi si forniscono valori possibilmente concatenati dell'enumerazione al <xref:System.Windows.FrameworkPropertyMetadata> costruttore.</span><span class="sxs-lookup"><span data-stu-id="1577b-127">When you create new metadata instances for use in dependency property registrations or metadata overrides, you specify these values using the flagwise enumeration <xref:System.Windows.FrameworkPropertyMetadataOptions> and then you supply possibly concatenated values of the enumeration to the <xref:System.Windows.FrameworkPropertyMetadata> constructor.</span></span> <span data-ttu-id="1577b-128">Tuttavia, una volta costruite, <xref:System.Windows.FrameworkPropertyMetadata> queste caratteristiche dell'opzione vengono esposte all'interno di una serie di proprietà booleane anziché come valore di enumerazione di costruzione.</span><span class="sxs-lookup"><span data-stu-id="1577b-128">However, once constructed, these option characteristics are exposed within a <xref:System.Windows.FrameworkPropertyMetadata> as a series of Boolean properties rather than the constructing enumeration value.</span></span> <span data-ttu-id="1577b-129">Le proprietà booleane consentono di verificare ogni istruzione condizionale anziché richiedere l'applicazione di una maschera a un valore di enumerazione basato su flag per ottenere le informazioni necessarie.</span><span class="sxs-lookup"><span data-stu-id="1577b-129">The Boolean properties enable you to check each conditional, rather than requiring you to apply a mask to a flagwise enumeration value to get the information you are interested in.</span></span> <span data-ttu-id="1577b-130">Il costruttore utilizza <xref:System.Windows.FrameworkPropertyMetadataOptions> concatenato per mantenere ragionevole la lunghezza della firma del costruttore, mentre i metadati costruiti effettivi espone le proprietà discrete per rendere più intuitiva l'esecuzione di query sui metadati.</span><span class="sxs-lookup"><span data-stu-id="1577b-130">The constructor uses the concatenated <xref:System.Windows.FrameworkPropertyMetadataOptions> in order to keep the length of the constructor signature reasonable, whereas the actual constructed metadata exposes the discrete properties to make querying the metadata more intuitive.</span></span>  
  
<a name="override_or_subclass"></a>
## <a name="when-to-override-metadata-when-to-derive-a-class"></a><span data-ttu-id="1577b-131">Esecuzione dell'override dei metadati e derivazione di una classe</span><span class="sxs-lookup"><span data-stu-id="1577b-131">When to Override Metadata, When to Derive a Class</span></span>  
 <span data-ttu-id="1577b-132">Il sistema di proprietà di [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] include funzionalità consolidate che consentono di modificare alcune caratteristiche delle proprietà di dipendenza senza richiederne una implementazione nuova e completa.</span><span class="sxs-lookup"><span data-stu-id="1577b-132">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system has established capabilities for changing some characteristics of dependency properties without requiring them to be entirely re-implemented.</span></span> <span data-ttu-id="1577b-133">Questo risultato si ottiene creando un'istanza diversa dei metadati della proprietà per la proprietà di dipendenza presente in un tipo particolare.</span><span class="sxs-lookup"><span data-stu-id="1577b-133">This is accomplished by constructing a different instance of property metadata for the dependency property as it exists on a particular type.</span></span> <span data-ttu-id="1577b-134">Notare che le proprietà di dipendenza non sono per la maggior parte proprietà virtuali, pertanto, a rigor di termini, "una nuova implementazione" di queste proprietà nelle classi ereditate potrebbe essere realizzata solo nascondendo il membro esistente.</span><span class="sxs-lookup"><span data-stu-id="1577b-134">Note that most existing dependency properties are not virtual properties, so strictly speaking "re-implementing" them on inherited classes could only be accomplished by shadowing the existing member.</span></span>  
  
 <span data-ttu-id="1577b-135">Se lo scenario che si tenta di abilitare per una proprietà di dipendenza in un tipo non può essere realizzato modificando le caratteristiche delle proprietà di dipendenza esistenti, potrebbe essere necessario creare una classe derivata e successivamente dichiarare una proprietà di dipendenza personalizzata nella classe derivata.</span><span class="sxs-lookup"><span data-stu-id="1577b-135">If the scenario you are trying to enable for a dependency property on a type cannot be accomplished by modifying characteristics of existing dependency properties, it might then be necessary to create a derived class, and then to declare a custom dependency property on your derived class.</span></span> <span data-ttu-id="1577b-136">Una proprietà di dipendenza personalizzata si comporta in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] modo identico alle proprietà di dipendenza definite dalle API.</span><span class="sxs-lookup"><span data-stu-id="1577b-136">A custom dependency property behaves identically to dependency properties defined by the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] APIs.</span></span> <span data-ttu-id="1577b-137">Per altri dettagli sulle proprietà di dipendenza personalizzate, vedere [Proprietà di dipendenza personalizzate](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="1577b-137">For more details about custom dependency properties, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>  
  
 <span data-ttu-id="1577b-138">Una caratteristica rilevante di una proprietà di dipendenza di cui non è possibile eseguire l'override è il tipo di valore.</span><span class="sxs-lookup"><span data-stu-id="1577b-138">One notable characteristic of a dependency property that you cannot override is its value type.</span></span> <span data-ttu-id="1577b-139">Se si eredita una proprietà di dipendenza che si comporta nel modo richiesto, ma è richiesto un tipo diverso per questa proprietà, sarà necessario implementare una proprietà di dipendenza personalizzata e forse collegare le proprietà tramite la conversione dei tipi oppure un'altra implementazione nella classe personalizzata.</span><span class="sxs-lookup"><span data-stu-id="1577b-139">If you are inheriting a dependency property that has the approximate behavior you require, but you require a different type for it, you will have to implement a custom dependency property and perhaps link the properties through type conversion or other implementation on your custom class.</span></span> <span data-ttu-id="1577b-140">Inoltre, non è <xref:System.Windows.ValidateValueCallback>possibile sostituire un oggetto , poiché questo callback esiste nel campo di registrazione stesso e non all'interno dei relativi metadati.</span><span class="sxs-lookup"><span data-stu-id="1577b-140">Also, you cannot replace an existing <xref:System.Windows.ValidateValueCallback>, because this callback exists in the registration field itself and not within its metadata.</span></span>  
  
<a name="scenarios"></a>
## <a name="scenarios-for-changing-existing-metadata"></a><span data-ttu-id="1577b-141">Scenari per la modifica dei metadati esistenti</span><span class="sxs-lookup"><span data-stu-id="1577b-141">Scenarios for Changing Existing Metadata</span></span>  
 <span data-ttu-id="1577b-142">Se si usano i metadati di una proprietà di dipendenza esistente, uno scenario comune per modificare i metadati della proprietà di dipendenza consiste nella modifica del valore predefinito.</span><span class="sxs-lookup"><span data-stu-id="1577b-142">If you are working with metadata of an existing dependency property, one common scenario for changing dependency property metadata is to change the default value.</span></span> <span data-ttu-id="1577b-143">La modifica o l'aggiunta di callback del sistema di proprietà rappresenta uno scenario più avanzato.</span><span class="sxs-lookup"><span data-stu-id="1577b-143">Changing or adding property system callbacks is a more advanced scenario.</span></span> <span data-ttu-id="1577b-144">Questa operazione può essere necessaria quando l'implementazione di una classe derivata ha molte interrelazioni tra le proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="1577b-144">You might want to do this if your implementation of a derived class has different interrelationships between dependency properties.</span></span> <span data-ttu-id="1577b-145">Una delle condizioni per poter disporre di un modello di programmazione che supporti l'utilizzo del codice e l'utilizzo dichiarativo consiste nella possibilità di impostare le proprietà in qualsiasi ordine.</span><span class="sxs-lookup"><span data-stu-id="1577b-145">One of the conditionals of having a programming model that supports both code and declarative usage is that properties must enable being set in any order.</span></span> <span data-ttu-id="1577b-146">Le proprietà dipendenti devono quindi essere impostate JIT senza contesto e senza la possibilità di basarsi sulla conoscenza di un ordine di impostazione, come potrebbe accadere in un costruttore.</span><span class="sxs-lookup"><span data-stu-id="1577b-146">Thus any dependent properties need to be set just-in-time without context and cannot rely on knowing a setting order such as might be found in a constructor.</span></span> <span data-ttu-id="1577b-147">Per altre informazioni su questo aspetto del sistema di proprietà, vedere [Callback e convalida delle proprietà di dipendenza](dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="1577b-147">For more information on this aspect of the property system, see [Dependency Property Callbacks and Validation](dependency-property-callbacks-and-validation.md).</span></span> <span data-ttu-id="1577b-148">Notare che i callback di convalida non fanno parte dei metadati, ma dell'identificatore della proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="1577b-148">Note that validation callbacks are not part of the metadata; they are part of the dependency property identifier.</span></span> <span data-ttu-id="1577b-149">I callback di convalida non possono quindi essere modificati mediante l'override dei metadati.</span><span class="sxs-lookup"><span data-stu-id="1577b-149">Therefore, validation callbacks cannot be changed by overriding the metadata.</span></span>  
  
 <span data-ttu-id="1577b-150">In alcuni casi, è possibile che si decida di modificare le opzioni dei metadati delle proprietà a livello di framework WPF nelle proprietà di dipendenza esistenti.</span><span class="sxs-lookup"><span data-stu-id="1577b-150">In some cases you might also want to alter the WPF framework-level property metadata options on existing dependency properties.</span></span> <span data-ttu-id="1577b-151">Queste opzioni consentono di comunicare alcune condizioni note relative alle proprietà a livello di framework WPF ad altri processi a livello di framework WPF, ad esempio il sistema di layout.</span><span class="sxs-lookup"><span data-stu-id="1577b-151">These options communicate certain known conditionals about WPF framework-level properties to other WPF framework-level processes such as the layout system.</span></span>  <span data-ttu-id="1577b-152">L'impostazione delle opzioni viene in genere eseguita solo quando si registra una nuova proprietà di <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> dipendenza, ma è anche possibile modificare i metadati della proprietà a livello di framework WPF come parte di una chiamata o <xref:System.Windows.DependencyProperty.AddOwner%2A> .</span><span class="sxs-lookup"><span data-stu-id="1577b-152">Setting the options is generally done only when registering a new dependency property, but it is also possible to change the WPF framework-level property metadata as part of a <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> or <xref:System.Windows.DependencyProperty.AddOwner%2A> call.</span></span> <span data-ttu-id="1577b-153">Per conoscere i valori specifici da usare e per altre informazioni, vedere [Metadati delle proprietà del framework](framework-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="1577b-153">For the specific values to use and more information, see [Framework Property Metadata](framework-property-metadata.md).</span></span> <span data-ttu-id="1577b-154">Per altre informazioni relative alla modalità di impostazione di queste opzioni per una proprietà di dipendenza appena registrata, vedere [Proprietà di dipendenza personalizzate](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="1577b-154">For more information that is pertinent to how these options should be set for a newly registered dependency property, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>  
  
<a name="dp_override_metadata"></a>
### <a name="overriding-metadata"></a><span data-ttu-id="1577b-155">Override dei metadati</span><span class="sxs-lookup"><span data-stu-id="1577b-155">Overriding Metadata</span></span>  
 <span data-ttu-id="1577b-156">Lo scopo dell'override dei metadati è principalmente la possibilità di modificare i diversi comportamenti derivati dai metadati applicati alla proprietà di dipendenza esistente per il tipo.</span><span class="sxs-lookup"><span data-stu-id="1577b-156">The purpose of overriding metadata is primarily so that you have the opportunity to change the various metadata-derived behaviors that are applied to the dependency property as it exists on your type.</span></span> <span data-ttu-id="1577b-157">Le ragioni di questa operazione vengono spiegate più dettagliatamente nella sezione [Metadati](#dp_metadata_contents).</span><span class="sxs-lookup"><span data-stu-id="1577b-157">The reasons for this are explained in more detail in the [Metadata](#dp_metadata_contents) section.</span></span> <span data-ttu-id="1577b-158">Per altre informazioni e alcuni esempi di codice, vedere [Eseguire l'override dei metadati per una proprietà di dipendenza](how-to-override-metadata-for-a-dependency-property.md).</span><span class="sxs-lookup"><span data-stu-id="1577b-158">For more information including some code examples, see [Override Metadata for a Dependency Property](how-to-override-metadata-for-a-dependency-property.md).</span></span>  
  
 <span data-ttu-id="1577b-159">I metadati della proprietà possono essere forniti per<xref:System.Windows.DependencyProperty.Register%2A>una proprietà di dipendenza durante la chiamata di registrazione ( ).</span><span class="sxs-lookup"><span data-stu-id="1577b-159">Property metadata can be supplied for a dependency property during the registration call (<xref:System.Windows.DependencyProperty.Register%2A>).</span></span> <span data-ttu-id="1577b-160">Tuttavia, in molti casi è possibile fornire metadati specifici del tipo per la classe, quando questa eredita tale proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="1577b-160">However, in many cases, you might want to provide type-specific metadata for your class when it inherits that dependency property.</span></span> <span data-ttu-id="1577b-161">A tale scopo, <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> è possibile chiamare il metodo .</span><span class="sxs-lookup"><span data-stu-id="1577b-161">You can do this by calling the <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> method.</span></span>  <span data-ttu-id="1577b-162">Per un esempio [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] dalle API, <xref:System.Windows.FrameworkElement> la classe è il <xref:System.Windows.UIElement.Focusable%2A> tipo che registra innanzitutto la proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="1577b-162">For an example from the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] APIs, the <xref:System.Windows.FrameworkElement> class is the type that first registers the <xref:System.Windows.UIElement.Focusable%2A> dependency property.</span></span> <span data-ttu-id="1577b-163">Tuttavia, <xref:System.Windows.Controls.Control> la classe esegue l'override dei metadati per la `false` `true`proprietà di dipendenza per <xref:System.Windows.UIElement.Focusable%2A> fornire il proprio valore predefinito iniziale, modificandolo da a , e in caso contrario riutilizza l'implementazione originale.</span><span class="sxs-lookup"><span data-stu-id="1577b-163">But the <xref:System.Windows.Controls.Control> class overrides metadata for the dependency property to provide its own initial default value, changing it from `false` to `true`, and otherwise re-uses the original <xref:System.Windows.UIElement.Focusable%2A> implementation.</span></span>  
  
 <span data-ttu-id="1577b-164">Quando si esegue l'override dei metadati, le diverse caratteristiche dei metadati vengono unite oppure sostituite.</span><span class="sxs-lookup"><span data-stu-id="1577b-164">When you override metadata, the different metadata characteristics are either merged or replaced.</span></span>  
  
- <span data-ttu-id="1577b-165"><xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>viene unita.</span><span class="sxs-lookup"><span data-stu-id="1577b-165"><xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> is merged.</span></span> <span data-ttu-id="1577b-166">Se si aggiunge <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>un nuovo callback, tale callback viene archiviato nei metadati.</span><span class="sxs-lookup"><span data-stu-id="1577b-166">If you add a new <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>, that callback is stored in the metadata.</span></span> <span data-ttu-id="1577b-167">Se non si <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> specifica un nella sostituzione, il valore di viene <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> promosso come riferimento dal predecessore più vicino che lo ha specificato nei metadati.</span><span class="sxs-lookup"><span data-stu-id="1577b-167">If you do not specify a <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> in the override, the value of <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> is promoted as a reference from the nearest ancestor that specified it in metadata.</span></span>  
  
- <span data-ttu-id="1577b-168">Il comportamento effettivo <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> del sistema di proprietà per è che le implementazioni per tutti i proprietari di metadati nella gerarchia vengono mantenute e aggiunte a una tabella, con l'ordine di esecuzione dal sistema di proprietà è che i callback della classe più derivata vengono richiamati per primi.</span><span class="sxs-lookup"><span data-stu-id="1577b-168">The actual property system behavior for <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> is that implementations for all metadata owners in the hierarchy are retained and added to a table, with order of execution by the property system being that the most derived class's callbacks are invoked first.</span></span>  
  
- <span data-ttu-id="1577b-169"><xref:System.Windows.PropertyMetadata.DefaultValue%2A>viene sostituito.</span><span class="sxs-lookup"><span data-stu-id="1577b-169"><xref:System.Windows.PropertyMetadata.DefaultValue%2A> is replaced.</span></span> <span data-ttu-id="1577b-170">Se non si <xref:System.Windows.PropertyMetadata.DefaultValue%2A> specifica un nella sostituzione, il valore di <xref:System.Windows.PropertyMetadata.DefaultValue%2A> proviene dal predecessore più vicino che lo ha specificato nei metadati.</span><span class="sxs-lookup"><span data-stu-id="1577b-170">If you do not specify a <xref:System.Windows.PropertyMetadata.DefaultValue%2A> in the override, the value of <xref:System.Windows.PropertyMetadata.DefaultValue%2A> comes from the nearest ancestor that specified it in metadata.</span></span>  
  
- <span data-ttu-id="1577b-171"><xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>le implementazioni vengono sostituite.</span><span class="sxs-lookup"><span data-stu-id="1577b-171"><xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> implementations are replaced.</span></span> <span data-ttu-id="1577b-172">Se si aggiunge <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>un nuovo callback, tale callback viene archiviato nei metadati.</span><span class="sxs-lookup"><span data-stu-id="1577b-172">If you add a new <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>, that callback is stored in the metadata.</span></span> <span data-ttu-id="1577b-173">Se non si <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> specifica un nella sostituzione, il valore di viene <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> promosso come riferimento dal predecessore più vicino che lo ha specificato nei metadati.</span><span class="sxs-lookup"><span data-stu-id="1577b-173">If you do not specify a <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> in the override, the value of <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> is promoted as a reference from the nearest ancestor that specified it in metadata.</span></span>  
  
- <span data-ttu-id="1577b-174">Il comportamento del sistema <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> di proprietà è che viene richiamato solo il nei metadati immediati.</span><span class="sxs-lookup"><span data-stu-id="1577b-174">The property system behavior is that only the <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> in the immediate metadata is invoked.</span></span> <span data-ttu-id="1577b-175">Non vengono <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> mantenuti riferimenti ad altre implementazioni nella gerarchia.</span><span class="sxs-lookup"><span data-stu-id="1577b-175">No references to other <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> implementations in the hierarchy are retained.</span></span>  
  
 <span data-ttu-id="1577b-176">Questo comportamento viene <xref:System.Windows.PropertyMetadata.Merge%2A>implementato da e può essere sottoposto a override nelle classi di metadati derivate.</span><span class="sxs-lookup"><span data-stu-id="1577b-176">This behavior is implemented by <xref:System.Windows.PropertyMetadata.Merge%2A>, and can be overridden on derived metadata classes.</span></span>  
  
#### <a name="overriding-attached-property-metadata"></a><span data-ttu-id="1577b-177">Override dei metadati delle proprietà associate</span><span class="sxs-lookup"><span data-stu-id="1577b-177">Overriding Attached Property Metadata</span></span>  
 <span data-ttu-id="1577b-178">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], le proprietà associate vengono implementate come proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="1577b-178">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], attached properties are implemented as dependency properties.</span></span> <span data-ttu-id="1577b-179">In altri termini, dispongono anche di metadati della proprietà di cui le singole classi possono eseguire l'override.</span><span class="sxs-lookup"><span data-stu-id="1577b-179">This means that they also have property metadata, which individual classes can override.</span></span> <span data-ttu-id="1577b-180">Le considerazioni sull'ambito per [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] una proprietà <xref:System.Windows.DependencyObject> associata in sono in genere che qualsiasi può avere una proprietà associata impostata su di essi.</span><span class="sxs-lookup"><span data-stu-id="1577b-180">The scoping considerations for an attached property in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] are generally that any <xref:System.Windows.DependencyObject> can have an attached property set on them.</span></span> <span data-ttu-id="1577b-181">Pertanto, <xref:System.Windows.DependencyObject> qualsiasi classe derivata può eseguire l'override dei metadati per qualsiasi proprietà associata, come potrebbe essere impostata su un'istanza della classe.</span><span class="sxs-lookup"><span data-stu-id="1577b-181">Therefore, any <xref:System.Windows.DependencyObject> derived class can override the metadata for any attached property, as it might be set on an instance of the class.</span></span> <span data-ttu-id="1577b-182">È possibile eseguire l'override dei valori predefiniti, dei callback o delle proprietà di segnalazione delle caratteristiche a livello di framework WPF.</span><span class="sxs-lookup"><span data-stu-id="1577b-182">You can override default values, callbacks, or WPF framework-level characteristic-reporting properties.</span></span> <span data-ttu-id="1577b-183">Se la proprietà associata viene impostata su un'istanza della classe, vengono applicate le caratteristiche dei metadati della proprietà di override.</span><span class="sxs-lookup"><span data-stu-id="1577b-183">If the attached property is set on an instance of your class, those override property metadata characteristics apply.</span></span> <span data-ttu-id="1577b-184">È possibile, ad esempio, eseguire l'override del valore predefinito, in modo che il valore di override venga segnalato come valore della proprietà associata nelle istanze della classe, tutte le volte che la proprietà non viene impostata diversamente.</span><span class="sxs-lookup"><span data-stu-id="1577b-184">For instance, you can override the default value, such that your override value is reported as the value of the attached property on instances of your class, whenever the property is not otherwise set.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1577b-185">La <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> proprietà non è rilevante per le proprietà associate.</span><span class="sxs-lookup"><span data-stu-id="1577b-185">The <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> property is not relevant for attached properties.</span></span>  
  
<a name="dp_add_owner"></a>
### <a name="adding-a-class-as-an-owner-of-an-existing-dependency-property"></a><span data-ttu-id="1577b-186">Aggiunta di un classe come proprietario di una proprietà di dipendenza esistente</span><span class="sxs-lookup"><span data-stu-id="1577b-186">Adding a Class as an Owner of an Existing Dependency Property</span></span>  
 <span data-ttu-id="1577b-187">Una classe può aggiungere se stessa come proprietario di una proprietà <xref:System.Windows.DependencyProperty.AddOwner%2A> di dipendenza che è già stata registrata, utilizzando il metodo .</span><span class="sxs-lookup"><span data-stu-id="1577b-187">A class can add itself as an owner of a dependency property that has already been registered, by using the <xref:System.Windows.DependencyProperty.AddOwner%2A> method.</span></span> <span data-ttu-id="1577b-188">In questo modo, la classe può usare una proprietà di dipendenza registrata originariamente per un tipo diverso.</span><span class="sxs-lookup"><span data-stu-id="1577b-188">This enables the class to use a dependency property that was originally registered for a different type.</span></span> <span data-ttu-id="1577b-189">In genere, la classe aggiunta non è una classe derivata del tipo che ha registrato per primo quella proprietà di dipendenza come proprietario.</span><span class="sxs-lookup"><span data-stu-id="1577b-189">The adding class is typically not a derived class of the type that first registered that dependency property as owner.</span></span> <span data-ttu-id="1577b-190">In realtà, in questo modo la classe e le relative classi derivate possono "ereditare" un'implementazione della proprietà di dipendenza senza che la classe proprietario originale e quella aggiunta si trovino nella stessa gerarchia di classi.</span><span class="sxs-lookup"><span data-stu-id="1577b-190">Effectively, this allows your class and its derived classes to "inherit" a dependency property implementation without the original owner class and the adding class being in the same true class hierarchy.</span></span> <span data-ttu-id="1577b-191">Inoltre, la classe aggiunta (e tutte le classi derivate) possono quindi fornire metadati specifici sul tipo per la proprietà di dipendenza originale.</span><span class="sxs-lookup"><span data-stu-id="1577b-191">In addition, the adding class (and all derived classes as well) can then provide type-specific metadata for the original dependency property.</span></span>  
  
 <span data-ttu-id="1577b-192">Oltre ad aggiungersi come proprietario tramite i metodi di utilità del sistema di proprietà, la classe aggiunta deve dichiarare ulteriori membri pubblici al proprio interno al fine di far partecipare completamente la proprietà di dipendenza nel sistema di proprietà con l'esposizione al codice e al markup.</span><span class="sxs-lookup"><span data-stu-id="1577b-192">As well as adding itself as owner through the property system utility methods, the adding class should declare additional public members on itself in order to make the dependency property] a full participant in the property system with exposure to both code and markup.</span></span> <span data-ttu-id="1577b-193">Una classe che aggiunge una proprietà di dipendenza esistente ha le stesse responsabilità, per quanto riguarda l'esposizione del modello a oggetti per quella proprietà di dipendenza, di una classe che definisce una nuova proprietà di dipendenza personalizzata.</span><span class="sxs-lookup"><span data-stu-id="1577b-193">A class that adds an existing dependency property has the same responsibilities as far as exposing the object model for that dependency property as does a class that defines a new custom dependency property.</span></span> <span data-ttu-id="1577b-194">Il primo di questi membri da esporre è un campo dell'identificatore della proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="1577b-194">The first such member to expose is a dependency property identifier field.</span></span> <span data-ttu-id="1577b-195">Questo campo deve `public static readonly` essere <xref:System.Windows.DependencyProperty>un campo di tipo , <xref:System.Windows.DependencyProperty.AddOwner%2A> assegnato al valore restituito della chiamata.</span><span class="sxs-lookup"><span data-stu-id="1577b-195">This field should be a `public static readonly` field of type <xref:System.Windows.DependencyProperty>, which is assigned to the return value of the <xref:System.Windows.DependencyProperty.AddOwner%2A> call.</span></span> <span data-ttu-id="1577b-196">Il secondo membro da definire è la proprietà "wrapper" di Common Language Runtime (CLR).</span><span class="sxs-lookup"><span data-stu-id="1577b-196">The second member to define is the common language runtime (CLR) "wrapper" property.</span></span> <span data-ttu-id="1577b-197">Il wrapper rende molto più conveniente modificare la proprietà di <xref:System.Windows.DependencyObject.SetValue%2A> dipendenza nel codice (si evitano le chiamate a ogni volta e può effettuare tale chiamata solo una volta nel wrapper stesso).</span><span class="sxs-lookup"><span data-stu-id="1577b-197">The wrapper makes it much more convenient to manipulate your dependency property in code (you avoid calls to <xref:System.Windows.DependencyObject.SetValue%2A> each time, and can make that call only once in the wrapper itself).</span></span> <span data-ttu-id="1577b-198">Il wrapper viene implementato con la stessa procedura valida per i wrapper implementati nella registrazione di una proprietà di dipendenza personalizzata.</span><span class="sxs-lookup"><span data-stu-id="1577b-198">The wrapper is implemented identically to how it would be implemented if you were registering a custom dependency property.</span></span> <span data-ttu-id="1577b-199">Per altre informazioni sull'implementazione di una proprietà di dipendenza, vedere [Proprietà di dipendenza personalizzate](custom-dependency-properties.md) e [Aggiungere un tipo di proprietario per una proprietà di dipendenza](how-to-add-an-owner-type-for-a-dependency-property.md).</span><span class="sxs-lookup"><span data-stu-id="1577b-199">For more information about implementing a dependency property, see [Custom Dependency Properties](custom-dependency-properties.md) and [Add an Owner Type for a Dependency Property](how-to-add-an-owner-type-for-a-dependency-property.md).</span></span>  
  
#### <a name="addowner-and-attached-properties"></a><span data-ttu-id="1577b-200">AddOwner e proprietà associate</span><span class="sxs-lookup"><span data-stu-id="1577b-200">AddOwner and Attached Properties</span></span>  
 <span data-ttu-id="1577b-201">È possibile <xref:System.Windows.DependencyProperty.AddOwner%2A> chiamare una proprietà di dipendenza definita come proprietà associata dalla classe del proprietario.</span><span class="sxs-lookup"><span data-stu-id="1577b-201">You can call <xref:System.Windows.DependencyProperty.AddOwner%2A> for a dependency property that is defined as an attached property by the owner class.</span></span> <span data-ttu-id="1577b-202">In genere, questa operazione viene eseguita per esporre la proprietà precedentemente associata come proprietà di dipendenza non associata.</span><span class="sxs-lookup"><span data-stu-id="1577b-202">Generally the reason for doing this is to expose the previously attached property as a non-attached dependency property.</span></span> <span data-ttu-id="1577b-203">Il valore <xref:System.Windows.DependencyProperty.AddOwner%2A> restituito verrà quindi `public static readonly` esposto come campo da utilizzare come identificatore della proprietà di dipendenza e verrà definito le proprietà "wrapper" appropriate in modo che la proprietà venga visualizzata nella tabella dei membri e supporti un utilizzo della proprietà non associata nella classe.</span><span class="sxs-lookup"><span data-stu-id="1577b-203">You then will expose the <xref:System.Windows.DependencyProperty.AddOwner%2A> return value as a `public static readonly` field for use as the dependency property identifier, and will define appropriate "wrapper" properties so that the property appears in the members table and supports a non-attached property usage in your class.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1577b-204">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="1577b-204">See also</span></span>

- <xref:System.Windows.PropertyMetadata>
- <xref:System.Windows.DependencyObject>
- <xref:System.Windows.DependencyProperty>
- <xref:System.Windows.DependencyProperty.GetMetadata%2A>
- [<span data-ttu-id="1577b-205">Cenni preliminari sulle proprietà di dipendenza</span><span class="sxs-lookup"><span data-stu-id="1577b-205">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="1577b-206">Metadati delle proprietà del framework</span><span class="sxs-lookup"><span data-stu-id="1577b-206">Framework Property Metadata</span></span>](framework-property-metadata.md)
