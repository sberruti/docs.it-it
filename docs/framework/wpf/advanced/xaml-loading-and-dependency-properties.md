---
title: Caricamento XAML e proprietà di dipendenza
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- custom dependency properties [WPF]
- dependency properties [WPF], XAML loading and
- loading XML data [WPF]
ms.assetid: 6eea9f4e-45ce-413b-a266-f08238737bf2
ms.openlocfilehash: de8050e582f5b1a5a288c350c179cfa24fb5471c
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/12/2020
ms.locfileid: "79186246"
---
# <a name="xaml-loading-and-dependency-properties"></a><span data-ttu-id="d6ec1-102">Caricamento XAML e proprietà di dipendenza</span><span class="sxs-lookup"><span data-stu-id="d6ec1-102">XAML Loading and Dependency Properties</span></span>
<span data-ttu-id="d6ec1-103">L'implementazione [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] corrente del relativo processore [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] dipende implicitamente dalle proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="d6ec1-103">The current [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of its [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor is inherently dependency property aware.</span></span> <span data-ttu-id="d6ec1-104">Il [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processore utilizza i metodi del sistema [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] di proprietà per le proprietà di dipendenza durante il caricamento di attributi binari ed elaborando attributi che sono proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="d6ec1-104">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor uses property system methods for dependency properties when loading binary [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and processing attributes that are dependency properties.</span></span> <span data-ttu-id="d6ec1-105">Ciò consente di ignorare in modo efficace i wrapper della proprietà.</span><span class="sxs-lookup"><span data-stu-id="d6ec1-105">This effectively bypasses the property wrappers.</span></span> <span data-ttu-id="d6ec1-106">Quando si implementano proprietà di dipendenza personalizzate, è necessario tenere conto di questo comportamento <xref:System.Windows.DependencyObject.GetValue%2A> ed <xref:System.Windows.DependencyObject.SetValue%2A>evitare di inserire altro codice nel wrapper della proprietà diverso dai metodi del sistema di proprietà e .</span><span class="sxs-lookup"><span data-stu-id="d6ec1-106">When you implement custom dependency properties, you must account for this behavior and should avoid placing any other code in your property wrapper other than the property system methods <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A>.</span></span>  

<a name="prerequisites"></a>
## <a name="prerequisites"></a><span data-ttu-id="d6ec1-107">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="d6ec1-107">Prerequisites</span></span>  
 <span data-ttu-id="d6ec1-108">Questo argomento presuppone la conoscenza delle proprietà di dipendenza sia in qualità di consumer, sia in qualità di autore oltre alla lettura di [Cenni preliminari sulle proprietà di dipendenza](dependency-properties-overview.md) e [Proprietà Dependency personalizzate](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="d6ec1-108">This topic assumes that you understand dependency properties both as consumer and author and have read [Dependency Properties Overview](dependency-properties-overview.md) and [Custom Dependency Properties](custom-dependency-properties.md).</span></span> <span data-ttu-id="d6ec1-109">È inoltre necessario aver letto [Cenni preliminari su XAML (WPF)](../../../desktop-wpf/fundamentals/xaml.md) e [Descrizione dettagliata della sintassi XAML](xaml-syntax-in-detail.md).</span><span class="sxs-lookup"><span data-stu-id="d6ec1-109">You should also have read [XAML Overview (WPF)](../../../desktop-wpf/fundamentals/xaml.md) and [XAML Syntax In Detail](xaml-syntax-in-detail.md).</span></span>  
  
<a name="implementation"></a>
## <a name="the-wpf-xaml-loader-implementation-and-performance"></a><span data-ttu-id="d6ec1-110">Implementazione del caricatore XAML WPF e prestazioni</span><span class="sxs-lookup"><span data-stu-id="d6ec1-110">The WPF XAML Loader Implementation, and Performance</span></span>  
 <span data-ttu-id="d6ec1-111">Per motivi di implementazione, è meno costoso dal punto di vista <xref:System.Windows.DependencyObject.SetValue%2A> del calcolo identificare una proprietà come proprietà di dipendenza e accedere al metodo del sistema di proprietà per impostarla, anziché usare il wrapper della proprietà e il relativo setter.</span><span class="sxs-lookup"><span data-stu-id="d6ec1-111">For implementation reasons, it is computationally less expensive to identify a property as a dependency property and access the property system <xref:System.Windows.DependencyObject.SetValue%2A> method to set it, rather than using the property wrapper and its setter.</span></span> <span data-ttu-id="d6ec1-112">Ciò si verifica in quanto un processore [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] deve dedurre l'intero modello a oggetti del codice di supporto esclusivamente in base alla conoscenza delle relazioni tra tipi e membri indicate dalla struttura del markup e da varie stringhe.</span><span class="sxs-lookup"><span data-stu-id="d6ec1-112">This is because a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor must infer the entire object model of the backing code based only on knowing the type and member relationships that are indicated by the structure of the markup and various strings.</span></span>  
  
 <span data-ttu-id="d6ec1-113">Il tipo viene cercato tramite una combinazione di xmlns e attributi di assembly, ma identificando i membri, determinando quale potrebbe supportare l'impostazione come attributo e risolvendo i tipi supportati dai valori di proprietà altrimenti richiederebbe un'ampia reflection mediante <xref:System.Reflection.PropertyInfo>.</span><span class="sxs-lookup"><span data-stu-id="d6ec1-113">The type is looked up through a combination of xmlns and assembly attributes, but identifying the members, determining which could support being set as an attribute, and resolving what types the property values support would otherwise require extensive reflection using <xref:System.Reflection.PropertyInfo>.</span></span> <span data-ttu-id="d6ec1-114">Poiché le proprietà di dipendenza su un determinato tipo sono [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] accessibili [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] come tabella di archiviazione tramite il sistema di proprietà, l'implementazione <xref:System.Windows.DependencyObject> del processore utilizza questa tabella e deduce che qualsiasi proprietà *specificata ABC* può essere impostata in modo più efficiente chiamando <xref:System.Windows.DependencyObject.SetValue%2A> il tipo derivato contenitore, utilizzando l'identificatore della proprietà di dipendenza *ABCProperty*.</span><span class="sxs-lookup"><span data-stu-id="d6ec1-114">Because dependency properties on a given type are accessible as a storage table through the property system, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of its [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor uses this table and infers that any given property *ABC* can be more efficiently set by calling <xref:System.Windows.DependencyObject.SetValue%2A> on the containing <xref:System.Windows.DependencyObject> derived type, using the dependency property identifier *ABCProperty*.</span></span>  
  
<a name="implications"></a>
## <a name="implications-for-custom-dependency-properties"></a><span data-ttu-id="d6ec1-115">Implicazioni per le proprietà di dipendenza personalizzate</span><span class="sxs-lookup"><span data-stu-id="d6ec1-115">Implications for Custom Dependency Properties</span></span>  
 <span data-ttu-id="d6ec1-116">Poiché l'implementazione corrente [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] del comportamento del processore [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] per l'impostazione delle proprietà ignora completamente i wrapper, non è opportuno inserire logica aggiuntiva nelle definizioni stabilite del wrapper per la proprietà di dipendenza personalizzata.</span><span class="sxs-lookup"><span data-stu-id="d6ec1-116">Because the current [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor behavior for property setting bypasses the wrappers entirely, you should not put any additional logic into the set definitions of the wrapper for your custom dependency property.</span></span> <span data-ttu-id="d6ec1-117">Se si inserisce tale logica nella definizione stabilita, questa non sarà eseguita quando la proprietà viene impostata in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] piuttosto che nel codice.</span><span class="sxs-lookup"><span data-stu-id="d6ec1-117">If you put such logic in the set definition, then the logic will not be executed when the property is set in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] rather than in code.</span></span>  
  
 <span data-ttu-id="d6ec1-118">Analogamente, anche altri [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] aspetti del processore [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] che <xref:System.Windows.DependencyObject.GetValue%2A> ottengono valori di proprietà dall'elaborazione vengono utilizzati anziché il wrapper.</span><span class="sxs-lookup"><span data-stu-id="d6ec1-118">Similarly, other aspects of the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor that obtain property values from [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processing also use <xref:System.Windows.DependencyObject.GetValue%2A> rather than using the wrapper.</span></span> <span data-ttu-id="d6ec1-119">Pertanto, è inoltre necessario evitare `get` qualsiasi <xref:System.Windows.DependencyObject.GetValue%2A> implementazione aggiuntiva nella definizione oltre la chiamata.</span><span class="sxs-lookup"><span data-stu-id="d6ec1-119">Therefore, you should also avoid any additional implementation in the `get` definition beyond the <xref:System.Windows.DependencyObject.GetValue%2A> call.</span></span>  
  
 <span data-ttu-id="d6ec1-120">L'esempio seguente è una definizione di proprietà di dipendenza consigliata con wrapper, in cui l'identificatore `public` `static` `readonly` di proprietà viene archiviato come campo e le `get` definizioni e `set` non contengono codice oltre ai metodi del sistema di proprietà necessari che definiscono il backup della proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="d6ec1-120">The following example is a recommended dependency property definition with wrappers, where the property identifier is stored as a `public` `static` `readonly` field, and the `get` and `set` definitions contain no code beyond the necessary property system methods that define the dependency property backing.</span></span>  
  
 [!code-csharp[WPFAquariumSln#AGWithWrapper](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#agwithwrapper)]
 [!code-vb[WPFAquariumSln#AGWithWrapper](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#agwithwrapper)]  
  
## <a name="see-also"></a><span data-ttu-id="d6ec1-121">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="d6ec1-121">See also</span></span>

- [<span data-ttu-id="d6ec1-122">Cenni preliminari sulle proprietà di dipendenza</span><span class="sxs-lookup"><span data-stu-id="d6ec1-122">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="d6ec1-123">Panoramica di XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="d6ec1-123">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="d6ec1-124">Metadati della proprietà di dipendenza</span><span class="sxs-lookup"><span data-stu-id="d6ec1-124">Dependency Property Metadata</span></span>](dependency-property-metadata.md)
- [<span data-ttu-id="d6ec1-125">Proprietà di dipendenza di tipo raccolta</span><span class="sxs-lookup"><span data-stu-id="d6ec1-125">Collection-Type Dependency Properties</span></span>](collection-type-dependency-properties.md)
- [<span data-ttu-id="d6ec1-126">Sicurezza della proprietà di dipendenza</span><span class="sxs-lookup"><span data-stu-id="d6ec1-126">Dependency Property Security</span></span>](dependency-property-security.md)
- [<span data-ttu-id="d6ec1-127">Modelli di costruttore sicuri per DependencyObject</span><span class="sxs-lookup"><span data-stu-id="d6ec1-127">Safe Constructor Patterns for DependencyObjects</span></span>](safe-constructor-patterns-for-dependencyobjects.md)
