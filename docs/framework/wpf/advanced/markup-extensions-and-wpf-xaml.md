---
title: Estensioni di markup e XAML
ms.date: 03/30/2017
helpviewer_keywords:
- brace character [WPF]
- Binding markup extensions [WPF]
- RelativeSource markup extensions [WPF]
- XAML [WPF], markup extensions
- markup extensions [WPF]
- nesting extension syntax [WPF]
- curly brace characters ({})
- TemplateBinding markup extensions [WPF]
- StaticResource markup extensions [WPF]
- literal curly brace characters ({})
- characters [WPF], curly brace
- DynamicResource markup extensions [WPF]
ms.assetid: 618dc745-8b14-4886-833f-486d2254bb78
ms.openlocfilehash: f4134e9d0b26135d1bd6058ac9ed8941a9c6be34
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/24/2020
ms.locfileid: "76727892"
---
# <a name="markup-extensions-and-wpf-xaml"></a><span data-ttu-id="5067c-102">Estensioni di markup e XAML WPF</span><span class="sxs-lookup"><span data-stu-id="5067c-102">Markup Extensions and WPF XAML</span></span>
<span data-ttu-id="5067c-103">Questo argomento introduce le estensioni di markup per XAML, con informazioni sulle regole della sintassi, le finalità e il modello a oggetti di classe sottostante.</span><span class="sxs-lookup"><span data-stu-id="5067c-103">This topic introduces the concept of markup extensions for XAML, including their syntax rules, purpose, and the class object model that underlies them.</span></span> <span data-ttu-id="5067c-104">Le estensioni di markup sono una funzionalità generale del linguaggio XAML e dell'implementazione .NET di servizi XAML.</span><span class="sxs-lookup"><span data-stu-id="5067c-104">Markup extensions are a general feature of the XAML language and of the .NET implementation of XAML services.</span></span> <span data-ttu-id="5067c-105">Questo argomento descrive in particolare le estensioni di markup per l'uso in XAML WPF.</span><span class="sxs-lookup"><span data-stu-id="5067c-105">This topic specifically details markup extensions for use in WPF XAML.</span></span>  

<a name="XAML_Processors_and_Markup_Extensions"></a>   
## <a name="xaml-processors-and-markup-extensions"></a><span data-ttu-id="5067c-106">Processori XAML ed estensioni di markup</span><span class="sxs-lookup"><span data-stu-id="5067c-106">XAML Processors and Markup Extensions</span></span>  
 <span data-ttu-id="5067c-107">In generale, un parser XAML può interpretare un valore di attributo come stringa letterale che può essere convertita in tipo primitivo oppure può convertirlo in oggetto in qualche modo.</span><span class="sxs-lookup"><span data-stu-id="5067c-107">Generally speaking, a XAML parser can either interpret an attribute value as a literal string that can be converted to a primitive, or convert it to an object by some means.</span></span> <span data-ttu-id="5067c-108">Uno di questi modi consiste nel fare riferimento a un convertitore di tipi e viene descritto nell'argomento [Convertitori di tipi e XAML](typeconverters-and-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-108">One such means is by referencing a type converter; this is documented in the topic [TypeConverters and XAML](typeconverters-and-xaml.md).</span></span> <span data-ttu-id="5067c-109">In alcuni scenari, tuttavia, è necessario un comportamento diverso.</span><span class="sxs-lookup"><span data-stu-id="5067c-109">However, there are scenarios where different behavior is required.</span></span> <span data-ttu-id="5067c-110">Ad esempio, è possibile indicare a un processore XAML che un valore di un attributo non deve essere restituito come nuovo oggetto nell'oggetto grafico.</span><span class="sxs-lookup"><span data-stu-id="5067c-110">For example, a XAML processor can be instructed that a value of an attribute should not result in a new object in the object graph.</span></span> <span data-ttu-id="5067c-111">L'attributo deve invece essere restituito come oggetto grafico che crea un riferimento a un oggetto già costruito in un'altra parte dell'oggetto grafico o a un oggetto statico.</span><span class="sxs-lookup"><span data-stu-id="5067c-111">Instead, the attribute should result in an object graph that makes a reference to an already constructed object in another part of the graph, or a static object.</span></span> <span data-ttu-id="5067c-112">In base a un altro scenario è possibile richiedere a un processore XAML di usare una sintassi che fornisca argomenti non predefiniti al costruttore di un oggetto.</span><span class="sxs-lookup"><span data-stu-id="5067c-112">Another scenario is that a XAML processor can be instructed to use a syntax that provides non-default arguments to the constructor of an object.</span></span> <span data-ttu-id="5067c-113">In scenari di questi tipi un'estensione di markup può essere la soluzione.</span><span class="sxs-lookup"><span data-stu-id="5067c-113">These are the types of scenarios where a markup extension can provide the solution.</span></span>  
  
<a name="Basic_Markup_Extension_Syntax"></a>   
## <a name="basic-markup-extension-syntax"></a><span data-ttu-id="5067c-114">Sintassi delle estensioni di markup di base</span><span class="sxs-lookup"><span data-stu-id="5067c-114">Basic Markup Extension Syntax</span></span>  
 <span data-ttu-id="5067c-115">Un'estensione di markup può essere implementata per fornire valori per le proprietà in una sintassi di attributi, le proprietà in una sintassi di elementi proprietà o entrambe.</span><span class="sxs-lookup"><span data-stu-id="5067c-115">A markup extension can be implemented to provide values for properties in an attribute usage, properties in a property element usage, or both.</span></span>  
  
 <span data-ttu-id="5067c-116">Se usata per fornire un valore di attributo, la sintassi che distingue una sequenza di estensioni di markup per un processore XAML è la presenza delle parentesi graffe di apertura e chiusura ({ e }).</span><span class="sxs-lookup"><span data-stu-id="5067c-116">When used to provide an attribute value, the syntax that distinguishes a markup extension sequence to a XAML processor is the presence of the opening and closing curly braces ({ and }).</span></span> <span data-ttu-id="5067c-117">Il tipo di estensione di markup viene quindi identificato dal token di stringa immediatamente successivo alla parentesi graffa di apertura.</span><span class="sxs-lookup"><span data-stu-id="5067c-117">The type of markup extension is then identified by the string token immediately following the opening curly brace.</span></span>  
  
 <span data-ttu-id="5067c-118">Se usata nella sintassi di elementi proprietà, un'estensione di markup è visivamente identica a qualsiasi altro elemento usato per fornire il valore di un elemento proprietà: un elemento dichiarato XAML che fa riferimento alla classe dell'estensione di markup come elemento, racchiuso tra parentesi angolari (<>).</span><span class="sxs-lookup"><span data-stu-id="5067c-118">When used in property element syntax, a markup extension is visually the same as any other element used to provide a property element value: a XAML element declaration that references the markup extension class as an element, enclosed within angle brackets (<>).</span></span>  
  
<a name="XAML_Defined_Markup_Extensions"></a>   
## <a name="xaml-defined-markup-extensions"></a><span data-ttu-id="5067c-119">Estensioni di markup definite da XAML</span><span class="sxs-lookup"><span data-stu-id="5067c-119">XAML-Defined Markup Extensions</span></span>  
 <span data-ttu-id="5067c-120">Esistono diverse estensioni di markup non specifiche dell'implementazione WPF di XAML, ma che sono invece implementazioni di intrinseci o funzionalità di XAML come linguaggio.</span><span class="sxs-lookup"><span data-stu-id="5067c-120">Several markup extensions exist that are not specific to the WPF implementation of XAML, but are instead implementations of intrinsics or features of XAML as a language.</span></span> <span data-ttu-id="5067c-121">Queste estensioni di markup vengono implementate nell'assembly System.Xaml come parte dei servizi XAML generali di .NET Framework e sono incluse nello spazio dei nomi XAML del linguaggio XAML.</span><span class="sxs-lookup"><span data-stu-id="5067c-121">These markup extensions are implemented in the System.Xaml assembly as part of the general .NET Framework XAML services, and are within the XAML language XAML namespace.</span></span> <span data-ttu-id="5067c-122">In termini di utilizzo comune del markup, queste estensioni di markup sono in genere identificabili dal prefisso `x:` nella sintassi.</span><span class="sxs-lookup"><span data-stu-id="5067c-122">In terms of common markup usage, these markup extensions are typically identifiable by the `x:` prefix in the usage.</span></span> <span data-ttu-id="5067c-123">La classe di base <xref:System.Windows.Markup.MarkupExtension> (definita anche in System. Xaml) fornisce il modello che deve essere usato da tutte le estensioni di markup per supportare i reader XAML e i writer XAML, incluso in XAML WPF.</span><span class="sxs-lookup"><span data-stu-id="5067c-123">The <xref:System.Windows.Markup.MarkupExtension> base class (also defined in System.Xaml) provides the pattern that all markup extensions should use in order to be supported in XAML readers and XAML writers, including in WPF XAML.</span></span>  
  
- <span data-ttu-id="5067c-124">`x:Type` fornisce l'oggetto <xref:System.Type> per il tipo denominato.</span><span class="sxs-lookup"><span data-stu-id="5067c-124">`x:Type` supplies the <xref:System.Type> object for the named type.</span></span> <span data-ttu-id="5067c-125">Questa funzionalità viene usata più comunemente in stili e modelli.</span><span class="sxs-lookup"><span data-stu-id="5067c-125">This facility is used most frequently in styles and templates.</span></span> <span data-ttu-id="5067c-126">Per informazioni dettagliate, vedere [Estensione di markup x:Type](../../../desktop-wpf/xaml-services/xtype-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-126">For details, see [x:Type Markup Extension](../../../desktop-wpf/xaml-services/xtype-markup-extension.md).</span></span>  
  
- <span data-ttu-id="5067c-127">`x:Static` produce valori statici.</span><span class="sxs-lookup"><span data-stu-id="5067c-127">`x:Static` produces static values.</span></span> <span data-ttu-id="5067c-128">I valori provengono da entità di codice di tipo di valore che non sono direttamente il tipo del valore di una proprietà di destinazione, ma possono restituire tale tipo.</span><span class="sxs-lookup"><span data-stu-id="5067c-128">The values come from value-type code entities that are not directly the type of a target property's value, but can be evaluated to that type.</span></span> <span data-ttu-id="5067c-129">Per informazioni dettagliate, vedere [Estensione di markup x:Static](../../../desktop-wpf/xaml-services/xstatic-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-129">For details, see [x:Static Markup Extension](../../../desktop-wpf/xaml-services/xstatic-markup-extension.md).</span></span>  
  
- <span data-ttu-id="5067c-130">`x:Null` specifica `null` come valore per una proprietà e può essere usata per attributi o valori di elementi proprietà.</span><span class="sxs-lookup"><span data-stu-id="5067c-130">`x:Null` specifies `null` as a value for a property and can be used either for attributes or property element values.</span></span> <span data-ttu-id="5067c-131">Per informazioni dettagliate, vedere [Estensione di markup x:Null](../../../desktop-wpf/xaml-services/xnull-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-131">For details, see [x:Null Markup Extension](../../../desktop-wpf/xaml-services/xnull-markup-extension.md).</span></span>  
  
- <span data-ttu-id="5067c-132">`x:Array` supporta la creazione di matrici generali nella sintassi XAML nei casi in cui si sceglie intenzionalmente di non usare il supporto delle raccolte fornito dagli elementi di base e dai modelli di controllo di WPF.</span><span class="sxs-lookup"><span data-stu-id="5067c-132">`x:Array` provides support for creation of general arrays in XAML syntax, for cases where the collection support provided by WPF base elements and control models is deliberately not used.</span></span> <span data-ttu-id="5067c-133">Per informazioni dettagliate, vedere [Estensione di markup x:Array](../../../desktop-wpf/xaml-services/xarray-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-133">For details, see [x:Array Markup Extension](../../../desktop-wpf/xaml-services/xarray-markup-extension.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5067c-134">Il prefisso `x:` viene usato per il mapping dello spazio dei nomi XAML tipico degli intrinseci del linguaggio XAML, nell'elemento radice di un file o una produzione XAML.</span><span class="sxs-lookup"><span data-stu-id="5067c-134">The `x:` prefix is used for the typical XAML namespace mapping of the XAML language intrinsics, in the root element of a XAML file or production.</span></span> <span data-ttu-id="5067c-135">Ad esempio, i modelli di Visual Studio per le applicazioni WPF avviano un file XAML utilizzando questo mapping `x:`.</span><span class="sxs-lookup"><span data-stu-id="5067c-135">For example, the Visual Studio templates for WPF applications initiate a XAML file using this `x:` mapping.</span></span> <span data-ttu-id="5067c-136">Nel mapping dello spazio dei nomi XAML personalizzato è possibile scegliere un token di prefisso diverso. Tuttavia, per identificare le entità che rappresentano una parte definita dello spazio dei nomi XAML per il linguaggio XAML, questa documentazione usa il mapping `x:` predefinito anziché lo spazio dei nomi WPF predefinito o altri spazi dei nomi XAML non correlati a un framework specifico.</span><span class="sxs-lookup"><span data-stu-id="5067c-136">You could choose a different prefix token in your own XAML namespace mapping, but this documentation will assume the default `x:` mapping as a means of identifying those entities that are a defined part of the XAML namespace for the XAML language, as opposed to the WPF default namespace or other XAML namespaces not related to a specific framework.</span></span>  
  
<a name="WPF_Specific_Markup_Extensions"></a>   
## <a name="wpf-specific-markup-extensions"></a><span data-ttu-id="5067c-137">Estensioni di markup specifiche di WPF</span><span class="sxs-lookup"><span data-stu-id="5067c-137">WPF-Specific Markup Extensions</span></span>  
 <span data-ttu-id="5067c-138">Le estensioni di markup più comuni usate nella programmazione WPF sono quelle che supportano i riferimenti a risorse (`StaticResource` e `DynamicResource`) e quelli che supportano il data binding (`Binding`).</span><span class="sxs-lookup"><span data-stu-id="5067c-138">The most common markup extensions used in WPF programming are those that support resource references (`StaticResource` and `DynamicResource`), and those that support data binding (`Binding`).</span></span>  
  
- <span data-ttu-id="5067c-139">`StaticResource` fornisce un valore per una proprietà sostituendo il valore di una risorsa già definita.</span><span class="sxs-lookup"><span data-stu-id="5067c-139">`StaticResource` provides a value for a property by substituting the value of an already defined resource.</span></span> <span data-ttu-id="5067c-140">Una valutazione di `StaticResource` viene infine eseguita in fase di caricamento XAML e non ha accesso all'oggetto grafico in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="5067c-140">A `StaticResource` evaluation is ultimately made at XAML load time and does not have access to the object graph at run time.</span></span> <span data-ttu-id="5067c-141">Per informazioni dettagliate, vedere [Estensione di markup StaticResource](staticresource-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-141">For details, see [StaticResource Markup Extension](staticresource-markup-extension.md).</span></span>  
  
- <span data-ttu-id="5067c-142">`DynamicResource` fornisce un valore per una proprietà rinviando il valore come riferimento in fase di esecuzione a una risorsa.</span><span class="sxs-lookup"><span data-stu-id="5067c-142">`DynamicResource` provides a value for a property by deferring that value to be a run-time reference to a resource.</span></span> <span data-ttu-id="5067c-143">Il riferimento a una risorsa dinamica forza una nuova ricerca ogni volta che si accede a tale risorsa e che la risorsa ha accesso all'oggetto grafico in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="5067c-143">A dynamic resource reference forces a new lookup each time that such a resource is accessed and has access to the object graph at run time.</span></span> <span data-ttu-id="5067c-144">Per ottenere questo accesso, il concetto di `DynamicResource` è supportato da proprietà di dipendenza nel sistema di proprietà WPF e da espressioni valutate.</span><span class="sxs-lookup"><span data-stu-id="5067c-144">In order to get this access, `DynamicResource` concept is supported by dependency properties in the WPF property system, and evaluated expressions.</span></span> <span data-ttu-id="5067c-145">Di conseguenza, è possibile usare `DynamicResource` solo per la destinazione di una proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="5067c-145">Therefore you can only use `DynamicResource` for a dependency property target.</span></span> <span data-ttu-id="5067c-146">Per informazioni dettagliate, vedere [Estensione di markup DynamicResource](dynamicresource-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-146">For details, see [DynamicResource Markup Extension](dynamicresource-markup-extension.md).</span></span>  
  
- <span data-ttu-id="5067c-147">`Binding` fornisce un valore di data binding per una proprietà, usando il contesto dei dati valido per l'oggetto padre in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="5067c-147">`Binding` provides a data bound value for a property, using the data context that applies to the parent object at run time.</span></span> <span data-ttu-id="5067c-148">Questa estensione di markup è relativamente complessa, perché permette una sintassi inline sostanziale per specificare un data binding.</span><span class="sxs-lookup"><span data-stu-id="5067c-148">This markup extension is relatively complex, because it enables a substantial inline syntax for specifying a data binding.</span></span> <span data-ttu-id="5067c-149">Per informazioni dettagliate, vedere [Estensione di markup Binding](binding-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-149">For details, see [Binding Markup Extension](binding-markup-extension.md).</span></span>  
  
- <span data-ttu-id="5067c-150">`RelativeSource` fornisce informazioni sull'origine per un <xref:System.Windows.Data.Binding> in grado di spostarsi tra più possibili relazioni nell'albero degli oggetti di run-time.</span><span class="sxs-lookup"><span data-stu-id="5067c-150">`RelativeSource` provides source information for a <xref:System.Windows.Data.Binding> that can navigate several possible relationships in the run-time object tree.</span></span> <span data-ttu-id="5067c-151">In questo modo, si ottengono origini specializzate per i binding creati in modelli multiuso o creati nel codice senza una completa conoscenza dell'albero di oggetti circostante.</span><span class="sxs-lookup"><span data-stu-id="5067c-151">This provides specialized sourcing for bindings that are created in multi-use templates or created in code without full knowledge of the surrounding object tree.</span></span> <span data-ttu-id="5067c-152">Per informazioni dettagliate, vedere [Estensione di markup RelativeSource](relativesource-markupextension.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-152">For details, see [RelativeSource MarkupExtension](relativesource-markupextension.md).</span></span>  
  
- <span data-ttu-id="5067c-153">`TemplateBinding` permette a un modello di controllo di usare valori per proprietà basate su modelli provenienti da proprietà definite da modelli a oggetti della classe che userà il modello.</span><span class="sxs-lookup"><span data-stu-id="5067c-153">`TemplateBinding` enables a control template to use values for templated properties that come from object-model-defined properties of the class that will use the template.</span></span> <span data-ttu-id="5067c-154">In altri termini, la proprietà all'interno della definizione del modello può accedere a un contesto che esiste solo dopo l'applicazione del modello.</span><span class="sxs-lookup"><span data-stu-id="5067c-154">In other words, the property within the template definition can access a context that only exists once the template is applied.</span></span> <span data-ttu-id="5067c-155">Per informazioni dettagliate, vedere [Estensione di markup TemplateBinding](templatebinding-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-155">For details, see [TemplateBinding Markup Extension](templatebinding-markup-extension.md).</span></span> <span data-ttu-id="5067c-156">Per altre informazioni sull'uso pratico di `TemplateBinding`, vedere [Applicazione di stili con l'esempio di ControlTemplates](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating).</span><span class="sxs-lookup"><span data-stu-id="5067c-156">For more information on the practical use of `TemplateBinding`, see [Styling with ControlTemplates Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating).</span></span>  
  
- <span data-ttu-id="5067c-157">`ColorConvertedBitmap` supporta uno scenario di creazione di immagini relativamente avanzato.</span><span class="sxs-lookup"><span data-stu-id="5067c-157">`ColorConvertedBitmap` supports a relatively advanced imaging scenario.</span></span> <span data-ttu-id="5067c-158">Per informazioni dettagliate, vedere [Estensione di markup ColorConvertedBitmap](colorconvertedbitmap-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-158">For details, see [ColorConvertedBitmap Markup Extension](colorconvertedbitmap-markup-extension.md).</span></span>  
  
- <span data-ttu-id="5067c-159">`ComponentResourceKey` e `ThemeDictionary` supportano alcuni aspetti della ricerca di risorse, in particolare per risorse e temi che contengono controlli personalizzati.</span><span class="sxs-lookup"><span data-stu-id="5067c-159">`ComponentResourceKey` and `ThemeDictionary` support aspects of resource lookup, particularly for resources and themes that are packaged with custom controls.</span></span> <span data-ttu-id="5067c-160">Per altre informazioni, vedere [Estensione di markup ComponentResourceKey](componentresourcekey-markup-extension.md), [Estensione di markup ThemeDictionary](themedictionary-markup-extension.md) o [Panoramica della creazione di controlli](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-160">For more information, see [ComponentResourceKey Markup Extension](componentresourcekey-markup-extension.md), [ThemeDictionary Markup Extension](themedictionary-markup-extension.md), or [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>  
  
<a name="StarExtension"></a>   
## <a name="extension-classes"></a><span data-ttu-id="5067c-161">Classi di estensione \*</span><span class="sxs-lookup"><span data-stu-id="5067c-161">\*Extension Classes</span></span>  
 <span data-ttu-id="5067c-162">Per il linguaggio XAML generale e per le estensioni di markup specifiche di WPF, il comportamento di ogni estensione di markup viene identificato a un processore XAML tramite una classe `*Extension` che deriva da <xref:System.Windows.Markup.MarkupExtension>e fornisce un'implementazione del metodo <xref:System.Windows.Markup.StaticExtension.ProvideValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="5067c-162">For both the general XAML language and WPF-specific markup extensions, the behavior of each markup extension is identified to a XAML processor through a `*Extension` class that derives from <xref:System.Windows.Markup.MarkupExtension>, and provides an implementation of the <xref:System.Windows.Markup.StaticExtension.ProvideValue%2A> method.</span></span> <span data-ttu-id="5067c-163">Questo metodo in ogni estensione fornisce l'oggetto restituito quando viene valutata l'estensione di markup.</span><span class="sxs-lookup"><span data-stu-id="5067c-163">This method on each extension provides the object that is returned when the markup extension is evaluated.</span></span> <span data-ttu-id="5067c-164">L'oggetto restituito viene in genere valutato in base ai diversi token di stringa passati all'estensione di markup.</span><span class="sxs-lookup"><span data-stu-id="5067c-164">The returned object is typically evaluated based on the various string tokens that are passed to the markup extension.</span></span>  
  
 <span data-ttu-id="5067c-165">Ad esempio, la classe <xref:System.Windows.StaticResourceExtension> fornisce l'implementazione della superficie di ricerca effettiva della risorsa in modo che la relativa implementazione di <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> restituisca l'oggetto richiesto, con l'input di quell'implementazione particolare è una stringa utilizzata per cercare la risorsa in base alla relativa `x:Key`.</span><span class="sxs-lookup"><span data-stu-id="5067c-165">For example, the <xref:System.Windows.StaticResourceExtension> class provides the surface implementation of actual resource lookup so that its <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> implementation returns the object that is requested, with the input of that particular implementation being a string that is used to look up the resource by its `x:Key`.</span></span> <span data-ttu-id="5067c-166">Molti dei dettagli di questa implementazione sono irrilevanti se si usa un'estensione di markup esistente.</span><span class="sxs-lookup"><span data-stu-id="5067c-166">Much of this implementation detail is unimportant if you are using an existing markup extension.</span></span>  
  
 <span data-ttu-id="5067c-167">Alcune estensioni di markup non usano argomenti dei token di stringa.</span><span class="sxs-lookup"><span data-stu-id="5067c-167">Some markup extensions do not use string token arguments.</span></span> <span data-ttu-id="5067c-168">Il motivo è che restituiscono un valore statico o coerente oppure perché il contesto per il valore da restituire è disponibile tramite uno dei servizi passati tramite il parametro `serviceProvider`.</span><span class="sxs-lookup"><span data-stu-id="5067c-168">This is either because they return a static or consistent value, or because context for what value should be returned is available through one of the services passed through the `serviceProvider` parameter.</span></span>  
  
 <span data-ttu-id="5067c-169">Il criterio di denominazione `*Extension` ha scopi di praticità e coerenza.</span><span class="sxs-lookup"><span data-stu-id="5067c-169">The `*Extension` naming pattern is for convenience and consistency.</span></span> <span data-ttu-id="5067c-170">Non è necessario perché un processore XAML identifichi la classe come supporto per un'estensione di markup.</span><span class="sxs-lookup"><span data-stu-id="5067c-170">It is not necessary in order for a XAML processor to identify that class as support for a markup extension.</span></span> <span data-ttu-id="5067c-171">Finché la codebase include System. XAML e USA .NET Framework implementazioni dei servizi XAML, tutto ciò che è necessario riconoscere come estensione di markup XAML consiste nel derivare da <xref:System.Windows.Markup.MarkupExtension> e supportare una sintassi di costruzione.</span><span class="sxs-lookup"><span data-stu-id="5067c-171">So long as your codebase includes System.Xaml and uses .NET Framework XAML Services implementations, all that is necessary to be recognized as a XAML markup extension is to derive from <xref:System.Windows.Markup.MarkupExtension> and to support a construction syntax.</span></span> <span data-ttu-id="5067c-172">WPF definisce le classi abilitate per l'estensione di markup che non seguono il modello di denominazione `*Extension`, ad esempio <xref:System.Windows.Data.Binding>.</span><span class="sxs-lookup"><span data-stu-id="5067c-172">WPF defines markup extension-enabling classes that do not follow the `*Extension` naming pattern, for example <xref:System.Windows.Data.Binding>.</span></span> <span data-ttu-id="5067c-173">In genere il motivo è che la classe supporta scenari che vanno oltre il puro supporto delle estensioni di markup.</span><span class="sxs-lookup"><span data-stu-id="5067c-173">Typically the reason for this is that the class supports scenarios beyond pure markup extension support.</span></span> <span data-ttu-id="5067c-174">Nel caso di <xref:System.Windows.Data.Binding>, tale classe supporta l'accesso in fase di esecuzione ai metodi e alle proprietà dell'oggetto per gli scenari che non hanno nulla a che fare con XAML.</span><span class="sxs-lookup"><span data-stu-id="5067c-174">In the case of <xref:System.Windows.Data.Binding>, that class supports run-time access to methods and properties of the object for scenarios that have nothing to do with XAML.</span></span>  
  
### <a name="extension-class-interpretation-of-initialization-text"></a><span data-ttu-id="5067c-175">Interpretazione del testo di inizializzazione da parte delle classi delle estensioni</span><span class="sxs-lookup"><span data-stu-id="5067c-175">Extension Class Interpretation of Initialization Text</span></span>  
 <span data-ttu-id="5067c-176">I token di stringa che seguono il nome dell'estensione di markup e ancora racchiuse tra parentesi graffe vengono interpretati da un processore XAML in uno dei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="5067c-176">The string tokens following the markup extension name and still within the braces are interpreted by a XAML processor in one of the following ways:</span></span>  
  
- <span data-ttu-id="5067c-177">Una virgola rappresenta sempre il separatore o il delimitatore di singoli token.</span><span class="sxs-lookup"><span data-stu-id="5067c-177">A comma always represents the separator or delimiter of individual tokens.</span></span>  
  
- <span data-ttu-id="5067c-178">Se i singoli token separati non contengono segni di uguale, ogni token viene considerato un argomento del costruttore.</span><span class="sxs-lookup"><span data-stu-id="5067c-178">If the individual separated tokens do not contain any equals signs, each token is treated as a constructor argument.</span></span> <span data-ttu-id="5067c-179">Ogni parametro del costruttore deve essere specificato come tipo previsto dalla firma e nell'ordine corretto previsto dalla firma.</span><span class="sxs-lookup"><span data-stu-id="5067c-179">Each constructor parameter must be given as the type expected by that signature, and in the proper order expected by that signature.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="5067c-180">Un processore XAML deve chiamare il costruttore corrispondente al conteggio di argomenti del numero di coppie.</span><span class="sxs-lookup"><span data-stu-id="5067c-180">A XAML processor must call the constructor that matches the argument count of the number of pairs.</span></span> <span data-ttu-id="5067c-181">Per questo motivo, se si implementa un'estensione di markup personalizzata, non fornire più costruttori con lo stesso numero di argomenti.</span><span class="sxs-lookup"><span data-stu-id="5067c-181">For this reason, if you are implementing a custom markup extension, do not provide multiple constructors with the same argument count.</span></span> <span data-ttu-id="5067c-182">Il comportamento di un processore XAML se sono presenti più percorsi del costruttore dell'espressione di markup con lo stesso parametro è indefinito, ma è bene aspettarsi che a un processore XAML è consentito generare un'eccezione sull'utilizzo in presenza di questa situazione nelle definizioni dei tipi di estensione di markup.</span><span class="sxs-lookup"><span data-stu-id="5067c-182">The behavior for how a XAML processor behaves if more than one markup extension constructor path with the same parameter count exists is not defined, but you should anticipate that a XAML processor is permitted to throw an exception on usage if this situation exists in the markup extension type definitions.</span></span>  
  
- <span data-ttu-id="5067c-183">Se i singoli token separati contengono segni di uguale, un processore XAML chiama prima di tutto il costruttore senza parametri per l'estensione di markup.</span><span class="sxs-lookup"><span data-stu-id="5067c-183">If the individual separated tokens contain equals signs, then a XAML processor first calls the parameterless constructor for the markup extension.</span></span> <span data-ttu-id="5067c-184">Quindi, ogni coppia nome=valore viene interpretata come nome di una proprietà presente nell'estensione di markup e come valore da assegnare alla proprietà.</span><span class="sxs-lookup"><span data-stu-id="5067c-184">Then, each name=value pair is interpreted as a property name that exists on the markup extension, and a value to assign to that property.</span></span>  
  
- <span data-ttu-id="5067c-185">In presenza di un risultato parallelo tra il comportamento del costruttore e il comportamento di impostazione delle proprietà in un'estensione di markup, il comportamento usato non è importante.</span><span class="sxs-lookup"><span data-stu-id="5067c-185">If there is a parallel result between the constructor behavior and the property setting behavior in a markup extension, it does not matter which behavior you use.</span></span> <span data-ttu-id="5067c-186">È prassi più comune usare le coppie *proprietà*`=`*valore* per le estensioni di markup che includono più di una proprietà impostabile, anche solo perché questo comportamento rende il markup più intenzionale e riduce la probabilità di trasporre accidentalmente i parametri del costruttore.</span><span class="sxs-lookup"><span data-stu-id="5067c-186">It is more common usage to use the *property*`=`*value* pairs for markup extensions that have more than one settable property, if only because it makes your markup more intentional and you are less likely to accidentally transpose constructor parameters.</span></span> <span data-ttu-id="5067c-187">Quando si specificano le coppie proprietà = valore, queste proprietà possono essere in qualsiasi ordine. Inoltre, non vi è alcuna garanzia che un'estensione di markup fornisca un parametro del costruttore che imposta tutte le proprietà impostabili.</span><span class="sxs-lookup"><span data-stu-id="5067c-187">(When you specify property=value pairs, those properties may be in any order.) Also, there is no guarantee that a markup extension supplies a constructor parameter that sets every one of its settable properties.</span></span> <span data-ttu-id="5067c-188">Ad esempio, <xref:System.Windows.Data.Binding> è un'estensione di markup, con molte proprietà che possono essere impostate tramite l'estensione nel formato`=`*valore* della *proprietà* , ma <xref:System.Windows.Data.Binding> supporta solo due costruttori, ovvero un costruttore senza parametri e uno che imposta un percorso iniziale.</span><span class="sxs-lookup"><span data-stu-id="5067c-188">For example, <xref:System.Windows.Data.Binding> is a markup extension, with many properties that are settable through the extension in *property*`=`*value* form, but <xref:System.Windows.Data.Binding> only supports two constructors: a parameterless constructor, and one that sets an initial path.</span></span>  
  
- <span data-ttu-id="5067c-189">Una virgola letterale non può essere passata a un'estensione di markup senza sequenza di escape.</span><span class="sxs-lookup"><span data-stu-id="5067c-189">A literal comma cannot be passed to a markup extension without escapement.</span></span>  
  
<a name="EscapeSequences"></a>   
## <a name="escape-sequences-and-markup-extensions"></a><span data-ttu-id="5067c-190">Sequenze di escape ed estensioni di markup</span><span class="sxs-lookup"><span data-stu-id="5067c-190">Escape Sequences and Markup Extensions</span></span>  
 <span data-ttu-id="5067c-191">La gestione degli attributi in un processore XAML usa le parentesi graffe come indicatori di una sequenza di estensioni di markup.</span><span class="sxs-lookup"><span data-stu-id="5067c-191">Attribute handling in a XAML processor uses the curly braces as indicators of a markup extension sequence.</span></span> <span data-ttu-id="5067c-192">È anche possibile produrre un valore di attributo di un carattere di parentesi graffa letterale se necessario, ma immettendo una sequenza di escape tramite una coppia di parentesi graffe vuote seguita dalla parentesi graffa letterale.</span><span class="sxs-lookup"><span data-stu-id="5067c-192">It is also possible to produce a literal curly brace character attribute value if necessary, by entering an escape sequence using an empty curly brace pair followed by the literal curly brace.</span></span> <span data-ttu-id="5067c-193">Vedere [{} sequenza di escape-estensione di markup](../../../desktop-wpf/xaml-services/escape-sequence-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="5067c-193">See [{} Escape Sequence - Markup Extension](../../../desktop-wpf/xaml-services/escape-sequence-markup-extension.md).</span></span>  
  
<a name="Nesting"></a>   
## <a name="nesting-markup-extensions-in-xaml-usage"></a><span data-ttu-id="5067c-194">Annidamento di estensioni di markup nella sintassi XAML</span><span class="sxs-lookup"><span data-stu-id="5067c-194">Nesting Markup Extensions in XAML Usage</span></span>  
 <span data-ttu-id="5067c-195">L'annidamento di più estensioni di markup è supportato e viene valutata per prima l'estensione di markup a livello più profondo.</span><span class="sxs-lookup"><span data-stu-id="5067c-195">Nesting of multiple markup extensions is supported, and each markup extension will be evaluated deepest first.</span></span> <span data-ttu-id="5067c-196">Ad esempio, si consideri la sintassi seguente:</span><span class="sxs-lookup"><span data-stu-id="5067c-196">For example, consider the following usage:</span></span>  
  
```xaml  
<Setter Property="Background"  
  Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />  
```  
  
 <span data-ttu-id="5067c-197">In questa sintassi l'istruzione `x:Static` viene valutata per prima e restituisce una stringa.</span><span class="sxs-lookup"><span data-stu-id="5067c-197">In this usage, the `x:Static` statement is evaluated first and returns a string.</span></span> <span data-ttu-id="5067c-198">Questa stringa viene quindi usata come argomento per `DynamicResource`.</span><span class="sxs-lookup"><span data-stu-id="5067c-198">That string is then used as the argument for `DynamicResource`.</span></span>  
  
## <a name="markup-extensions-and-property-element-syntax"></a><span data-ttu-id="5067c-199">Estensioni di markup e sintassi di elementi proprietà</span><span class="sxs-lookup"><span data-stu-id="5067c-199">Markup Extensions and Property Element Syntax</span></span>  
 <span data-ttu-id="5067c-200">Se usata come elemento oggetto che immette un valore di elemento proprietà, la classe di un'estensione di markup è visivamente indistinguibile da un tipico elemento oggetto supportato da tipi che può essere usato in XAML.</span><span class="sxs-lookup"><span data-stu-id="5067c-200">When used as an object element that fills a property element value, a markup extension class is visually indistinguishable from a typical type-backed object element that can be used in XAML.</span></span> <span data-ttu-id="5067c-201">La differenza pratica tra un elemento oggetto tipico e un'estensione di markup è che l'estensione di markup restituisce un valore tipizzato o viene rinviata come espressione.</span><span class="sxs-lookup"><span data-stu-id="5067c-201">The practical difference between a typical object element and a markup extension is that the markup extension is either evaluated to a typed value or deferred as an expression.</span></span> <span data-ttu-id="5067c-202">Di conseguenza, i meccanismi per tutti i possibili errori di tipo dei valori di proprietà per l'estensione di markup differiranno, analogamente a come viene gestita una proprietà di data binding in altri modelli di programmazione.</span><span class="sxs-lookup"><span data-stu-id="5067c-202">Therefore the mechanisms for any possible type errors of property values for the markup extension will be different, similar to how a late-bound property is treated in other programming models.</span></span> <span data-ttu-id="5067c-203">Un elemento oggetto comune viene valutato per la corrispondenza dei tipi rispetto alla proprietà di destinazione impostata durante l'analisi del codice XAML.</span><span class="sxs-lookup"><span data-stu-id="5067c-203">An ordinary object element will be evaluated for type match against the target property it is setting when the XAML is parsed.</span></span>  
  
 <span data-ttu-id="5067c-204">La maggior parte delle estensioni di markup, se usate nella sintassi di elementi oggetto per immettere un elemento proprietà, non avrà contenuto né ulteriore sintassi di elementi proprietà al suo interno.</span><span class="sxs-lookup"><span data-stu-id="5067c-204">Most markup extensions, when used in object element syntax to fill a property element, would not have content or any further property element syntax within.</span></span> <span data-ttu-id="5067c-205">In questo modo, è necessario chiudere il tag dell'elemento oggetto, senza fornire elementi figlio.</span><span class="sxs-lookup"><span data-stu-id="5067c-205">Thus you would close the object element tag, and provide no child elements.</span></span> <span data-ttu-id="5067c-206">Ogni volta che un elemento oggetto viene rilevato da un processore XAML, viene chiamato il costruttore per la classe, che crea un'istanza dell'oggetto creato dall'elemento analizzato.</span><span class="sxs-lookup"><span data-stu-id="5067c-206">Whenever any object element is encountered by a XAML processor, the constructor for that class is called, which instantiates the object created from the parsed element.</span></span> <span data-ttu-id="5067c-207">Una classe dell'estensione di markup non è diversa: se si desidera che l'estensione di markup sia utilizzabile nella sintassi dell'elemento oggetto, è necessario fornire un costruttore senza parametri.</span><span class="sxs-lookup"><span data-stu-id="5067c-207">A markup extension class is no different: if you want your markup extension to be usable in object element syntax, you must provide a parameterless constructor.</span></span> <span data-ttu-id="5067c-208">Alcune estensioni di markup esistenti hanno almeno un valore di proprietà obbligatorio che deve essere specificato ai fini dell'inizializzazione corretta.</span><span class="sxs-lookup"><span data-stu-id="5067c-208">Some existing markup extensions have at least one required property value that must be specified for effective initialization.</span></span> <span data-ttu-id="5067c-209">In questo caso, il valore di proprietà viene in genere specificato come attributo della proprietà nell'elemento oggetto.</span><span class="sxs-lookup"><span data-stu-id="5067c-209">If so, that property value is typically given as a property attribute on the object element.</span></span> <span data-ttu-id="5067c-210">Nelle pagine di riferimento [Funzionalità del linguaggio dello spazio dei nomi XAML (x:)](../../../desktop-wpf/xaml-services/namespace-language-features.md) e [Estensioni XAML WPF](wpf-xaml-extensions.md) verranno indicate le estensioni di markup che includono proprietà obbligatorie, insieme ai nomi delle proprietà obbligatorie.</span><span class="sxs-lookup"><span data-stu-id="5067c-210">In the [XAML Namespace (x:) Language Features](../../../desktop-wpf/xaml-services/namespace-language-features.md) and [WPF XAML Extensions](wpf-xaml-extensions.md) reference pages, markup extensions that have required properties (and the names of required properties) will be noted.</span></span> <span data-ttu-id="5067c-211">Le pagine di riferimento indicano anche se la sintassi degli elementi oggetto o degli attributi non è consentita per una determinata estensione di markup.</span><span class="sxs-lookup"><span data-stu-id="5067c-211">Reference pages will also note if either object element syntax or attribute syntax is disallowed for particular markup extensions.</span></span> <span data-ttu-id="5067c-212">Un caso interessante riguarda l'[estensione di markup x:Array](../../../desktop-wpf/xaml-services/xarray-markup-extension.md), che non può supportare la sintassi di attributi perché il contenuto della matrice deve essere specificata all'interno dei tag come contenuto.</span><span class="sxs-lookup"><span data-stu-id="5067c-212">A notable case is [x:Array Markup Extension](../../../desktop-wpf/xaml-services/xarray-markup-extension.md), which cannot support attribute syntax because the contents of that array must be specified within the tagging as content.</span></span> <span data-ttu-id="5067c-213">Poiché i contenuti della matrice vengono gestiti come oggetti generali, non è possibile usare alcun convertitore di tipi predefiniti per l'attributo.</span><span class="sxs-lookup"><span data-stu-id="5067c-213">The array contents are handled as general objects, therefore no default type converter for the attribute is feasible.</span></span> <span data-ttu-id="5067c-214">Inoltre, l'[estensione di markup x:Array](../../../desktop-wpf/xaml-services/xarray-markup-extension.md) richiede un parametro `type`.</span><span class="sxs-lookup"><span data-stu-id="5067c-214">Also, [x:Array Markup Extension](../../../desktop-wpf/xaml-services/xarray-markup-extension.md) requires a `type` parameter.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5067c-215">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="5067c-215">See also</span></span>

- [<span data-ttu-id="5067c-216">Panoramica di XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="5067c-216">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="5067c-217">Funzionalità del linguaggio dello spazio dei nomi XAML (x:)</span><span class="sxs-lookup"><span data-stu-id="5067c-217">XAML Namespace (x:) Language Features</span></span>](../../../desktop-wpf/xaml-services/namespace-language-features.md)
- [<span data-ttu-id="5067c-218">Estensioni XAML WPF</span><span class="sxs-lookup"><span data-stu-id="5067c-218">WPF XAML Extensions</span></span>](wpf-xaml-extensions.md)
- [<span data-ttu-id="5067c-219">Estensione di markup StaticResource</span><span class="sxs-lookup"><span data-stu-id="5067c-219">StaticResource Markup Extension</span></span>](staticresource-markup-extension.md)
- [<span data-ttu-id="5067c-220">Estensione di markup Binding</span><span class="sxs-lookup"><span data-stu-id="5067c-220">Binding Markup Extension</span></span>](binding-markup-extension.md)
- [<span data-ttu-id="5067c-221">Estensione del markup DynamicResource</span><span class="sxs-lookup"><span data-stu-id="5067c-221">DynamicResource Markup Extension</span></span>](dynamicresource-markup-extension.md)
- [<span data-ttu-id="5067c-222">Estensione di markup x:Type</span><span class="sxs-lookup"><span data-stu-id="5067c-222">x:Type Markup Extension</span></span>](../../../desktop-wpf/xaml-services/xtype-markup-extension.md)
