---
title: Protezione del codice wrapper
ms.date: 03/30/2017
helpviewer_keywords:
- security [.NET Framework], wrapper code
- wrapper code, securing
- secure coding, wrapper code
- code security, wrapper code
ms.assetid: 1df6c516-5bba-48bd-b450-1070e04b7389
ms.openlocfilehash: 3d38a4d4fd33798cf5987f5ce67305725ad9daec
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/14/2020
ms.locfileid: "79399910"
---
# <a name="securing-wrapper-code"></a><span data-ttu-id="57b48-102">Protezione del codice wrapper</span><span class="sxs-lookup"><span data-stu-id="57b48-102">Securing Wrapper Code</span></span>
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
 <span data-ttu-id="57b48-103">Il codice wrapper, soprattutto dove il wrapper ha un'attendibilità più elevata del codice che lo usa, può creare una combinazione univoca di punti di debolezza nella sicurezza.</span><span class="sxs-lookup"><span data-stu-id="57b48-103">Wrapper code, especially where the wrapper has higher trust than code that uses it, can open a unique set of security weaknesses.</span></span> <span data-ttu-id="57b48-104">Tutte le operazioni eseguite per conto di un chiamante, in cui le autorizzazioni limitate del chiamante non sono incluse nel controllo di sicurezza appropriato, sono un potenziale punto di debolezza da sfruttare.</span><span class="sxs-lookup"><span data-stu-id="57b48-104">Anything done on behalf of a caller, where the caller's limited permissions are not included in the appropriate security check, is a potential weakness to be exploited.</span></span>  
  
 <span data-ttu-id="57b48-105">Non abilitare mai tramite il wrapper nulla che il chiamante non possa abilitare manualmente.</span><span class="sxs-lookup"><span data-stu-id="57b48-105">Never enable something through the wrapper that the caller could not do itself.</span></span> <span data-ttu-id="57b48-106">L'esecuzione di operazioni con un controllo di sicurezza limitato comporta un grave rischio, al contrario di una richiesta di percorso stack completo.</span><span class="sxs-lookup"><span data-stu-id="57b48-106">This is a special danger when doing something that involves a limited security check, as opposed to a full stack walk demand.</span></span> <span data-ttu-id="57b48-107">Con i controlli dei livelli singoli, se si interpone il codice wrapper tra il vero chiamante e l'elemento API in questione, il controllo di sicurezza potrebbe facilmente avere esito positivo quando non dovrebbe, indebolendo in tal modo la sicurezza.</span><span class="sxs-lookup"><span data-stu-id="57b48-107">When single-level checks are involved, interposing the wrapper code between the real caller and the API element in question can easily cause the security check to succeed when it should not, thereby weakening security.</span></span>  
  
## <a name="delegates"></a><span data-ttu-id="57b48-108">Delegati</span><span class="sxs-lookup"><span data-stu-id="57b48-108">Delegates</span></span>  
 <span data-ttu-id="57b48-109">La sicurezza dei delegati è diversa a seconda della versione di .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="57b48-109">Delegate security differs between versions of the .NET Framework.</span></span>  <span data-ttu-id="57b48-110">Questa sezione descrive i diversi comportamenti dei delegati e le relative considerazioni sulla sicurezza.</span><span class="sxs-lookup"><span data-stu-id="57b48-110">This section describes the different delegate behaviors and associated security considerations.</span></span>  
  
### <a name="in-version-10-and-11-of-the-net-framework"></a><span data-ttu-id="57b48-111">Nelle versioni 1.0 e 1.1 di .NET Framework</span><span class="sxs-lookup"><span data-stu-id="57b48-111">In version 1.0 and 1.1 of the .NET Framework</span></span>  
 <span data-ttu-id="57b48-112">Le versioni 1.0 e 1.1 di .NET Framework eseguono le seguenti azioni di sicurezza su un creatore del delegato e un chiamante del delegato.</span><span class="sxs-lookup"><span data-stu-id="57b48-112">Version 1.0 and 1.1 of the .NET Framework perform the following security actions against a delegate creator and a delegate caller.</span></span>  
  
- <span data-ttu-id="57b48-113">Quando viene creato un delegato, le richieste di collegamento sicurezza per il metodo destinazione delegato vengono eseguite sul set di concessioni del creatore del delegato.</span><span class="sxs-lookup"><span data-stu-id="57b48-113">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="57b48-114">Se si verifica un errore nell'azione di sicurezza, viene generata un'eccezione <xref:System.Security.SecurityException>.</span><span class="sxs-lookup"><span data-stu-id="57b48-114">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
- <span data-ttu-id="57b48-115">Quando il delegato viene richiamato, vengono eseguite le eventuali richieste di sicurezza esistenti per il chiamante del delegato.</span><span class="sxs-lookup"><span data-stu-id="57b48-115">When the delegate is invoked, any existing security demands on the delegate caller are performed.</span></span>  
  
 <span data-ttu-id="57b48-116">Quando il codice accetta un <xref:System.Delegate> da un codice considerato meno attendibile che potrebbe chiamarlo, assicurarsi di non consentire al codice considerato meno attendibile di eseguire l'escalation delle autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="57b48-116">Whenever your code takes a <xref:System.Delegate> from less-trusted code that might call it, make sure that you are not enabling the less-trusted code to escalate its permissions.</span></span> <span data-ttu-id="57b48-117">Se si accetta un delegato e lo si usa in un secondo momento, il codice che ha creato il delegato non è nello stack di chiamate e le autorizzazioni non verranno testate se il codice dentro o sotto il delegato tenta di eseguire un'operazione protetta.</span><span class="sxs-lookup"><span data-stu-id="57b48-117">If you take a delegate and use it later, the code that created the delegate is not on the call stack and its permissions will not be tested if code in or under the delegate attempts a protected operation.</span></span> <span data-ttu-id="57b48-118">Se il proprio codice e il codice del chiamante hanno privilegi più elevati di quelli del creatore, il creatore può orchestrare il percorso di chiamate senza far parte dello stack di chiamate.</span><span class="sxs-lookup"><span data-stu-id="57b48-118">If your code and the caller code have higher privileges than the creator, the creator can orchestrate the call path without being part of the call stack.</span></span>  
  
### <a name="in-version-20-and-later-versions-of-the-net-framework"></a><span data-ttu-id="57b48-119">Nella versione 2.0 e versioni successive di .NET Framework</span><span class="sxs-lookup"><span data-stu-id="57b48-119">In version 2.0 and later versions of the .NET Framework</span></span>  
 <span data-ttu-id="57b48-120">A differenza delle versioni precedenti, la versione 2.0 e le versioni successive di .NET Framework eseguono un'azione di sicurezza sul creatore del delegato quando il delegato viene creato e chiamato.</span><span class="sxs-lookup"><span data-stu-id="57b48-120">Unlike previous versions, version 2.0 and later versions of the .NET Framework performs security action against the delegate creator when the delegate is created and called.</span></span>  
  
- <span data-ttu-id="57b48-121">Quando viene creato un delegato, le richieste di collegamento sicurezza per il metodo destinazione delegato vengono eseguite sul set di concessioni del creatore del delegato.</span><span class="sxs-lookup"><span data-stu-id="57b48-121">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="57b48-122">Se si verifica un errore nell'azione di sicurezza, viene generata un'eccezione <xref:System.Security.SecurityException>.</span><span class="sxs-lookup"><span data-stu-id="57b48-122">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
- <span data-ttu-id="57b48-123">Anche il set di concessioni del creatore del delegato viene acquisito durante la creazione del delegato e archiviato con il delegato.</span><span class="sxs-lookup"><span data-stu-id="57b48-123">The delegate creator's grant set is also captured during delegate creation and stored with the delegate.</span></span>  
  
- <span data-ttu-id="57b48-124">Quando il delegato viene richiamato, il set di concessioni acquisito del creatore del delegato viene prima confrontato con eventuali richieste nel contesto corrente se il creatore e il chiamante del delegato appartengono ad assembly diversi.</span><span class="sxs-lookup"><span data-stu-id="57b48-124">When the delegate is invoked, the delegate creator's captured grant set is first evaluated against any demands in the current context if the delegate creator and caller belong to different assemblies.</span></span>  <span data-ttu-id="57b48-125">Vengono poi eseguite eventuali richieste di sicurezza esistenti per il chiamante del delegato.</span><span class="sxs-lookup"><span data-stu-id="57b48-125">Next, any existing security demands on the delegate caller are performed.</span></span>  
  
## <a name="link-demands-and-wrappers"></a><span data-ttu-id="57b48-126">Richieste di collegamento e wrapper</span><span class="sxs-lookup"><span data-stu-id="57b48-126">Link demands and wrappers</span></span>  
 <span data-ttu-id="57b48-127">Un particolare caso di protezione con richieste di collegamento è stato rafforzato nell'infrastruttura di sicurezza, ma è ancora una possibile fonte di vulnerabilità nel codice.</span><span class="sxs-lookup"><span data-stu-id="57b48-127">A special protection case with link demands has been strengthened in the security infrastructure, but it is still a source of possible weakness in your code.</span></span>  
  
 <span data-ttu-id="57b48-128">Se il codice completamente attendibile chiama una proprietà, un evento o un metodo protetto da un [LinkDemand](link-demands.md), la chiamata ha esito positivo se viene soddisfatto il controllo dell'autorizzazione **LinkDemand** per il chiamante.</span><span class="sxs-lookup"><span data-stu-id="57b48-128">If fully trusted code calls a property, event, or method protected by a [LinkDemand](link-demands.md), the call succeeds if the **LinkDemand** permission check for the caller is satisfied.</span></span> <span data-ttu-id="57b48-129">Inoltre, se il codice completamente attendibile espone una classe che accetta il nome di una proprietà e chiama la relativa funzione di accesso **get** tramite reflection, la chiamata alla funzione di accesso **get** ha esito positivo anche se il codice utente non ha il diritto di accedere a questa proprietà.</span><span class="sxs-lookup"><span data-stu-id="57b48-129">Additionally, if the fully trusted code exposes a class that takes the name of a property and calls its **get** accessor using reflection, that call to the **get** accessor succeeds even though the user code does not have the right to access this property.</span></span> <span data-ttu-id="57b48-130">Ciò è dovuto al fatto che **LinkDemand** controlla solo il chiamante immediato, ovvero il codice completamente attendibile.</span><span class="sxs-lookup"><span data-stu-id="57b48-130">This is because the **LinkDemand** checks only the immediate caller, which is the fully trusted code.</span></span> <span data-ttu-id="57b48-131">In pratica, il codice completamente attendibile effettua una chiamata con privilegi per conto del codice utente senza verificare che il codice utente disponga del diritto per eseguire la chiamata.</span><span class="sxs-lookup"><span data-stu-id="57b48-131">In essence, the fully trusted code is making a privileged call on behalf of user code without making sure that the user code has the right to make that call.</span></span>  
  
 <span data-ttu-id="57b48-132">Per evitare tali problemi di sicurezza, Common Language Runtime estende il controllo in una richiesta di percorso stack completo su qualsiasi chiamata indiretta a un metodo, un costruttore, una proprietà o un evento protetto da un **oggetto LinkDemand**.</span><span class="sxs-lookup"><span data-stu-id="57b48-132">To help prevent such security holes, the common language runtime extends the check into a full stack-walking demand on any indirect call to a method, constructor, property, or event protected by a **LinkDemand**.</span></span> <span data-ttu-id="57b48-133">Questa protezione comporta costi in termini di prestazioni e richiede modifiche alla semantica del controllo di sicurezza. La richiesta di percorso stack completo potrebbe non riuscire se viene superato il più rapido controllo di un solo livello.</span><span class="sxs-lookup"><span data-stu-id="57b48-133">This protection incurs some performance costs and changes the semantics of the security check; the full stack-walk demand might fail where the faster, one-level check would have passed.</span></span>  
  
## <a name="assembly-loading-wrappers"></a><span data-ttu-id="57b48-134">Wrapper di caricamento assembly</span><span class="sxs-lookup"><span data-stu-id="57b48-134">Assembly loading wrappers</span></span>  
 <span data-ttu-id="57b48-135">Diversi metodi usati per caricare il codice gestito, tra cui <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, caricano gli assembly con l'evidenza del chiamante.</span><span class="sxs-lookup"><span data-stu-id="57b48-135">Several methods used to load managed code, including <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, load assemblies with the evidence of the caller.</span></span> <span data-ttu-id="57b48-136">Se si esegue il wrapping di uno di questi metodi, il sistema di sicurezza potrebbe usare le autorizzazioni del codice, invece delle autorizzazioni del chiamante del wrapper, per caricare gli assembly.</span><span class="sxs-lookup"><span data-stu-id="57b48-136">If you wrap any of these methods, the security system could use your code's permission grant, instead of the permissions of the caller to your wrapper, to load the assemblies.</span></span> <span data-ttu-id="57b48-137">Non è consigliabile consentire al codice considerato meno attendibile di caricare codice a cui sono state concesse autorizzazioni più elevate di quelle del chiamante del wrapper.</span><span class="sxs-lookup"><span data-stu-id="57b48-137">You should not allow less-trusted code to load code that is granted higher permissions than those of the caller to your wrapper.</span></span>  
  
 <span data-ttu-id="57b48-138">In questo modo il codice con attendibilità totale o con un'attendibilità considerevolmente maggiore di quella di un potenziale chiamante (incluso un chiamante con livello di autorizzazioni per Internet) potrebbe indebolire la sicurezza.</span><span class="sxs-lookup"><span data-stu-id="57b48-138">Any code that has full trust or significantly higher trust than a potential caller (including an Internet-permissions-level caller) could weaken security in this way.</span></span> <span data-ttu-id="57b48-139">Se il codice dispone di un metodo pubblico che accetta una matrice di byte e la passa a **Assembly.Load**, creando in tal modo un assembly per conto del chiamante, potrebbe interrompere la sicurezza.</span><span class="sxs-lookup"><span data-stu-id="57b48-139">If your code has a public method that takes a byte array and passes it to **Assembly.Load**, thereby creating an assembly on the caller's behalf, it might break security.</span></span>  
  
 <span data-ttu-id="57b48-140">Questo problema si verifica con gli elementi API seguenti:</span><span class="sxs-lookup"><span data-stu-id="57b48-140">This issue applies to the following API elements:</span></span>  
  
- <xref:System.AppDomain.DefineDynamicAssembly%2A?displayProperty=nameWithType>  
  
- <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>  
  
- <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType>  
  
- <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>  
  
## <a name="demand-vs-linkdemand"></a><span data-ttu-id="57b48-141">Demand e LinkDemand</span><span class="sxs-lookup"><span data-stu-id="57b48-141">Demand vs. LinkDemand</span></span>  
 <span data-ttu-id="57b48-142">La sicurezza dichiarativa offre due tipi di controlli di sicurezza che, pur essendo simili, eseguono verifiche molto diverse.</span><span class="sxs-lookup"><span data-stu-id="57b48-142">Declarative security offers two kinds of security checks that are similar but perform very different checks.</span></span> <span data-ttu-id="57b48-143">È importante conoscerli entrambi perché la scelta sbagliata potrebbe indebolire la sicurezza o provocare una riduzione delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="57b48-143">You should understand both forms because the wrong choice can result in weak security or performance loss.</span></span>  
  
 <span data-ttu-id="57b48-144">La sicurezza dichiarativa offre i controlli di sicurezza seguenti:</span><span class="sxs-lookup"><span data-stu-id="57b48-144">Declarative security offers the following security checks:</span></span>  
  
- <span data-ttu-id="57b48-145"><xref:System.Security.Permissions.SecurityAction.Demand> specifica il percorso di chiamate nello stack di sicurezza dall'accesso al codice.</span><span class="sxs-lookup"><span data-stu-id="57b48-145"><xref:System.Security.Permissions.SecurityAction.Demand> specifies the code access security stack walk.</span></span> <span data-ttu-id="57b48-146">Tutti i chiamanti nello stack devono disporre dell'identità o dell'autorizzazione specificata per poter passare.</span><span class="sxs-lookup"><span data-stu-id="57b48-146">All callers on the stack must have the specified permission or identity to pass.</span></span> <span data-ttu-id="57b48-147">**La richiesta** si verifica a ogni chiamata perché lo stack potrebbe contenere chiamanti diversi.</span><span class="sxs-lookup"><span data-stu-id="57b48-147">**Demand** occurs on every call because the stack might contain different callers.</span></span> <span data-ttu-id="57b48-148">Se si chiama un metodo più volte, questo controllo di sicurezza viene eseguito ogni volta.</span><span class="sxs-lookup"><span data-stu-id="57b48-148">If you call a method repeatedly, this security check occurs each time.</span></span> <span data-ttu-id="57b48-149">**La domanda** è una buona protezione contro gli attacchi di attiramento; codice non autorizzato che tenta di superarlo verrà rilevato.</span><span class="sxs-lookup"><span data-stu-id="57b48-149">**Demand** is good protection against luring attacks; unauthorized code trying to get through it will be detected.</span></span>  
  
- <span data-ttu-id="57b48-150">[LinkDemand](link-demands.md) si verifica in fase di compilazione just-in-time (JIT) e controlla solo il chiamante immediato.</span><span class="sxs-lookup"><span data-stu-id="57b48-150">[LinkDemand](link-demands.md) happens at just-in-time (JIT) compilation time and checks only the immediate caller.</span></span> <span data-ttu-id="57b48-151">Questo controllo di sicurezza non verifica il chiamante del chiamante.</span><span class="sxs-lookup"><span data-stu-id="57b48-151">This security check does not check the caller's caller.</span></span> <span data-ttu-id="57b48-152">Una volta passato questo controllo, non ne vengono eseguiti altri, indipendentemente dal numero di chiamate effettuate dal chiamante.</span><span class="sxs-lookup"><span data-stu-id="57b48-152">Once this check passes, there is no additional security overhead no matter how many times the caller might call.</span></span> <span data-ttu-id="57b48-153">Tuttavia, non esiste nemmeno alcuna protezione contro gli attacchi luring.</span><span class="sxs-lookup"><span data-stu-id="57b48-153">However, there is also no protection from luring attacks.</span></span> <span data-ttu-id="57b48-154">Con **LinkDemand**, qualsiasi codice che supera il test e può fare riferimento al codice può potenzialmente interrompere la sicurezza consentendo a codice dannoso di chiamare utilizzando il codice autorizzato.</span><span class="sxs-lookup"><span data-stu-id="57b48-154">With **LinkDemand**, any code that passes the test and can reference your code can potentially break security by allowing malicious code to call using the authorized code.</span></span> <span data-ttu-id="57b48-155">Pertanto, non utilizzare **LinkDemand** a meno che tutti i possibili punti deboli possono essere accuratamente evitati.</span><span class="sxs-lookup"><span data-stu-id="57b48-155">Therefore, do not use **LinkDemand** unless all the possible weaknesses can be thoroughly avoided.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="57b48-156">In .NET Framework 4 le richieste di <xref:System.Security.SecurityCriticalAttribute> collegamento <xref:System.Security.SecurityRuleSet.Level2> sono state sostituite dall'attributo negli assembly.</span><span class="sxs-lookup"><span data-stu-id="57b48-156">In the .NET Framework 4, link demands have been replaced by the <xref:System.Security.SecurityCriticalAttribute> attribute in <xref:System.Security.SecurityRuleSet.Level2> assemblies.</span></span> <span data-ttu-id="57b48-157">L'oggetto <xref:System.Security.SecurityCriticalAttribute> è equivalente a una richiesta di collegamento per l'attendibilità totale. tuttavia, influisce anche sulle regole di ereditarietà.</span><span class="sxs-lookup"><span data-stu-id="57b48-157">The <xref:System.Security.SecurityCriticalAttribute> is equivalent to a link demand for full trust; however, it also affects inheritance rules.</span></span> <span data-ttu-id="57b48-158">Per ulteriori informazioni su questa modifica, vedere [Security-Transparent Code, Level 2](security-transparent-code-level-2.md).</span><span class="sxs-lookup"><span data-stu-id="57b48-158">For more information about this change, see [Security-Transparent Code, Level 2](security-transparent-code-level-2.md).</span></span>  
  
 <span data-ttu-id="57b48-159">Le precauzioni aggiuntive necessarie quando si utilizza **LinkDemand** devono essere programmate singolarmente; il sistema di sicurezza può aiutare con l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="57b48-159">The extra precautions required when using **LinkDemand** must be programmed individually; the security system can help with enforcement.</span></span> <span data-ttu-id="57b48-160">Ogni errore crea un punto di debolezza per la sicurezza.</span><span class="sxs-lookup"><span data-stu-id="57b48-160">Any mistake opens a security weakness.</span></span> <span data-ttu-id="57b48-161">Tutto il codice autorizzato che usa il codice dell'utente deve essere responsabile dell'implementazione di altre misure di sicurezza tramite l'esecuzione delle operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="57b48-161">All authorized code that uses your code must be responsible for implementing additional security by doing the following:</span></span>  
  
- <span data-ttu-id="57b48-162">Limitare l'accesso del codice chiamante alla classe o all'assembly.</span><span class="sxs-lookup"><span data-stu-id="57b48-162">Restricting the calling code's access to the class or assembly.</span></span>  
  
- <span data-ttu-id="57b48-163">Inserire nel codice chiamante gli stessi controlli di sicurezza visualizzati nel codice che viene chiamato e obbligare i chiamanti a fare lo stesso.</span><span class="sxs-lookup"><span data-stu-id="57b48-163">Placing the same security checks on the calling code that appear on the code being called and obligating its callers to do so.</span></span> <span data-ttu-id="57b48-164">Ad esempio, se si scrive codice che chiama un metodo <xref:System.Security.Permissions.SecurityPermission> protetto <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> con un **LinkDemand** per il con il flag specificato, il metodo deve anche effettuare un **LinkDemand** (o **Demand**, che è più forte) per questa autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="57b48-164">For example, if you write code that calls a method that is protected with a **LinkDemand** for the <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> flag specified, your method should also make a **LinkDemand** (or **Demand**, which is stronger) for this permission.</span></span> <span data-ttu-id="57b48-165">L'eccezione è se il codice utilizza il metodo protetto **LinkDemand**in modo limitato che si decide è sicuro, dati altri meccanismi di protezione di sicurezza (ad esempio le richieste) nel codice.</span><span class="sxs-lookup"><span data-stu-id="57b48-165">The exception is if your code uses the **LinkDemand**-protected method in a limited way that you decide is safe, given other security protection mechanisms (such as demands) in your code.</span></span> <span data-ttu-id="57b48-166">In questo caso eccezionale, il chiamante si assume la responsabilità di indebolire la protezione della sicurezza nel codice sottostante.</span><span class="sxs-lookup"><span data-stu-id="57b48-166">In this exceptional case, the caller takes responsibility in weakening the security protection on the underlying code.</span></span>  
  
- <span data-ttu-id="57b48-167">Garantire che i chiamanti del codice non possano spingere il codice a chiamare il codice protetto per conto loro.</span><span class="sxs-lookup"><span data-stu-id="57b48-167">Ensuring that your code's callers cannot trick your code into calling the protected code on their behalf.</span></span> <span data-ttu-id="57b48-168">In altre parole, i chiamanti non possono obbligare il codice autorizzato a passare parametri specifici al codice protetto o recuperare i risultati da esso.</span><span class="sxs-lookup"><span data-stu-id="57b48-168">In other words, callers cannot force the authorized code to pass specific parameters to the protected code, or to get results back from it.</span></span>  
  
### <a name="interfaces-and-link-demands"></a><span data-ttu-id="57b48-169">Interfacce e richieste di collegamento</span><span class="sxs-lookup"><span data-stu-id="57b48-169">Interfaces and Link Demands</span></span>  
 <span data-ttu-id="57b48-170">Se un metodo virtuale, una proprietà o un evento con **LinkDemand** esegue l'override di un metodo della classe base, anche il metodo della classe base deve avere lo stesso **LinkDemand** per il metodo sottoposto a override per essere efficace.</span><span class="sxs-lookup"><span data-stu-id="57b48-170">If a virtual method, property, or event with **LinkDemand** overrides a base class method, the base class method must also have the same **LinkDemand** for the overridden method in order to be effective.</span></span> <span data-ttu-id="57b48-171">Per il codice dannoso è possibile eseguire nuovamente il cast al tipo di base e chiamare il metodo della classe base.</span><span class="sxs-lookup"><span data-stu-id="57b48-171">It is possible for malicious code to cast back to the base type and call the base class method.</span></span> <span data-ttu-id="57b48-172">Si noti inoltre che le richieste di collegamento possono essere aggiunte in modo implicito agli assembly che non dispongono dell'attributo a livello di assembly <xref:System.Security.AllowPartiallyTrustedCallersAttribute>.</span><span class="sxs-lookup"><span data-stu-id="57b48-172">Also note that link demands can be added implicitly to assemblies that do not have the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> assembly-level attribute.</span></span>  
  
 <span data-ttu-id="57b48-173">È consigliabile proteggere le implementazioni dei metodi con richieste di collegamento quando anche i metodi di interfaccia dispongono di richieste di collegamento.</span><span class="sxs-lookup"><span data-stu-id="57b48-173">It is a good practice to protect method implementations with link demands when interface methods also have link demands.</span></span> <span data-ttu-id="57b48-174">Tenere presente quanto segue sull'uso di richieste di collegamento con interfacce:</span><span class="sxs-lookup"><span data-stu-id="57b48-174">Note the following about using link demands with interfaces:</span></span>  
  
- <span data-ttu-id="57b48-175">Se si inserisce un **LinkDemand** su un metodo pubblico di una classe che implementa un metodo di interfaccia, il **LinkDemand** non verrà applicato se si esegue quindi il cast all'interfaccia e chiamare il metodo.</span><span class="sxs-lookup"><span data-stu-id="57b48-175">If you place a **LinkDemand** on a public method of a class that implements an interface method, the **LinkDemand** will not be enforced if you then cast to the interface and call the method.</span></span> <span data-ttu-id="57b48-176">In questo caso, poiché è stato collegato all'interfaccia, viene rispettata solo **la LinkDemand** sull'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="57b48-176">In this case, because you linked against the interface, only the **LinkDemand** on the interface is honored.</span></span>  
  
 <span data-ttu-id="57b48-177">Verificare la presenza di problemi di sicurezza negli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="57b48-177">Review the following items for security issues:</span></span>  
  
- <span data-ttu-id="57b48-178">Richieste di collegamento esplicite nei metodi di interfaccia.</span><span class="sxs-lookup"><span data-stu-id="57b48-178">Explicit link demands on interface methods.</span></span> <span data-ttu-id="57b48-179">Assicurarsi che le richieste di collegamento offrano la protezione prevista.</span><span class="sxs-lookup"><span data-stu-id="57b48-179">Make sure these link demands offer the expected protection.</span></span> <span data-ttu-id="57b48-180">Determinare se il codice dannoso può usare un cast per evitare le richieste di collegamento, come descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="57b48-180">Determine whether malicious code can use a cast to get around the link demands as described previously.</span></span>  
  
- <span data-ttu-id="57b48-181">Metodi virtuali con richieste di collegamento applicate.</span><span class="sxs-lookup"><span data-stu-id="57b48-181">Virtual methods with link demands applied.</span></span>  
  
- <span data-ttu-id="57b48-182">Tipi e interfacce implementate.</span><span class="sxs-lookup"><span data-stu-id="57b48-182">Types and the interfaces they implement.</span></span> <span data-ttu-id="57b48-183">Questi devono usare le richieste di collegamento in modo coerente.</span><span class="sxs-lookup"><span data-stu-id="57b48-183">These should use link demands consistently.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="57b48-184">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="57b48-184">See also</span></span>

- [<span data-ttu-id="57b48-185">Linee guida per la generazione di codice sicuro</span><span class="sxs-lookup"><span data-stu-id="57b48-185">Secure Coding Guidelines</span></span>](../../standard/security/secure-coding-guidelines.md)
