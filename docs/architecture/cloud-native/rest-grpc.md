---
title: REST e gRPC
description: Informazioni su gRPC, il suo ruolo in applicazioni native del cloud e su come differisce da HTTP REST
author: robvet
ms.date: 09/08/2019
ms.openlocfilehash: f5725106b251a7e62ef74ea36a63c663e5db36de
ms.sourcegitcommit: 13e79efdbd589cad6b1de634f5d6b1262b12ab01
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/28/2020
ms.locfileid: "76781062"
---
# <a name="rest-and-grpc"></a><span data-ttu-id="44d7c-103">REST e gRPC</span><span class="sxs-lookup"><span data-stu-id="44d7c-103">REST and gRPC</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="44d7c-104">Fino a questo libro abbiamo incentrato sulla comunicazione [basata su REST](https://docs.microsoft.com/azure/architecture/best-practices/api-design) .</span><span class="sxs-lookup"><span data-stu-id="44d7c-104">So far in this book, we’ve focused on [REST-based](https://docs.microsoft.com/azure/architecture/best-practices/api-design) communication.</span></span> <span data-ttu-id="44d7c-105">REST è uno stile di architettura che promuove l'interoperabilità tra i sistemi di computer distribuiti.</span><span class="sxs-lookup"><span data-stu-id="44d7c-105">REST is an architectural style that promotes interoperability between distributed computer systems.</span></span> <span data-ttu-id="44d7c-106">Usa un modello di richiesta/risposta in cui ogni risposta dal server corrisponde a una richiesta del client.</span><span class="sxs-lookup"><span data-stu-id="44d7c-106">It uses a request/response model where every response from the server is to a request from the client.</span></span> <span data-ttu-id="44d7c-107">Sebbene sia molto diffuso, REST non è la soluzione ideale per ogni problema.</span><span class="sxs-lookup"><span data-stu-id="44d7c-107">While widely popular, REST isn't a perfect fit for every problem.</span></span> <span data-ttu-id="44d7c-108">Una tecnologia di comunicazione più recente, intitolata gRPC, sta ottenendo rapidamente popolarità ed è in grado di raggiungere il mondo nativo del cloud.</span><span class="sxs-lookup"><span data-stu-id="44d7c-108">A newer communication technology, entitled gRPC, is rapidly gaining popularity and making its way into the cloud-native world.</span></span>

## <a name="grpc"></a><span data-ttu-id="44d7c-109">gRPC</span><span class="sxs-lookup"><span data-stu-id="44d7c-109">gRPC</span></span>

<span data-ttu-id="44d7c-110">gRPC è una comunicazione Open Source originata da Google.</span><span class="sxs-lookup"><span data-stu-id="44d7c-110">gRPC is an open-source communication that originates from Google.</span></span> <span data-ttu-id="44d7c-111">Si basa sul modello [RPC (Remote Procedure Call)](https://en.wikipedia.org/wiki/Remote_procedure_call) , più diffuso nell'elaborazione distribuita.</span><span class="sxs-lookup"><span data-stu-id="44d7c-111">It's built upon the [remote procedure call (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) model, popular in distributed computing.</span></span> <span data-ttu-id="44d7c-112">Seguendo questo modello, un programma client locale espone un metodo in-process per eseguire un'operazione.</span><span class="sxs-lookup"><span data-stu-id="44d7c-112">Following this model, a local client program exposes an in-process method to execute an operation.</span></span> <span data-ttu-id="44d7c-113">Dietro le quinte, la chiamata viene richiamata su un microservizio out-of-process in una rete distribuita.</span><span class="sxs-lookup"><span data-stu-id="44d7c-113">Behind the scenes, that call is invoked on an out-of-process microservice across a distributed network.</span></span> <span data-ttu-id="44d7c-114">Lo sviluppatore codifica l'operazione come chiamata di procedura locale.</span><span class="sxs-lookup"><span data-stu-id="44d7c-114">The developer codes the operation as a local procedure call.</span></span> <span data-ttu-id="44d7c-115">La piattaforma sottostante astrae le comunicazioni di rete, la serializzazione e l'esecuzione da punto a punto.</span><span class="sxs-lookup"><span data-stu-id="44d7c-115">The underlying platform abstracts the point-to-point networking communication, serialization, and execution.</span></span>

<span data-ttu-id="44d7c-116">gRPC è un Framework RPC moderno che è leggero ed efficiente.</span><span class="sxs-lookup"><span data-stu-id="44d7c-116">gRPC is a modern RPC framework that is lightweight and highly performant.</span></span> <span data-ttu-id="44d7c-117">Usa HTTP/2 per il relativo protocollo di trasporto.</span><span class="sxs-lookup"><span data-stu-id="44d7c-117">It uses HTTP/2 for its transport protocol.</span></span> <span data-ttu-id="44d7c-118">Sebbene compatibile con HTTP 1,1, HTTP/2 presenta numerose funzionalità avanzate:</span><span class="sxs-lookup"><span data-stu-id="44d7c-118">While compatible with HTTP 1.1, HTTP/2 features many advanced capabilities:</span></span>

- <span data-ttu-id="44d7c-119">Quando HTTP 1,1 invia dati come testo non crittografato, HTTP/2 è un protocollo binario.</span><span class="sxs-lookup"><span data-stu-id="44d7c-119">While HTTP 1.1 sends data as clear text, HTTP/2 is a binary protocol.</span></span> <span data-ttu-id="44d7c-120">Analizza i dati più velocemente usando meno memoria, riduce la latenza di rete con i miglioramenti correlati alla velocità e gestisce più efficacemente le risorse di rete.</span><span class="sxs-lookup"><span data-stu-id="44d7c-120">It parses data faster using less memory, reduces network latency with the related improvements to speed, and manages network resources more efficiently.</span></span>
- <span data-ttu-id="44d7c-121">Sebbene HTTP 1,1 sia limitato all'elaborazione di una richiesta/risposta di round trip alla volta, HTTP/2 supporta il multiplexing o più richieste parallele sulla stessa connessione.</span><span class="sxs-lookup"><span data-stu-id="44d7c-121">While HTTP 1.1 is limited to processing one round-trip request/response at a time, HTTP/2 supports multiplexing, or multiple parallel requests over the same connection.</span></span>
- <span data-ttu-id="44d7c-122">HTTP/2 supporta la comunicazione full-duplex o bidirezionale, in cui sia il client che il server possono comunicare allo stesso tempo.</span><span class="sxs-lookup"><span data-stu-id="44d7c-122">HTTP/2 supports full-duplex, or bidirectional communication, where both client and server can communicate at the same time.</span></span> <span data-ttu-id="44d7c-123">Il client può caricare i dati della richiesta nello stesso momento in cui il server invia i dati di risposta.</span><span class="sxs-lookup"><span data-stu-id="44d7c-123">The client can be uploading request data at the same time the server is sending back response data.</span></span>
- <span data-ttu-id="44d7c-124">Il flusso è integrato in HTTP/2, pertanto le richieste e le risposte possono trasmettere in modo asincrono set di dati di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="44d7c-124">Streaming is built into HTTP/2 meaning that both requests and responses can asynchronously stream large data sets.</span></span>
- <span data-ttu-id="44d7c-125">La combinazione di gRPC e HTTP/2 comporta un aumento significativo delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="44d7c-125">Combining gRPC and HTTP/2, performance dramatically increases.</span></span> <span data-ttu-id="44d7c-126">Nel gergo [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) , le prestazioni di gRPC soddisfano e superano la velocità e l'efficienza delle [associazioni NetTcp](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span><span class="sxs-lookup"><span data-stu-id="44d7c-126">In [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) parlance, gRPC performance meets and exceeds the speed and efficiency of [NetTCP bindings](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span></span> <span data-ttu-id="44d7c-127">Tuttavia, a differenza di NetTCP, gRPC non è vincolato a linguaggi Microsoft, C# ad esempio o Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="44d7c-127">However, unlike NetTCP, gRPC isn't constrained to Microsoft languages such as C# or Visual Basic.</span></span>

<span data-ttu-id="44d7c-128">gRPC è supportato nelle piattaforme più diffuse, tra cui Java C#,, Golang e NodeJS.</span><span class="sxs-lookup"><span data-stu-id="44d7c-128">gRPC is supported across most popular platforms, including Java, C#, Golang, and NodeJS.</span></span>

## <a name="protocol-buffers"></a><span data-ttu-id="44d7c-129">Buffer di protocollo</span><span class="sxs-lookup"><span data-stu-id="44d7c-129">Protocol Buffers</span></span>

<span data-ttu-id="44d7c-130">gRPC abbraccia un'altra tecnologia open source denominata [buffer del protocollo](https://developers.google.com/protocol-buffers/docs/overview) o messaggi protobuf per inviare e ricevere dati.</span><span class="sxs-lookup"><span data-stu-id="44d7c-130">gRPC embraces another open-source technology called [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview) or Protobuf messages to send and receive data.</span></span> <span data-ttu-id="44d7c-131">Analogamente a un [contratto dati WCF](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/using-data-contracts), protobuf serializza i dati strutturati per i sistemi per la lettura e la scrittura.</span><span class="sxs-lookup"><span data-stu-id="44d7c-131">Similar to a [WCF Data Contract](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/using-data-contracts), Protobuf serializes structured data for systems to read and write.</span></span> <span data-ttu-id="44d7c-132">Riduce il sovraccarico dei formati leggibili come XML o JSON.</span><span class="sxs-lookup"><span data-stu-id="44d7c-132">It reduces the overhead that human-readable formats like XML or JSON incur.</span></span>

<span data-ttu-id="44d7c-133">Molte tecniche di serializzazione degli oggetti riflettono la struttura degli oggetti dati in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="44d7c-133">Many object serialization techniques reflect across the structure of data objects at run-time.</span></span> <span data-ttu-id="44d7c-134">Protobuf richiede di definire la struttura in primo piano con un linguaggio indipendente dalla piattaforma (linguaggio del buffer del protocollo).</span><span class="sxs-lookup"><span data-stu-id="44d7c-134">Protobuf requires you to define the structure up front with a platform-agnostic language (Protocol Buffer Language).</span></span> <span data-ttu-id="44d7c-135">Ogni definizione viene archiviata in un file ". proto".</span><span class="sxs-lookup"><span data-stu-id="44d7c-135">Each definition is stored in a ".proto" file.</span></span> <span data-ttu-id="44d7c-136">Quindi, usando il compilatore protobuf, "Proton", viene generato il codice client e server per qualsiasi piattaforma supportata.</span><span class="sxs-lookup"><span data-stu-id="44d7c-136">Then using Protobuf compiler, "Proton," you generate client and server code for any of the supported platforms.</span></span> <span data-ttu-id="44d7c-137">Il codice generato è ottimizzato per la serializzazione/deserializzazione rapida dei dati.</span><span class="sxs-lookup"><span data-stu-id="44d7c-137">The generated code is optimized for fast serialization/deserialization of data.</span></span> <span data-ttu-id="44d7c-138">In fase di esecuzione, ogni messaggio viene incluso nel contratto di servizio fortemente tipizzato e serializzato in una rappresentazione protobuf standard.</span><span class="sxs-lookup"><span data-stu-id="44d7c-138">At runtime, each message is wrapped in the strongly-typed service contract and serialized in a standard Protobuf representation.</span></span>

## <a name="grpc-support-in-net"></a><span data-ttu-id="44d7c-139">supporto di gRPC in .NET</span><span class="sxs-lookup"><span data-stu-id="44d7c-139">gRPC support in .NET</span></span>

<span data-ttu-id="44d7c-140">Il Framework di Microsoft .NET Core 3,0 include gli strumenti e il supporto nativo per gRPC.</span><span class="sxs-lookup"><span data-stu-id="44d7c-140">The Microsoft .NET Core framework 3.0 includes tooling and native support for gRPC.</span></span> <span data-ttu-id="44d7c-141">Nella figura 4-20 è illustrato il modello di Visual Studio 2019 che offre un'impalcatura di un progetto gRPC Skeleton per un servizio gRPC.</span><span class="sxs-lookup"><span data-stu-id="44d7c-141">Figure 4-20 shows the Visual Studio 2019 template that scaffolds a gRPC skeleton project for a gRPC service.</span></span> <span data-ttu-id="44d7c-142">Si noti che .NET Core supporta le piattaforme Windows, Linux e macOS.</span><span class="sxs-lookup"><span data-stu-id="44d7c-142">Note how .NET Core supports the Windows, Linux, and macOS platforms.</span></span>

![Supporto di gRPC in Visual Studio 2019](./media/visual-studio-2019-grpc-template.png)

<span data-ttu-id="44d7c-144">**Figura 4-20**.</span><span class="sxs-lookup"><span data-stu-id="44d7c-144">**Figure 4-20**.</span></span> <span data-ttu-id="44d7c-145">supporto di gRPC in Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="44d7c-145">gRPC support in Visual Studio 2019</span></span>

<span data-ttu-id="44d7c-146">.NET Core 3,0 integra perfettamente gRPC nel Framework, inclusi il routing degli endpoint, il supporto predefinito di IoC e la registrazione.</span><span class="sxs-lookup"><span data-stu-id="44d7c-146">.NET Core 3.0 seamlessly integrates gRPC into its framework, including endpoint routing, built-in IoC support, and logging.</span></span> <span data-ttu-id="44d7c-147">Il server Web gheppio open source supporta completamente le connessioni HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="44d7c-147">The open-source Kestrel web server fully supports HTTP/2 connections.</span></span>

<span data-ttu-id="44d7c-148">Nella figura 4-21 è illustrata la struttura di un servizio gRPC in Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="44d7c-148">Figure 4-21 shows structure of a gRPC service in Visual Studio 2019.</span></span> <span data-ttu-id="44d7c-149">Si noti come la struttura di cartelle includa le cartelle per i file proto e il codice del servizio.</span><span class="sxs-lookup"><span data-stu-id="44d7c-149">Note how the folder structure includes folders for the proto files and service code.</span></span>

![progetto gRPC in Visual Studio 2019](./media/grpc-project.png  )

<span data-ttu-id="44d7c-151">**Figura 4-21**.</span><span class="sxs-lookup"><span data-stu-id="44d7c-151">**Figure 4-21**.</span></span> <span data-ttu-id="44d7c-152">progetto gRPC in Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="44d7c-152">gRPC project in Visual Studio 2019</span></span>

## <a name="grpc-usage"></a><span data-ttu-id="44d7c-153">Utilizzo di gRPC</span><span class="sxs-lookup"><span data-stu-id="44d7c-153">gRPC Usage</span></span>

<span data-ttu-id="44d7c-154">gRPC è particolarmente adatto per gli scenari seguenti:</span><span class="sxs-lookup"><span data-stu-id="44d7c-154">gRPC is well suited for the following scenarios:</span></span>

- <span data-ttu-id="44d7c-155">Comunicazione con bassa latenza e velocità effettiva elevata.</span><span class="sxs-lookup"><span data-stu-id="44d7c-155">Low latency and high throughput communication.</span></span> <span data-ttu-id="44d7c-156">gRPC è ideale per i microservizi leggeri in cui l'efficienza è fondamentale.</span><span class="sxs-lookup"><span data-stu-id="44d7c-156">gRPC is great for lightweight microservices where efficiency is critical.</span></span>
- <span data-ttu-id="44d7c-157">Comunicazione in tempo reale da punto a punto.</span><span class="sxs-lookup"><span data-stu-id="44d7c-157">Point-to-point real-time communication.</span></span> <span data-ttu-id="44d7c-158">gRPC offre un supporto eccellente per lo streaming bidirezionale.</span><span class="sxs-lookup"><span data-stu-id="44d7c-158">gRPC has excellent support for bi-directional streaming.</span></span> <span data-ttu-id="44d7c-159">i servizi gRPC possono eseguire il push dei messaggi in tempo reale senza polling.</span><span class="sxs-lookup"><span data-stu-id="44d7c-159">gRPC services can push messages in real time without polling.</span></span>
- <span data-ttu-id="44d7c-160">Ambienti poliglotti: gli strumenti gRPC supportano i linguaggi di sviluppo più diffusi, rendendola una scelta ottimale per gli ambienti multilingue.</span><span class="sxs-lookup"><span data-stu-id="44d7c-160">Polyglot environments – gRPC tooling supports most popular development languages, making it a good choice for multi-language environments.</span></span>
- <span data-ttu-id="44d7c-161">Ambienti vincolati alla rete: i messaggi gRPC vengono serializzati con protobuf, un formato di messaggio leggero.</span><span class="sxs-lookup"><span data-stu-id="44d7c-161">Network constrained environments – gRPC messages are serialized with Protobuf, a lightweight message format.</span></span> <span data-ttu-id="44d7c-162">Un messaggio gRPC è sempre più piccolo di un messaggio JSON equivalente.</span><span class="sxs-lookup"><span data-stu-id="44d7c-162">A gRPC message is always smaller than an equivalent JSON message.</span></span>

<span data-ttu-id="44d7c-163">Al momento della stesura di questo libro, la maggior parte dei browser ha un supporto limitato per gRPC.</span><span class="sxs-lookup"><span data-stu-id="44d7c-163">At the time of writing of this book, most browsers have limited support for gRPC.</span></span> <span data-ttu-id="44d7c-164">gRPC USA in modo intensivo le funzionalità HTTP/2 e nessun browser fornisce il livello di controllo necessario per le richieste Web per supportare un client gRPC.</span><span class="sxs-lookup"><span data-stu-id="44d7c-164">gRPC heavily uses HTTP/2 features and no browser provides the level of control required over web requests to support a gRPC client.</span></span> <span data-ttu-id="44d7c-165">gRPC viene in genere usato per la comunicazione tra microservizi interni e microservizi.</span><span class="sxs-lookup"><span data-stu-id="44d7c-165">gRPC is typically used for internal microservice to microservice communication.</span></span> <span data-ttu-id="44d7c-166">La figura 4-22 illustra un modello di utilizzo semplice ma comune.</span><span class="sxs-lookup"><span data-stu-id="44d7c-166">Figure 4-22 shows a simple, but common usage pattern.</span></span>

![Modelli di utilizzo di gRPC](./media/grpc-usage.png)

<span data-ttu-id="44d7c-168">**Figura 4-22**.</span><span class="sxs-lookup"><span data-stu-id="44d7c-168">**Figure 4-22**.</span></span> <span data-ttu-id="44d7c-169">modelli di utilizzo di gRPC</span><span class="sxs-lookup"><span data-stu-id="44d7c-169">gRPC usage patterns</span></span>

<span data-ttu-id="44d7c-170">Si noti che nella figura precedente viene richiamato il traffico front-end con HTTP mentre il microservizio back-end in microservizio USA gRPC.</span><span class="sxs-lookup"><span data-stu-id="44d7c-170">Note in the previous figure how front-end traffic is invoked with HTTP while back-end microservice to microservice uses gRPC.</span></span>

<span data-ttu-id="44d7c-171">In futuro, gRPC potrebbe svolgere un ruolo importante in detronizzare il dominamento di REST per i sistemi nativi del cloud.</span><span class="sxs-lookup"><span data-stu-id="44d7c-171">Looking ahead, gRPC could play a major role in dethroning the dominance of REST for cloud-native systems.</span></span> <span data-ttu-id="44d7c-172">I vantaggi delle prestazioni e la facilità di sviluppo sono troppo efficaci per essere superati.</span><span class="sxs-lookup"><span data-stu-id="44d7c-172">The performance benefits and ease of development are too good to pass up.</span></span> <span data-ttu-id="44d7c-173">Tuttavia, non creare alcun errore, REST rimarrà comunque da molto tempo.</span><span class="sxs-lookup"><span data-stu-id="44d7c-173">However, make no mistake, REST will still be around for a long time.</span></span> <span data-ttu-id="44d7c-174">Si distingue ancora per le API esposte pubblicamente e per motivi di compatibilità con le versioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="44d7c-174">It still excels for publicly exposed APIs and for backward compatibility reasons.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="44d7c-175">[Precedente](service-to-service-communication.md)
>[Successivo](service-mesh-communication-infrastructure.md)</span><span class="sxs-lookup"><span data-stu-id="44d7c-175">[Previous](service-to-service-communication.md)
[Next](service-mesh-communication-infrastructure.md)</span></span>
