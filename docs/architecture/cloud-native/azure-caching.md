---
title: Memorizzazione nella cache in un'applicazione nativa del cloud
description: Informazioni sulle strategie di memorizzazione nella cache in un'applicazione nativa del cloud.
author: robvet
ms.date: 01/22/2020
ms.openlocfilehash: 2da61a01fc53233d1934df813fcba3b91a495c43
ms.sourcegitcommit: 13e79efdbd589cad6b1de634f5d6b1262b12ab01
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/28/2020
ms.locfileid: "76794968"
---
# <a name="caching-in-a-cloud-native-app"></a><span data-ttu-id="c5aeb-103">Memorizzazione nella cache in un'app nativa del cloud</span><span class="sxs-lookup"><span data-stu-id="c5aeb-103">Caching in a cloud-native app</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="c5aeb-104">I vantaggi della memorizzazione nella cache sono ben noti.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-104">The benefits of caching are well understood.</span></span> <span data-ttu-id="c5aeb-105">La tecnica funziona copiando temporaneamente i dati a cui si accede di frequente da un archivio dati back-end ad *archiviazione veloce* più vicina all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-105">The technique works by temporarily copying frequently accessed data from a backend data store to *fast storage* that's located closer to the application.</span></span> <span data-ttu-id="c5aeb-106">La memorizzazione nella cache è spesso implementata dove...</span><span class="sxs-lookup"><span data-stu-id="c5aeb-106">Caching is often implemented where...</span></span>

- <span data-ttu-id="c5aeb-107">I dati rimangono relativamente statici.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-107">Data remains relatively static.</span></span>
- <span data-ttu-id="c5aeb-108">L'accesso ai dati è lento, soprattutto rispetto alla velocità della cache.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-108">Data access is slow, especially compared to the speed of the cache.</span></span>
- <span data-ttu-id="c5aeb-109">I dati sono soggetti a livelli elevati di contesa.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-109">Data is subject to high levels of contention.</span></span>

## <a name="why"></a><span data-ttu-id="c5aeb-110">Perché?</span><span class="sxs-lookup"><span data-stu-id="c5aeb-110">Why?</span></span>

<span data-ttu-id="c5aeb-111">Come illustrato nella [Guida di Microsoft Caching](https://docs.microsoft.com/azure/architecture/best-practices/caching), la memorizzazione nella cache può migliorare le prestazioni, la scalabilità e la disponibilità per i singoli microservizi e il sistema nel suo complesso.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-111">As discussed in the [Microsoft caching guidance](https://docs.microsoft.com/azure/architecture/best-practices/caching), caching can increase performance, scalability, and availability for individual microservices and the system as a whole.</span></span> <span data-ttu-id="c5aeb-112">Riduce la latenza e la contesa della gestione di volumi elevati di richieste simultanee a un archivio dati.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-112">It reduces the latency and contention of handling large volumes of concurrent requests to a data store.</span></span> <span data-ttu-id="c5aeb-113">Man mano che il volume dei dati e il numero di utenti aumentano, maggiori sono i vantaggi della memorizzazione nella cache.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-113">As data volume and the number of users increase, the greater the benefits of caching become.</span></span>

<span data-ttu-id="c5aeb-114">La memorizzazione nella cache è più efficace quando un client legge ripetutamente dati non modificabili o che cambiano raramente.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-114">Caching is most effective when a client repeatedly reads data that is immutable or that changes infrequently.</span></span> <span data-ttu-id="c5aeb-115">Gli esempi includono informazioni di riferimento, ad esempio informazioni sul prodotto e sui prezzi, o risorse statiche condivise che sono costose da costruire.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-115">Examples include reference information such as product and pricing information, or shared static resources that are costly to construct.</span></span>

<span data-ttu-id="c5aeb-116">Anche se i microservizi devono essere senza stato, una cache distribuita può supportare l'accesso simultaneo ai dati dello stato della sessione quando strettamente necessario.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-116">While microservices should be stateless, a distributed cache can support concurrent access to session state data when absolutely required.</span></span>

<span data-ttu-id="c5aeb-117">Prendere in considerazione anche la memorizzazione nella cache per evitare calcoli ripetitivi.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-117">Also consider caching to avoid repetitive computations.</span></span> <span data-ttu-id="c5aeb-118">Se un'operazione trasforma i dati o esegue un calcolo complesso, memorizzare nella cache il risultato per le richieste successive.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-118">If an operation transforms data or performs a complicated calculation, cache the result for subsequent requests.</span></span>

## <a name="caching-architecture"></a><span data-ttu-id="c5aeb-119">Architettura di Caching</span><span class="sxs-lookup"><span data-stu-id="c5aeb-119">Caching architecture</span></span>

<span data-ttu-id="c5aeb-120">Le applicazioni cloud native implementano in genere un'architettura di Caching distribuito.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-120">Cloud native applications typically implement a distributed caching architecture.</span></span> <span data-ttu-id="c5aeb-121">La cache è ospitata come [servizio di backup](./definition.md#backing-services)basato sul cloud, separato dai microservizi.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-121">The cache is hosted as a cloud-based [backing service](./definition.md#backing-services), separate from the microservices.</span></span> <span data-ttu-id="c5aeb-122">La figura 5-20 illustra l'architettura.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-122">Figure 5-20 shows the architecture.</span></span>

![Memorizzazione nella cache in un'app Cloud nativa](media/caching-in-a-cloud-native-app.png)

<span data-ttu-id="c5aeb-124">**Figura 5-19**: memorizzazione nella cache in un'app Cloud nativa</span><span class="sxs-lookup"><span data-stu-id="c5aeb-124">**Figure 5-19**: Caching in a cloud native app</span></span>

<span data-ttu-id="c5aeb-125">Nella figura precedente si noti come la cache è indipendente e condivisa dai microservizi.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-125">In the previous figure, note how the cache is independent of and shared by the microservices.</span></span> <span data-ttu-id="c5aeb-126">In questo scenario, la cache viene richiamata dal [gateway API](./front-end-communication.md).</span><span class="sxs-lookup"><span data-stu-id="c5aeb-126">In this scenario, the cache is invoked by the [API Gateway](./front-end-communication.md).</span></span> <span data-ttu-id="c5aeb-127">Come illustrato nel capitolo 4, il gateway funge da front-end per tutte le richieste in ingresso.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-127">As discussed in chapter 4, the gateway serves as a front end for all incoming requests.</span></span> <span data-ttu-id="c5aeb-128">La cache distribuita aumenta la velocità di risposta del sistema restituendo i dati memorizzati nella cache laddove possibile.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-128">The distributed cache increases system responsiveness by returning cached data whenever possible.</span></span> <span data-ttu-id="c5aeb-129">Inoltre, la separazione della cache dai servizi consente la scalabilità verticale o orizzontale della cache per soddisfare le esigenze di traffico più elevate.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-129">Additionally, separating the cache from the services allows the cache to scale up or out independently to meet increased traffic demands.</span></span>

<span data-ttu-id="c5aeb-130">La figura presenta un modello di memorizzazione nella cache comune noto come [modello cache-aside](https://docs.microsoft.com/azure/architecture/patterns/cache-aside).</span><span class="sxs-lookup"><span data-stu-id="c5aeb-130">The figure presents a common caching pattern known as the [cache-aside pattern](https://docs.microsoft.com/azure/architecture/patterns/cache-aside).</span></span> <span data-ttu-id="c5aeb-131">Per una richiesta in ingresso, eseguire prima una query sulla cache (passaggio \#1) per una risposta.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-131">For an incoming request, you first query the cache (step \#1) for a response.</span></span> <span data-ttu-id="c5aeb-132">Se viene trovato, i dati vengono restituiti immediatamente.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-132">If found, the data is returned immediately.</span></span> <span data-ttu-id="c5aeb-133">Se i dati non esistono nella cache (noto come [mancato riscontro nella cache](https://www.techopedia.com/definition/6308/cache-miss)), viene recuperato da un database locale in un servizio downstream (passaggio \#2).</span><span class="sxs-lookup"><span data-stu-id="c5aeb-133">If the data doesn't exist in the cache (known as a [cache miss](https://www.techopedia.com/definition/6308/cache-miss)), it's retrieved from a local database in a downstream service (step \#2).</span></span> <span data-ttu-id="c5aeb-134">Viene quindi scritto nella cache per richieste future (passaggio \#3) e restituito al chiamante.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-134">It's then written to the cache for future requests (step \#3), and returned to the caller.</span></span> <span data-ttu-id="c5aeb-135">È necessario prestare attenzione per rimuovere periodicamente i dati memorizzati nella cache, in modo che il sistema rimanga tempestivamente e coerente.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-135">Care must be taken to periodically evict cached data so that the system remains timely and consistent.</span></span>

<span data-ttu-id="c5aeb-136">Con la crescita di una cache condivisa, potrebbe risultare vantaggioso partizionare i dati tra più nodi.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-136">As a shared cache grows, it might prove beneficial to partition its data across multiple nodes.</span></span> <span data-ttu-id="c5aeb-137">Questa operazione consente di ridurre al minimo i conflitti e migliorare la scalabilità.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-137">Doing so can help minimize contention and improve scalability.</span></span> <span data-ttu-id="c5aeb-138">Molti servizi di memorizzazione nella cache supportano la possibilità di aggiungere e rimuovere in modo dinamico i nodi e di ribilanciare i dati tra le partizioni.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-138">Many Caching services support the ability to dynamically add and remove nodes and rebalance data across partitions.</span></span> <span data-ttu-id="c5aeb-139">Questo approccio prevede in genere il clustering.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-139">This approach typically involves clustering.</span></span> <span data-ttu-id="c5aeb-140">Il clustering espone una raccolta di nodi federati come una singola cache semplice.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-140">Clustering exposes a collection of federated nodes as a seamless, single cache.</span></span> <span data-ttu-id="c5aeb-141">Internamente, tuttavia, i dati vengono distribuiti tra i nodi dopo una strategia di distribuzione predefinita che bilancia il carico in modo uniforme.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-141">Internally, however, the data is dispersed across the nodes following a predefined distribution strategy that balances the load evenly.</span></span>

## <a name="azure-cache-for-redis"></a><span data-ttu-id="c5aeb-142">Cache Redis di Azure</span><span class="sxs-lookup"><span data-stu-id="c5aeb-142">Azure Cache for Redis</span></span>

<span data-ttu-id="c5aeb-143">[Cache di Azure per Redis](https://azure.microsoft.com/services/cache/) è un servizio di memorizzazione nella cache dei dati e broker di messaggistica protetto, completamente gestito da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-143">[Azure Cache for Redis](https://azure.microsoft.com/services/cache/) is a secure data caching and messaging broker service, fully managed by Microsoft.</span></span> <span data-ttu-id="c5aeb-144">Usato come offerta di piattaforma distribuita come servizio (PaaS), garantisce velocità effettiva elevata e accesso a bassa latenza ai dati.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-144">Consumed as a Platform as a Service (PaaS) offering, it provides high throughput and low-latency access to data.</span></span> <span data-ttu-id="c5aeb-145">Il servizio è accessibile da qualsiasi applicazione all'interno o all'esterno di Azure.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-145">The service is accessible to any application within or outside of Azure.</span></span>

<span data-ttu-id="c5aeb-146">Il servizio cache di Azure per Redis gestisce l'accesso ai server Redis Open Source ospitati nei data center di Azure.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-146">The Azure Cache for Redis service manages access to open-source Redis servers hosted across Azure data centers.</span></span> <span data-ttu-id="c5aeb-147">Il servizio funge da facciata garantendo la gestione, il controllo di accesso e la sicurezza.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-147">The service acts as a facade providing management, access control, and security.</span></span> <span data-ttu-id="c5aeb-148">Il servizio supporta in modo nativo un set completo di strutture di dati, tra cui stringhe, hash, elenchi e set.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-148">The service natively supports a rich set of data structures, including strings, hashes, lists, and sets.</span></span> <span data-ttu-id="c5aeb-149">Se l'applicazione usa già Redis, funzionerà così com'è con cache di Azure per Redis.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-149">If your application already uses Redis, it will work as-is with Azure Cache for Redis.</span></span>

<span data-ttu-id="c5aeb-150">Cache di Azure per Redis è più di un semplice server di cache.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-150">Azure Cache for Redis is more than a simple cache server.</span></span> <span data-ttu-id="c5aeb-151">Può supportare diversi scenari per migliorare un'architettura di microservizi:</span><span class="sxs-lookup"><span data-stu-id="c5aeb-151">It can support a number of scenarios to enhance a microservices architecture:</span></span>

- <span data-ttu-id="c5aeb-152">Un archivio dati in memoria</span><span class="sxs-lookup"><span data-stu-id="c5aeb-152">An in-memory data store</span></span>
- <span data-ttu-id="c5aeb-153">Un database non relazionale distribuito</span><span class="sxs-lookup"><span data-stu-id="c5aeb-153">A distributed non-relational database</span></span>
- <span data-ttu-id="c5aeb-154">Broker di messaggi</span><span class="sxs-lookup"><span data-stu-id="c5aeb-154">A message broker</span></span>
- <span data-ttu-id="c5aeb-155">Un server di configurazione o di individuazione</span><span class="sxs-lookup"><span data-stu-id="c5aeb-155">A configuration or discovery server</span></span>
  
<span data-ttu-id="c5aeb-156">Per gli scenari avanzati, una copia dei dati memorizzati nella cache può essere salvata [in modo permanente su disco](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-how-to-premium-persistence).</span><span class="sxs-lookup"><span data-stu-id="c5aeb-156">For advanced scenarios, a copy of the cached data can be [persisted to disk](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-how-to-premium-persistence).</span></span> <span data-ttu-id="c5aeb-157">Se un evento irreversibile Disabilita sia la cache primaria che quella di replica, la cache viene ricostruita dallo snapshot più recente.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-157">If a catastrophic event disables both the primary and replica caches, the cache is reconstructed from the most recent snapshot.</span></span>

<span data-ttu-id="c5aeb-158">Cache Redis di Azure è disponibile in diverse configurazioni predefinite e piani tariffari.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-158">Azure Redis Cache is available across a number of predefined configurations and pricing tiers.</span></span>  <span data-ttu-id="c5aeb-159">Il [livello Premium](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-premium-tier-intro) offre numerose funzionalità di livello aziendale, come il clustering, la persistenza dei dati, la replica geografica e l'isolamento della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="c5aeb-159">The [Premium tier](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-premium-tier-intro) features many enterprise-level features such as clustering, data persistence, geo-replication, and virtual-network isolation.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="c5aeb-160">[Precedente](relational-vs-nosql-data.md)
>[Successivo](elastic-search-in-azure.md)</span><span class="sxs-lookup"><span data-stu-id="c5aeb-160">[Previous](relational-vs-nosql-data.md)
[Next](elastic-search-in-azure.md)</span></span>
