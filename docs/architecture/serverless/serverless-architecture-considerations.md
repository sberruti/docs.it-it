---
title: Considerazioni sull'architettura senza server - App senza server
description: Comprendere le sfide dell'architettura di applicazioni senza server, dalla gestione dello stato e l'archiviazione permanente alla scalabilità, alla registrazione, alla traccia e alla diagnostica.
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: c856683cf6910be98661e634246cd003b93a6d76
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/14/2020
ms.locfileid: "72522436"
---
# <a name="serverless-architecture-considerations"></a><span data-ttu-id="e6579-103">Considerazioni sull'architettura serverless</span><span class="sxs-lookup"><span data-stu-id="e6579-103">Serverless architecture considerations</span></span>

<span data-ttu-id="e6579-104">L'adozione di un'architettura serverless comporta alcune difficoltà.</span><span class="sxs-lookup"><span data-stu-id="e6579-104">Adopting a serverless architecture does come with certain challenges.</span></span> <span data-ttu-id="e6579-105">In questa sezione vengono esaminate alcune delle considerazioni più comuni da tenere presenti.</span><span class="sxs-lookup"><span data-stu-id="e6579-105">This section explores some of the more common considerations to be aware of.</span></span> <span data-ttu-id="e6579-106">Tutte queste sfide hanno delle soluzioni.</span><span class="sxs-lookup"><span data-stu-id="e6579-106">All of these challenges have solutions.</span></span> <span data-ttu-id="e6579-107">Come con tutte le scelte di architettura, la decisione di andare senza server dovrebbe essere presa solo dopo aver considerato attentamente i pro ei contro.</span><span class="sxs-lookup"><span data-stu-id="e6579-107">As with all architecture choices, the decision to go serverless should be made only after carefully considering the pros and cons.</span></span> <span data-ttu-id="e6579-108">A seconda delle esigenze dell'applicazione, è possibile decidere che un'implementazione senza server non sia la soluzione giusta per determinati componenti.</span><span class="sxs-lookup"><span data-stu-id="e6579-108">Depending on the needs of your application, you may decide a serverless implementation isn't the right solution for certain components.</span></span>

## <a name="managing-state"></a><span data-ttu-id="e6579-109">Gestione dello stato</span><span class="sxs-lookup"><span data-stu-id="e6579-109">Managing state</span></span>

<span data-ttu-id="e6579-110">Le funzioni senza server, come per i microservizi in generale, sono senza stato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="e6579-110">Serverless functions, as with microservices in general, are stateless by default.</span></span> <span data-ttu-id="e6579-111">Evitare lo stato consente a serverless di essere temporaneo, di scalare orizzontalmente e di fornire resilienza senza un punto centrale di errore.</span><span class="sxs-lookup"><span data-stu-id="e6579-111">Avoiding state enables serverless to be ephemeral, to scale out, and to provide resiliency without a central point of failure.</span></span> <span data-ttu-id="e6579-112">In alcune circostanze, i processi aziendali richiedono lo stato.</span><span class="sxs-lookup"><span data-stu-id="e6579-112">In some circumstances, business processes require state.</span></span> <span data-ttu-id="e6579-113">Se il processo richiede lo stato, sono disponibili due opzioni.</span><span class="sxs-lookup"><span data-stu-id="e6579-113">If your process requires state, you have two options.</span></span> <span data-ttu-id="e6579-114">È possibile adottare un modello diverso da serverless o interagire con un servizio separato che fornisce lo stato.</span><span class="sxs-lookup"><span data-stu-id="e6579-114">You can adopt a model other than serverless, or interact with a separate service that provides state.</span></span> <span data-ttu-id="e6579-115">L'aggiunta di stato può complicare la soluzione e renderne più difficile la scalabilità e creare potenzialmente un singolo punto di errore.</span><span class="sxs-lookup"><span data-stu-id="e6579-115">Adding state can complicate the solution and make it harder to scale, and potentially create a single point of failure.</span></span> <span data-ttu-id="e6579-116">Valutare attentamente se la funzione richiede assolutamente lo stato.</span><span class="sxs-lookup"><span data-stu-id="e6579-116">Carefully consider whether your function absolutely requires state.</span></span> <span data-ttu-id="e6579-117">Se la risposta è "yes", determinare se ha ancora senso implementarla con serverless.</span><span class="sxs-lookup"><span data-stu-id="e6579-117">If the answer is "yes," determine whether it still makes sense to implement it with serverless.</span></span>

<span data-ttu-id="e6579-118">Esistono diverse soluzioni per adottare lo stato senza compromettere i vantaggi di serverless.</span><span class="sxs-lookup"><span data-stu-id="e6579-118">There are several solutions to adopt state without compromising the benefits of serverless.</span></span> <span data-ttu-id="e6579-119">Alcune delle soluzioni più popolari includono:</span><span class="sxs-lookup"><span data-stu-id="e6579-119">Some of the more popular solutions include:</span></span>

- <span data-ttu-id="e6579-120">Usare un archivio dati temporaneo o una cache distribuita, ad esempio RedisUse a temporary data store or distributed cache, like Redis</span><span class="sxs-lookup"><span data-stu-id="e6579-120">Use a temporary data store or distributed cache, like Redis</span></span>
- <span data-ttu-id="e6579-121">Archiviare lo stato in un database, ad esempio SQL o CosmosDB</span><span class="sxs-lookup"><span data-stu-id="e6579-121">Store state in a database, like SQL or CosmosDB</span></span>
- <span data-ttu-id="e6579-122">Gestire lo stato tramite un motore del flusso di lavoro come le funzioni durevoliHandle state through a workflow engine like durable functions</span><span class="sxs-lookup"><span data-stu-id="e6579-122">Handle state through a workflow engine like durable functions</span></span>

<span data-ttu-id="e6579-123">La linea di fondo è che si dovrebbe essere consapevoli della necessità di qualsiasi gestione dello stato all'interno di processi che si sta considerando di implementare con serverless.</span><span class="sxs-lookup"><span data-stu-id="e6579-123">The bottom line is that you should be aware of the need for any state management within processes you're considering to implement with serverless.</span></span>

## <a name="long-running-processes"></a><span data-ttu-id="e6579-124">Processi a esecuzione prolungata</span><span class="sxs-lookup"><span data-stu-id="e6579-124">Long-running processes</span></span>

<span data-ttu-id="e6579-125">Molti vantaggi di serverless si basano sui processi che sono effimeri.</span><span class="sxs-lookup"><span data-stu-id="e6579-125">Many benefits of serverless rely on the processes being ephemeral.</span></span> <span data-ttu-id="e6579-126">Tempi di esecuzione brevi rendono più semplice per il provider senza server liberare le risorse quando le funzioni terminano e condividono funzioni tra gli host.</span><span class="sxs-lookup"><span data-stu-id="e6579-126">Short run times make it easier for the serverless provider to free up resources as functions end and share functions across hosts.</span></span> <span data-ttu-id="e6579-127">La maggior parte dei provider di cloud limita il tempo totale a cui la funzione può essere eseguita a circa 10 minuti.</span><span class="sxs-lookup"><span data-stu-id="e6579-127">Most cloud providers limit the total time your function can run to around 10 minutes.</span></span> <span data-ttu-id="e6579-128">Se il processo può richiedere più tempo, è possibile prendere in considerazione un'implementazione alternativa.</span><span class="sxs-lookup"><span data-stu-id="e6579-128">If your process may take longer, you might consider an alternative implementation.</span></span>

<span data-ttu-id="e6579-129">Ci sono alcune eccezioni e soluzioni.</span><span class="sxs-lookup"><span data-stu-id="e6579-129">There are a few exceptions and solutions.</span></span> <span data-ttu-id="e6579-130">Una soluzione può essere quella di suddividere il processo in componenti più piccoli che richiedono meno tempo per l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="e6579-130">One solution may be to break your process into smaller components that individually take less time to run.</span></span> <span data-ttu-id="e6579-131">Se il processo viene eseguito a lungo a causa delle dipendenze, è anche possibile prendere in considerazione un flusso di lavoro asincrono usando una soluzione come le funzioni durevoli.</span><span class="sxs-lookup"><span data-stu-id="e6579-131">If your process runs long because of dependencies, you can also consider an asynchronous workflow using a solution like durable functions.</span></span> <span data-ttu-id="e6579-132">Le funzioni durevoli sospendono e mantengono lo stato del processo mentre è in attesa del completamento di un processo esterno.</span><span class="sxs-lookup"><span data-stu-id="e6579-132">Durable functions pause and maintain the state of your process while it's waiting on an external process to finish.</span></span> <span data-ttu-id="e6579-133">La gestione asincrona riduce il tempo di esecuzione del processo effettivo.</span><span class="sxs-lookup"><span data-stu-id="e6579-133">Asynchronous handling reduces the time the actual process runs.</span></span>

## <a name="startup-time"></a><span data-ttu-id="e6579-134">Tempo di avvio</span><span class="sxs-lookup"><span data-stu-id="e6579-134">Startup time</span></span>

<span data-ttu-id="e6579-135">Una potenziale preoccupazione per le implementazioni senza server è il tempo di avvio.</span><span class="sxs-lookup"><span data-stu-id="e6579-135">One potential concern with serverless implementations is startup time.</span></span> <span data-ttu-id="e6579-136">Per risparmiare risorse, molti provider senza server creano l'infrastruttura "su richiesta".</span><span class="sxs-lookup"><span data-stu-id="e6579-136">To conserve resources, many serverless providers create infrastructure "on demand."</span></span> <span data-ttu-id="e6579-137">Quando una funzione senza server viene attivata dopo un periodo di tempo, potrebbe essere necessario creare o riavviare le risorse per ospitare la funzione.</span><span class="sxs-lookup"><span data-stu-id="e6579-137">When a serverless function is triggered after a period of time, the resources to host the function may need to be created or restarted.</span></span> <span data-ttu-id="e6579-138">In alcune situazioni, le partenze a freddo possono causare ritardi di alcuni secondi.</span><span class="sxs-lookup"><span data-stu-id="e6579-138">In some situations, cold starts may result in delays of several seconds.</span></span> <span data-ttu-id="e6579-139">Il tempo di avvio varia a seconda dei provider e dei livelli di servizio.</span><span class="sxs-lookup"><span data-stu-id="e6579-139">Startup time varies across providers and service levels.</span></span> <span data-ttu-id="e6579-140">Esistono alcuni approcci per risolvere il tempo di avvio se è importante ridurre al minimo per il successo dell'app.</span><span class="sxs-lookup"><span data-stu-id="e6579-140">There are a few approaches to address startup time if it's important to minimize for the success of the app.</span></span>

- <span data-ttu-id="e6579-141">Alcuni provider consentono agli utenti di pagare per i livelli di servizio che garantiscono l'infrastruttura è "sempre acceso".</span><span class="sxs-lookup"><span data-stu-id="e6579-141">Some providers allow users to pay for service levels that guarantee infrastructure is "always on".</span></span>
- <span data-ttu-id="e6579-142">Implementare un meccanismo keep-alive (ping dell'endpoint per mantenerlo "sveglio").</span><span class="sxs-lookup"><span data-stu-id="e6579-142">Implement a keep-alive mechanism (ping the endpoint to keep it "awake").</span></span>
- <span data-ttu-id="e6579-143">Usare l'orchestrazione come Kubernetes con un approccio di funzione containerizzata (l'host è già in esecuzione, pertanto la rotazione di nuove istanze è estremamente veloce).</span><span class="sxs-lookup"><span data-stu-id="e6579-143">Use orchestration like Kubernetes with a containerized function approach (the host is already running so spinning up new instances is extremely fast).</span></span>

## <a name="database-updates-and-migrations"></a><span data-ttu-id="e6579-144">Aggiornamenti e migrazioni dei database</span><span class="sxs-lookup"><span data-stu-id="e6579-144">Database updates and migrations</span></span>

<span data-ttu-id="e6579-145">Un vantaggio del codice senza server è che è possibile rilasciare nuove funzioni senza dover ridistribuire l'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="e6579-145">An advantage of serverless code is that you can release new functions without having to redeploy the entire application.</span></span> <span data-ttu-id="e6579-146">Questo vantaggio può diventare uno svantaggio quando è coinvolto un database relazionale.</span><span class="sxs-lookup"><span data-stu-id="e6579-146">This advantage can become a disadvantage when there's a relational database involved.</span></span> <span data-ttu-id="e6579-147">Le modifiche apportate agli schemi di database sono difficili da sincronizzare con gli aggiornamenti senza server.</span><span class="sxs-lookup"><span data-stu-id="e6579-147">Changes to database schemas are difficult to synchronize with serverless updates.</span></span> <span data-ttu-id="e6579-148">Ulteriori sfide vengono poste quando le cose vanno male e le modifiche devono essere annullate.</span><span class="sxs-lookup"><span data-stu-id="e6579-148">Additional challenges are posed when things go wrong and the changes must be rolled back.</span></span> <span data-ttu-id="e6579-149">L'integrità dei dati è uno dei motivi per cui una procedura consigliata per i microservizi e le funzioni senza server è che possiedono i propri dati.</span><span class="sxs-lookup"><span data-stu-id="e6579-149">Data integrity is one reason that a best practice for microservices and serverless functions is that they own their own data.</span></span> <span data-ttu-id="e6579-150">È possibile distribuire le modifiche come una singola unità di calcolo e dati.</span><span class="sxs-lookup"><span data-stu-id="e6579-150">It is possible to deploy changes as a single unit of compute and data.</span></span> <span data-ttu-id="e6579-151">La realtà è che molti sistemi legacy dispongono di un database back-end di grandi dimensioni che deve essere riconciliato con l'architettura senza server.</span><span class="sxs-lookup"><span data-stu-id="e6579-151">The reality is that many legacy systems feature a large back-end database that must be reconciled with the serverless architecture.</span></span>

<span data-ttu-id="e6579-152">Un approccio comune per risolvere il controllo delle versioni dello schema consiste nel non modificare mai le proprietà e le colonne esistenti, ma aggiungere nuove informazioni.</span><span class="sxs-lookup"><span data-stu-id="e6579-152">A popular approach to solve schema versioning is to never modify existing properties and columns, but instead add new information.</span></span> <span data-ttu-id="e6579-153">Si consideri, ad esempio, una modifica per passare da un flag booleano "completato" per un elenco di attività a una "data di completamento".</span><span class="sxs-lookup"><span data-stu-id="e6579-153">For example, consider a change to move from a Boolean "completed" flag for a todo list to a "completed date."</span></span> <span data-ttu-id="e6579-154">Invece di rimuovere il campo precedente, la modifica del database sarà:</span><span class="sxs-lookup"><span data-stu-id="e6579-154">Instead of removing the old field, the database change will:</span></span>

1. <span data-ttu-id="e6579-155">Aggiungere un nuovo campo "Data di completamento".</span><span class="sxs-lookup"><span data-stu-id="e6579-155">Add a new "completed date" field.</span></span>
1. <span data-ttu-id="e6579-156">Trasformare il campo booleano "completato" in una funzione calcolata che valuta se la data completata è successiva alla data corrente.</span><span class="sxs-lookup"><span data-stu-id="e6579-156">Transform the "completed" Boolean field to a computed function that evaluates whether the completed date is after the current date.</span></span>
1. <span data-ttu-id="e6579-157">Aggiungere un trigger per impostare la data di completamento sulla data corrente quando il valore booleano completato è impostato su true.</span><span class="sxs-lookup"><span data-stu-id="e6579-157">Add a trigger to set the completed date to the current date when the completed Boolean is set to true.</span></span>

<span data-ttu-id="e6579-158">La sequenza delle modifiche assicura che il codice legacy continui a essere eseguito "così com'è", mentre le funzioni senza server più recenti possono sfruttare il nuovo campo.</span><span class="sxs-lookup"><span data-stu-id="e6579-158">The sequence of changes ensures that legacy code continues to run "as is" while newer serverless functions can take advantage of the new field.</span></span>

<span data-ttu-id="e6579-159">Per ulteriori informazioni sui dati nelle architetture senza server, vedere [Sfide e soluzioni per](../microservices/architect-microservice-container-applications/distributed-data-management.md)la gestione dei dati distribuiti .</span><span class="sxs-lookup"><span data-stu-id="e6579-159">For more information about data in serverless architectures, see [Challenges and solutions for distributed data management](../microservices/architect-microservice-container-applications/distributed-data-management.md).</span></span>

## <a name="scaling"></a><span data-ttu-id="e6579-160">Scalabilità</span><span class="sxs-lookup"><span data-stu-id="e6579-160">Scaling</span></span>

<span data-ttu-id="e6579-161">È un malinteso comune che serverless significa "nessun server".</span><span class="sxs-lookup"><span data-stu-id="e6579-161">It's a common misconception that serverless means "no server."</span></span> <span data-ttu-id="e6579-162">E 'in realtà "meno server."</span><span class="sxs-lookup"><span data-stu-id="e6579-162">It's in fact "less server."</span></span> <span data-ttu-id="e6579-163">Il fatto che esista un'infrastruttura di backup è importante capire quando si tratta di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="e6579-163">The fact there is a backing infrastructure is important to understand when it comes to scaling.</span></span> <span data-ttu-id="e6579-164">La maggior parte delle piattaforme senza server fornisce un set di controlli per gestire la modalità di scalabilità dell'infrastruttura quando aumenta la densità degli eventi.</span><span class="sxs-lookup"><span data-stu-id="e6579-164">Most serverless platforms provide a set of controls to handle how the infrastructure should scale when event density increases.</span></span> <span data-ttu-id="e6579-165">È possibile scegliere tra una varietà di opzioni, ma la strategia può variare a seconda della funzione.</span><span class="sxs-lookup"><span data-stu-id="e6579-165">You can choose from a variety of options, but your strategy may vary depending on the function.</span></span> <span data-ttu-id="e6579-166">Inoltre, le funzioni vengono in genere eseguite in un host correlato, in modo che le funzioni nello stesso host abbiano le stesse opzioni di scala.</span><span class="sxs-lookup"><span data-stu-id="e6579-166">Furthermore, functions are typically run under a related host, so that functions on the same host have the same scale options.</span></span> <span data-ttu-id="e6579-167">È pertanto necessario organizzare e scegliere quali funzioni sono ospitate insieme in base ai requisiti di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="e6579-167">Therefore it is necessary to organize and strategize which functions are hosted together based on scale requirements.</span></span>

<span data-ttu-id="e6579-168">Le regole spesso specificano come aumentare la scalabilità verticale (aumentare le risorse host) e la scalabilità orizzontale (aumentare il numero di istanze host) in base a parametri variabili.</span><span class="sxs-lookup"><span data-stu-id="e6579-168">Rules often specify how to scale-up (increase the host resources) and scale-out (increase the number of host instances) based on varying parameters.</span></span> <span data-ttu-id="e6579-169">I trigger per le bilance possono includere pianificazione, frequenza delle richieste, utilizzo della CPU e utilizzo della memoria.</span><span class="sxs-lookup"><span data-stu-id="e6579-169">Triggers for scales may include schedule, request rates, CPU utilization, and memory usage.</span></span> <span data-ttu-id="e6579-170">Prestazioni più elevate spesso hanno un costo maggiore.</span><span class="sxs-lookup"><span data-stu-id="e6579-170">Higher performance often comes at a greater cost.</span></span> <span data-ttu-id="e6579-171">Gli approcci meno costosi basati sul consumo potrebbero non essere scalati con la velocità con cui la frequenza delle richieste aumenta improvvisamente.</span><span class="sxs-lookup"><span data-stu-id="e6579-171">The less expensive, consumption-based approaches may not scale as quickly when the request rate suddenly increases.</span></span> <span data-ttu-id="e6579-172">C'è un compromesso tra pagare prima "costo assicurativo" rispetto al pagamento rigorosamente "come si va" e rischiare risposte più lente a causa di improvvisi aumenti della domanda.</span><span class="sxs-lookup"><span data-stu-id="e6579-172">There is a trade-off between paying up front "insurance cost" versus paying strictly "as you go" and risking slower responses due to sudden increases in demand.</span></span>

## <a name="monitoring-tracing-and-logging"></a><span data-ttu-id="e6579-173">Monitoraggio, traccia e registrazione</span><span class="sxs-lookup"><span data-stu-id="e6579-173">Monitoring, tracing, and logging</span></span>

<span data-ttu-id="e6579-174">Un aspetto spesso trascurato di DevOps è il monitoraggio delle applicazioni una volta distribuite.</span><span class="sxs-lookup"><span data-stu-id="e6579-174">An often overlooked aspect of DevOps is monitoring applications once deployed.</span></span> <span data-ttu-id="e6579-175">È importante disporre di una strategia per il monitoraggio delle funzioni senza server.</span><span class="sxs-lookup"><span data-stu-id="e6579-175">It's important to have a strategy for monitoring serverless functions.</span></span> <span data-ttu-id="e6579-176">La sfida più grande è spesso la correlazione, o riconoscere quando un utente chiama più funzioni come parte della stessa interazione.</span><span class="sxs-lookup"><span data-stu-id="e6579-176">The biggest challenge is often correlation, or recognizing when a user calls multiple functions as part of the same interaction.</span></span> <span data-ttu-id="e6579-177">La maggior parte delle piattaforme senza server consente la registrazione della console che può essere importata in strumenti di terze parti.</span><span class="sxs-lookup"><span data-stu-id="e6579-177">Most serverless platforms allow console logging that can be imported into third-party tools.</span></span> <span data-ttu-id="e6579-178">Sono inoltre disponibili opzioni per automatizzare la raccolta di dati di telemetria, generare e tenere traccia degli ID di correlazione e monitorare azioni specifiche per fornire informazioni dettagliate.</span><span class="sxs-lookup"><span data-stu-id="e6579-178">There are also options to automate collection of telemetry, generate and track correlation IDs, and monitor specific actions to provide detailed insights.</span></span> <span data-ttu-id="e6579-179">Azure fornisce la [piattaforma Application Insights](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) avanzata per il monitoraggio e l'analisi.</span><span class="sxs-lookup"><span data-stu-id="e6579-179">Azure provides the advanced [Application Insights platform](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) for monitoring and analytics.</span></span>

## <a name="inter-service-dependencies"></a><span data-ttu-id="e6579-180">Dipendenze tra servizi</span><span class="sxs-lookup"><span data-stu-id="e6579-180">Inter-service dependencies</span></span>

<span data-ttu-id="e6579-181">Un'architettura senza server può includere funzioni che si basano su altre funzioni.</span><span class="sxs-lookup"><span data-stu-id="e6579-181">A serverless architecture may include functions that rely on other functions.</span></span> <span data-ttu-id="e6579-182">Infatti, non è raro in un'architettura senza server avere più servizi si chiamano a vicenda come parte di un'interazione o di una transazione distribuita.</span><span class="sxs-lookup"><span data-stu-id="e6579-182">In fact, it isn't uncommon in a serverless architecture to have multiple services call each other as part of an interaction or distributed transaction.</span></span> <span data-ttu-id="e6579-183">Per evitare un accoppiamento forte, si consiglia di non fare riferimento direttamente ai servizi.</span><span class="sxs-lookup"><span data-stu-id="e6579-183">To avoid strong coupling, it's recommended that services don't reference each other directly.</span></span> <span data-ttu-id="e6579-184">Quando l'endpoint per un servizio deve essere modificato, i riferimenti diretti possono causare un refactoring importante.</span><span class="sxs-lookup"><span data-stu-id="e6579-184">When the endpoint for a service needs to change, direct references could result in major refactoring.</span></span> <span data-ttu-id="e6579-185">Una soluzione consigliata consiste nel fornire un meccanismo di individuazione dei servizi, ad esempio un Registro di sistema, che fornisce l'indirizzo finale appropriato per un tipo di richiesta.</span><span class="sxs-lookup"><span data-stu-id="e6579-185">A suggested solution is to provide a service discovery mechanism, such as a registry, that provides the appropriate end point for a request type.</span></span> <span data-ttu-id="e6579-186">Un'altra soluzione consiste nell'utilizzare i servizi di messaggistica come code o argomenti per la comunicazione tra i servizi.</span><span class="sxs-lookup"><span data-stu-id="e6579-186">Another solution is to leverage messaging services like queues or topics for communication between services.</span></span>

## <a name="managing-failure-and-providing-resiliency"></a><span data-ttu-id="e6579-187">Gestione degli errori e fornitura di resilienza</span><span class="sxs-lookup"><span data-stu-id="e6579-187">Managing failure and providing resiliency</span></span>

<span data-ttu-id="e6579-188">È anche importante considerare il modello di *interruttore-interruttore*: Se, per qualche motivo, un servizio continua a non riuscire, non è consigliabile chiamare più volte tale servizio.</span><span class="sxs-lookup"><span data-stu-id="e6579-188">It's also important to consider the *circuit-breaker pattern*: If, for some reason, a service continues to fail, it isn't advisable to call that service repeatedly.</span></span> <span data-ttu-id="e6579-189">Al contrario, viene chiamato un servizio alternativo o viene restituito un messaggio fino a quando non viene ristabilita l'integrità del servizio dipendente.</span><span class="sxs-lookup"><span data-stu-id="e6579-189">Instead, an alternative service is called or a message returned until the health of the dependent service is re-established.</span></span> <span data-ttu-id="e6579-190">L'architettura senza server deve tenere conto della strategia per la risoluzione e la gestione delle dipendenze tra servizi.</span><span class="sxs-lookup"><span data-stu-id="e6579-190">The serverless architecture needs to take into account the strategy for resolving and managing inter-service dependencies.</span></span>

<span data-ttu-id="e6579-191">Per continuare il modello di interruttore, i servizi devono essere a tolleranza d'errore e resilienti.</span><span class="sxs-lookup"><span data-stu-id="e6579-191">To continue the circuit-breaker pattern, services need to be fault tolerant and resilient.</span></span> <span data-ttu-id="e6579-192">La tolleranza di errore si riferisce alla capacità dell'applicazione di continuare l'esecuzione anche dopo che vengono rilevate eccezioni impreviste o stati non validi.</span><span class="sxs-lookup"><span data-stu-id="e6579-192">Fault tolerance refers to the ability of your application to continue running even after unexpected exceptions or invalid states are encountered.</span></span> <span data-ttu-id="e6579-193">La tolleranza di errore è in genere una funzione del codice stesso e del modo in cui viene scritta per gestire le eccezioni.</span><span class="sxs-lookup"><span data-stu-id="e6579-193">Fault tolerance is typically a function of the code itself and how it's written to handle exceptions.</span></span> <span data-ttu-id="e6579-194">Per resilienza si intende la capacità dell'app di eseguire il ripristino da errori.</span><span class="sxs-lookup"><span data-stu-id="e6579-194">Resiliency refers to how capable the app is at recovering from failures.</span></span> <span data-ttu-id="e6579-195">La resilienza viene spesso gestita dalla piattaforma senza server.</span><span class="sxs-lookup"><span data-stu-id="e6579-195">Resiliency is often managed by the serverless platform.</span></span> <span data-ttu-id="e6579-196">La piattaforma deve essere in grado di eseguire la creazione di una nuova istanza di funzione senza server quando si verifica un errore in quella esistente.</span><span class="sxs-lookup"><span data-stu-id="e6579-196">The platform should be able to spin up a new serverless function instance when the existing one fails.</span></span> <span data-ttu-id="e6579-197">La piattaforma dovrebbe anche essere abbastanza intelligente da interrompere la rotazione di nuove istanze quando ogni nuova istanza ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="e6579-197">The platform should also be intelligent enough to stop spinning up new instances when every new instance fails.</span></span>

<span data-ttu-id="e6579-198">Per ulteriori informazioni, vedere [Implementazione del modello Interruttore di circuito](../microservices/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="e6579-198">For more information, see [Implementing the Circuit Breaker pattern](../microservices/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span></span>

## <a name="versioning-and-greenblue-deployments"></a><span data-ttu-id="e6579-199">Controllo delle versioni e distribuzioni verde/blu</span><span class="sxs-lookup"><span data-stu-id="e6579-199">Versioning and green/blue deployments</span></span>

<span data-ttu-id="e6579-200">Uno dei principali vantaggi di serverless è la possibilità di aggiornare una funzione specifica senza dover ridistribuire l'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="e6579-200">A major benefit of serverless is the ability to upgrade a specific function without having to redeploy the entire application.</span></span> <span data-ttu-id="e6579-201">Affinché gli aggiornamenti abbiano esito positivo, è necessario eseguire il controllo delle versioni delle funzioni in modo che i servizi che li chiamano vengano indirizzati alla versione corretta del codice.</span><span class="sxs-lookup"><span data-stu-id="e6579-201">For upgrades to be successful, functions must be versioned so that services calling them are routed to the correct version of code.</span></span> <span data-ttu-id="e6579-202">È importante anche una strategia per la distribuzione di nuove versioni.</span><span class="sxs-lookup"><span data-stu-id="e6579-202">A strategy for deploying new versions is also important.</span></span> <span data-ttu-id="e6579-203">Un approccio comune consiste nell'utilizzare "distribuzioni verde/blu".</span><span class="sxs-lookup"><span data-stu-id="e6579-203">A common approach is to use "green/blue deployments."</span></span> <span data-ttu-id="e6579-204">La distribuzione verde è la funzione corrente.</span><span class="sxs-lookup"><span data-stu-id="e6579-204">The green deployment is the current function.</span></span> <span data-ttu-id="e6579-205">Una nuova versione "blu" viene distribuita in produzione e testata.</span><span class="sxs-lookup"><span data-stu-id="e6579-205">A new "blue" version is deployed to production and tested.</span></span> <span data-ttu-id="e6579-206">Quando il test passa, le versioni verde e blu vengono scambiate in modo che la nuova versione venga disponibile.</span><span class="sxs-lookup"><span data-stu-id="e6579-206">When testing passes, the green and blue versions are swapped so the new version comes live.</span></span> <span data-ttu-id="e6579-207">Se si verificano problemi, è possibile scambiare nuovamente.</span><span class="sxs-lookup"><span data-stu-id="e6579-207">If any issues are encountered, they can be swapped back.</span></span> <span data-ttu-id="e6579-208">Il supporto del controllo delle versioni e delle distribuzioni in verde/blu richiede una combinazione di funzioni di creazione per supportare le modifiche alla versione e l'utilizzo della piattaforma senza server per gestire le distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="e6579-208">Supporting versioning and green/blue deployments requires a combination of authoring the functions to accommodate version changes and working with the serverless platform to handle deployments.</span></span> <span data-ttu-id="e6579-209">Un possibile approccio consiste nell'usare i proxy, descritti nel capitolo Piattaforma senza server di Azure.One possible approach is to use proxyies, which are described in the [Azure serverless platform](azure-functions.md#proxies) chapter.</span><span class="sxs-lookup"><span data-stu-id="e6579-209">One possible approach is to use proxies, which are described in the [Azure serverless platform](azure-functions.md#proxies) chapter.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="e6579-210">[Successivo](serverless-architecture.md)
>[precedente](serverless-design-examples.md)</span><span class="sxs-lookup"><span data-stu-id="e6579-210">[Previous](serverless-architecture.md)
[Next](serverless-design-examples.md)</span></span>
