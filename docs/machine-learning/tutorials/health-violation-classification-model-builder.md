---
title: 'Esercitazione: classificare le violazioni di integrità con il generatore di modelli'
description: Questa esercitazione illustra come creare un modello di classificazione multiclasse usando il generatore di modelli ML.NET per classificare la gravità della violazione dell'integrità del ristorante a San Francisco.
author: luisquintanilla
ms.author: luquinta
ms.date: 11/21/2019
ms.topic: tutorial
ms.custom: mvc
ms.openlocfilehash: 90abbc9ffe5765880d18d0d29c8e13bc1330ddc3
ms.sourcegitcommit: 30a558d23e3ac5a52071121a52c305c85fe15726
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/25/2019
ms.locfileid: "75341563"
---
# <a name="tutorial-classify-the-severity-of-restaurant-health-violations-with-model-builder"></a><span data-ttu-id="ceb7a-103">Esercitazione: classificare la gravità delle violazioni di integrità del ristorante con generatore di modelli</span><span class="sxs-lookup"><span data-stu-id="ceb7a-103">Tutorial: Classify the severity of restaurant health violations with Model Builder</span></span>

<span data-ttu-id="ceb7a-104">Informazioni su come creare un modello di classificazione multiclasse usando generatore di modelli per categorizzare il livello di rischio delle violazioni del ristorante trovate durante i controlli di integrità.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-104">Learn how to build a multiclass classification model using Model Builder to categorize the risk level of restaurant violations found during health inspections.</span></span>

<span data-ttu-id="ceb7a-105">In questa esercitazione si imparerà a:</span><span class="sxs-lookup"><span data-stu-id="ceb7a-105">In this tutorial, you learn how to:</span></span>

> [!div class="checklist"]
>
> - <span data-ttu-id="ceb7a-106">Preparare e identificare i dati</span><span class="sxs-lookup"><span data-stu-id="ceb7a-106">Prepare and understand the data</span></span>
> - <span data-ttu-id="ceb7a-107">Scegliere uno scenario</span><span class="sxs-lookup"><span data-stu-id="ceb7a-107">Choose a scenario</span></span>
> - <span data-ttu-id="ceb7a-108">Caricare dati da un database</span><span class="sxs-lookup"><span data-stu-id="ceb7a-108">Load data from a database</span></span>
> - <span data-ttu-id="ceb7a-109">Eseguire il training del modello</span><span class="sxs-lookup"><span data-stu-id="ceb7a-109">Train the model</span></span>
> - <span data-ttu-id="ceb7a-110">Valutare il modello</span><span class="sxs-lookup"><span data-stu-id="ceb7a-110">Evaluate the model</span></span>
> - <span data-ttu-id="ceb7a-111">Usare il modello per le stime</span><span class="sxs-lookup"><span data-stu-id="ceb7a-111">Use the model for predictions</span></span>

> [!NOTE]
> <span data-ttu-id="ceb7a-112">Il generatore di modelli è attualmente in anteprima.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-112">Model Builder is currently in Preview.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ceb7a-113">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="ceb7a-113">Prerequisites</span></span>

<span data-ttu-id="ceb7a-114">Per un elenco di prerequisiti e istruzioni di installazione, vedere la [Guida all'installazione di generatore di modelli](../how-to-guides/install-model-builder.md).</span><span class="sxs-lookup"><span data-stu-id="ceb7a-114">For a list of prerequisites and installation instructions, visit the [Model Builder installation guide](../how-to-guides/install-model-builder.md).</span></span>

## <a name="model-builder-multiclass-classification-overview"></a><span data-ttu-id="ceb7a-115">Panoramica della classificazione multiclasse del generatore di modelli</span><span class="sxs-lookup"><span data-stu-id="ceb7a-115">Model Builder multiclass classification overview</span></span>

<span data-ttu-id="ceb7a-116">Questo esempio crea un' C# applicazione console .NET Core che categorizza il rischio di violazioni di integrità usando un modello di Machine Learning compilato con il generatore di modelli.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-116">This sample creates a C# .NET Core console application that categorizes the risk of health violations using a machine learning model built with Model Builder.</span></span> <span data-ttu-id="ceb7a-117">Il codice sorgente per questa esercitazione è reperibile nel repository GitHub [DotNet/machinelearning-Samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) .</span><span class="sxs-lookup"><span data-stu-id="ceb7a-117">You can find the source code for this tutorial at the [dotnet/machinelearning-samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) GitHub repository.</span></span>

## <a name="create-a-console-application"></a><span data-ttu-id="ceb7a-118">Creare un'applicazione console</span><span class="sxs-lookup"><span data-stu-id="ceb7a-118">Create a console application</span></span>

1. <span data-ttu-id="ceb7a-119">Creare un'  **C# applicazione console .NET Core** denominata "RestaurantViolations".</span><span class="sxs-lookup"><span data-stu-id="ceb7a-119">Create a **C# .NET Core console application** called "RestaurantViolations".</span></span> <span data-ttu-id="ceb7a-120">Assicurarsi che **la posizione della soluzione e del progetto nella stessa directory** sia **deselezionata** (vs 2019) oppure che sia **selezionata** l'opzione **Crea directory per soluzione** (vs 2017).</span><span class="sxs-lookup"><span data-stu-id="ceb7a-120">Make sure **Place solution and project in the same directory** is **unchecked** (VS 2019), or **Create directory for solution** is **checked** (VS 2017).</span></span>

## <a name="prepare-and-understand-the-data"></a><span data-ttu-id="ceb7a-121">Preparare e identificare i dati</span><span class="sxs-lookup"><span data-stu-id="ceb7a-121">Prepare and understand the data</span></span>

> <span data-ttu-id="ceb7a-122">Il set di dati usato per il training e la valutazione del modello di Machine Learning è stato originato dal [reparto San Francisco dei punteggi di sicurezza del ristorante Public Health](https://www.sfdph.org/dph/EH/Food/score/default.asp).</span><span class="sxs-lookup"><span data-stu-id="ceb7a-122">The data set used to train and evaluate the machine learning model is originally from the [San Francisco Department of Public Health Restaurant Safety Scores](https://www.sfdph.org/dph/EH/Food/score/default.asp).</span></span> <span data-ttu-id="ceb7a-123">Per praticità, il set di dati è stato condensato in modo da includere solo le colonne rilevanti per eseguire il training del modello ed eseguire stime.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-123">For convenience, the dataset has been condensed to only include the columns relevant to train the model and make predictions.</span></span> <span data-ttu-id="ceb7a-124">Visitare il sito Web seguente per altre informazioni sul [set di dati](https://data.sfgov.org/Health-and-Social-Services/Restaurant-Scores-LIVES-Standard/pyih-qa8i?row_index=0).</span><span class="sxs-lookup"><span data-stu-id="ceb7a-124">Visit the following website to learn more about the [dataset](https://data.sfgov.org/Health-and-Social-Services/Restaurant-Scores-LIVES-Standard/pyih-qa8i?row_index=0).</span></span>

<span data-ttu-id="ceb7a-125">[Scaricare il set di dati dei punteggi di sicurezza del ristorante](https://github.com/luisquintanilla/machinelearning-samples/raw/AB1608219/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantScores.zip) e decomprimerlo.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-125">[Download the Restaurant Safety Scores dataset](https://github.com/luisquintanilla/machinelearning-samples/raw/AB1608219/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantScores.zip) and unzip it.</span></span>

<span data-ttu-id="ceb7a-126">Ogni riga del set di dati contiene informazioni relative alle violazioni osservate durante un'ispezione dal reparto integrità e una valutazione dei rischi della minaccia che tali violazioni presentano alla salute e alla sicurezza pubbliche.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-126">Each row in the dataset contains information regarding violations observed during an inspection from the Health Department and a risk assessment of the threat those violations present to public health and safety.</span></span>

| <span data-ttu-id="ceb7a-127">InspectionType</span><span class="sxs-lookup"><span data-stu-id="ceb7a-127">InspectionType</span></span> | <span data-ttu-id="ceb7a-128">ViolationDescription</span><span class="sxs-lookup"><span data-stu-id="ceb7a-128">ViolationDescription</span></span> | <span data-ttu-id="ceb7a-129">RiskCategory</span><span class="sxs-lookup"><span data-stu-id="ceb7a-129">RiskCategory</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ceb7a-130">Routine-non pianificata</span><span class="sxs-lookup"><span data-stu-id="ceb7a-130">Routine - Unscheduled</span></span> | <span data-ttu-id="ceb7a-131">Superficie di contatto cibo pulita o purificata in modo non adeguato</span><span class="sxs-lookup"><span data-stu-id="ceb7a-131">Inadequately cleaned or sanitized food contact surfaces</span></span> | <span data-ttu-id="ceb7a-132">Rischio moderato</span><span class="sxs-lookup"><span data-stu-id="ceb7a-132">Moderate Risk</span></span> |
| <span data-ttu-id="ceb7a-133">Nuova proprietà</span><span class="sxs-lookup"><span data-stu-id="ceb7a-133">New Ownership</span></span> | <span data-ttu-id="ceb7a-134">Rischio elevato</span><span class="sxs-lookup"><span data-stu-id="ceb7a-134">High risk vermin infestation</span></span> | <span data-ttu-id="ceb7a-135">Rischio elevato</span><span class="sxs-lookup"><span data-stu-id="ceb7a-135">High Risk</span></span> |
| <span data-ttu-id="ceb7a-136">Routine-non pianificata</span><span class="sxs-lookup"><span data-stu-id="ceb7a-136">Routine - Unscheduled</span></span> | <span data-ttu-id="ceb7a-137">Cancellazione di panni non puliti o archiviati in modo appropriato o igienizzatore inadeguato</span><span class="sxs-lookup"><span data-stu-id="ceb7a-137">Wiping cloths not clean or properly stored or inadequate sanitizer</span></span> | <span data-ttu-id="ceb7a-138">Rischio basso</span><span class="sxs-lookup"><span data-stu-id="ceb7a-138">Low Risk</span></span> |

- <span data-ttu-id="ceb7a-139">**InspectionType**: il tipo di controllo.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-139">**InspectionType**: the type of inspection.</span></span> <span data-ttu-id="ceb7a-140">Questo può essere un primo controllo per un nuovo stabilimento, un'ispezione di routine, un'ispezione di reclamo e molti altri tipi.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-140">This can either be a first-time inspection for a new establishment, a routine inspection, a complaint inspection, and many other types.</span></span>
- <span data-ttu-id="ceb7a-141">**ViolationDescription**: Descrizione della violazione trovata durante l'ispezione.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-141">**ViolationDescription**: a description of the violation found during inspection.</span></span>
- <span data-ttu-id="ceb7a-142">**RiskCategory**: la gravità del rischio rappresenta una violazione per l'integrità e la sicurezza pubbliche.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-142">**RiskCategory**: the risk severity a violation poses to public health and safety.</span></span>

<span data-ttu-id="ceb7a-143">`label` è la colonna sulla quale eseguire le stime.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-143">The `label` is the column you want to predict.</span></span> <span data-ttu-id="ceb7a-144">Quando si esegue un'attività di classificazione, l'obiettivo consiste nell'assegnare una categoria (testo o numerico).</span><span class="sxs-lookup"><span data-stu-id="ceb7a-144">When performing a classification task, the goal is to assign a category (text or numerical).</span></span> <span data-ttu-id="ceb7a-145">In questo scenario di classificazione, alla gravità della violazione viene assegnato il valore di basso, medio o alto rischio.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-145">In this classification scenario, the severity of the violation is assigned the value of low, moderate, or high risk.</span></span> <span data-ttu-id="ceb7a-146">Di conseguenza, **RiskCategory** è l'etichetta.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-146">Therefore, the **RiskCategory** is the label.</span></span> <span data-ttu-id="ceb7a-147">Il `features` sono gli input da assegnare al modello per stimare l'`label`.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-147">The `features` are the inputs you give the model to predict the `label`.</span></span> <span data-ttu-id="ceb7a-148">In questo caso, **InspectionType** e **ViolationDescription** vengono usati come funzionalità o input per stimare il **RiskCategory**.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-148">In this case, the **InspectionType** and **ViolationDescription** are used as features or inputs to predict the **RiskCategory**.</span></span>

## <a name="choose-a-scenario"></a><span data-ttu-id="ceb7a-149">Scegliere uno scenario</span><span class="sxs-lookup"><span data-stu-id="ceb7a-149">Choose a scenario</span></span>

![Creazione guidata generatore di modelli in Visual Studio](./media/sentiment-analysis-model-builder/model-builder-screen.png)

<span data-ttu-id="ceb7a-151">Per eseguire il training del modello, selezionare nell'elenco degli scenari di machine learning disponibili forniti da generatore di modelli.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-151">To train your model, select from the list of available machine learning scenarios provided by Model Builder.</span></span> <span data-ttu-id="ceb7a-152">In questo caso, lo scenario è la *classificazione dei problemi*.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-152">In this case, the scenario is *Issue Classification*.</span></span>

1. <span data-ttu-id="ceb7a-153">In **Esplora soluzioni**fare clic con il pulsante destro del mouse sul progetto *RestaurantViolations* e selezionare **Aggiungi** > **Machine Learning**.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-153">In **Solution Explorer**, right-click the *RestaurantViolations* project, and select **Add** > **Machine Learning**.</span></span>
1. <span data-ttu-id="ceb7a-154">Per questo esempio, lo scenario è la classificazione multiclasse.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-154">For this sample, the scenario is multiclass classification.</span></span> <span data-ttu-id="ceb7a-155">Nel passaggio dello *scenario* di generatore di modelli selezionare lo scenario di **classificazione dei problemi** .</span><span class="sxs-lookup"><span data-stu-id="ceb7a-155">In the *Scenario* step of Model Builder, select the **Issue Classification** scenario.</span></span>

## <a name="load-the-data"></a><span data-ttu-id="ceb7a-156">Caricare i dati</span><span class="sxs-lookup"><span data-stu-id="ceb7a-156">Load the data</span></span>

<span data-ttu-id="ceb7a-157">Il generatore di modelli accetta dati da un database SQL Server o da un file locale in formato `csv` o `tsv`.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-157">Model Builder accepts data from a SQL Server database or a local file in `csv` or `tsv` format.</span></span>

1. <span data-ttu-id="ceb7a-158">Nel passaggio dati dello strumento generatore di modelli selezionare **SQL Server** dall'elenco a discesa origine dati.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-158">In the data step of the Model Builder tool, select **SQL Server** from the data source dropdown.</span></span>
1. <span data-ttu-id="ceb7a-159">Selezionare il pulsante accanto alla casella di testo **Connetti a SQL Server database** .</span><span class="sxs-lookup"><span data-stu-id="ceb7a-159">Select the button next to the **Connect to SQL Server database** text box.</span></span>
    1. <span data-ttu-id="ceb7a-160">Nella finestra di dialogo **Scegli dati** selezionare **Microsoft SQL Server file di database**.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-160">In the **Choose Data** dialog, select **Microsoft SQL Server Database File**.</span></span>
    1. <span data-ttu-id="ceb7a-161">Deselezionare la casella di controllo **Usa sempre questa selezione** e selezionare **continua**.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-161">Uncheck the **Always use this selection** checkbox and select **Continue**.</span></span>
    1. <span data-ttu-id="ceb7a-162">Nella finestra di dialogo **Proprietà connessione** selezionare **Sfoglia** e selezionare il file *RestaurantScores. MDF* scaricato.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-162">In the **Connection Properties** dialog, select **Browse** and select the downloaded *RestaurantScores.mdf* file.</span></span>
    1. <span data-ttu-id="ceb7a-163">Scegliere **OK**.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-163">Select **OK**.</span></span>
1. <span data-ttu-id="ceb7a-164">Scegliere **violazioni** dall'elenco a discesa **nome tabella** .</span><span class="sxs-lookup"><span data-stu-id="ceb7a-164">Choose **Violations** from the **Table Name** dropdown.</span></span>
1. <span data-ttu-id="ceb7a-165">Scegliere **RiskCategory** nell'elenco **a discesa colonna da stimare (etichetta)** .</span><span class="sxs-lookup"><span data-stu-id="ceb7a-165">Choose **RiskCategory** in the **Column to Predict (Label)** dropdown.</span></span>
1. <span data-ttu-id="ceb7a-166">Lasciare le selezioni di colonna predefinite, **InspectionType** e **ViolationDescription**, archiviate nell'elenco a discesa **colonne di input (funzionalità)** .</span><span class="sxs-lookup"><span data-stu-id="ceb7a-166">Leave the default column selections, **InspectionType** and **ViolationDescription**, checked in the **Input Columns (Features)** dropdown.</span></span>
1. <span data-ttu-id="ceb7a-167">Selezionare il collegamento **Train (Train** ) per passare al passaggio successivo in Generatore di modelli.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-167">Select the **Train** link to move to the next step in Model Builder.</span></span>

## <a name="train-the-model"></a><span data-ttu-id="ceb7a-168">Eseguire il training del modello</span><span class="sxs-lookup"><span data-stu-id="ceb7a-168">Train the model</span></span>

<span data-ttu-id="ceb7a-169">L'attività di Machine Learning usata per eseguire il training del modello di classificazione dei problemi in questa esercitazione è la classificazione multiclasse.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-169">The machine learning task used to train the issue classification model in this tutorial is multiclass classification.</span></span> <span data-ttu-id="ceb7a-170">Durante il processo di training del modello, generatore di modelli esegue il training di modelli distinti usando diversi algoritmi di classificazione multiclasse e impostazioni per trovare il modello di prestazioni migliori per il set di dati.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-170">During the model training process, Model Builder trains separate models using different multiclass classification algorithms and settings to find the best performing model for your dataset.</span></span>

<span data-ttu-id="ceb7a-171">Il tempo necessario per il training del modello è proporzionale alla quantità di dati.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-171">The time required for the model to train is proportional to the amount of data.</span></span> <span data-ttu-id="ceb7a-172">Generatore di modelli seleziona automaticamente un valore predefinito per il **tempo di training (secondi)** in base alle dimensioni dell'origine dati.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-172">Model Builder automatically selects a default value for **Time to train (seconds)** based on the size of your data source.</span></span>

1. <span data-ttu-id="ceb7a-173">Sebbene generatore di modelli imposti il valore di **tempo per il training (secondi)** su 10 secondi, aumentarlo a 30 secondi.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-173">Although Model Builder sets the value of **Time to train (seconds)** to 10 seconds, increase it to 30 seconds.</span></span> <span data-ttu-id="ceb7a-174">Il training per un periodo di tempo più lungo consente a Generatore di modelli di esplorare un numero maggiore di algoritmi e una combinazione di parametri nella ricerca del modello migliore.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-174">Training for a longer period of time allows Model Builder to explore a larger number of algorithms and combination of parameters in search of the best model.</span></span>
1. <span data-ttu-id="ceb7a-175">Selezionare **Start Training** (Avvia training).</span><span class="sxs-lookup"><span data-stu-id="ceb7a-175">Select **Start Training**.</span></span>

    <span data-ttu-id="ceb7a-176">Durante il processo di training i dati dell'avanzamento vengono visualizzati nella sezione `Progress` del passaggio relativo al training.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-176">Throughout the training process, progress data is displayed in the `Progress` section of the train step.</span></span>

    - <span data-ttu-id="ceb7a-177">**Stato** consente di visualizzare lo stato di completamento del processo di training.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-177">**Status** displays the completion status of the training process.</span></span>
    - <span data-ttu-id="ceb7a-178"> *\*accuratezza ottimale** Visualizza l'accuratezza del modello con le prestazioni migliori rilevato finora dal generatore di modelli.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-178">**Best accuracy** displays the accuracy of the best performing model found by Model Builder so far.</span></span> <span data-ttu-id="ceb7a-179">Precisione maggiore indica il modello stimato più correttamente con i dati di test.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-179">Higher accuracy means the model predicted more correctly on test data.</span></span>
    - <span data-ttu-id="ceb7a-180">**Best algorithm** Visualizza il nome dell'algoritmo con le prestazioni migliori trovato finora dal generatore di modelli.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-180">**Best algorithm** displays the name of the best-performing algorithm found by Model Builder so far.</span></span>
    - <span data-ttu-id="ceb7a-181">**Last algorithm** Visualizza il nome dell'algoritmo utilizzato più di recente dal generatore di modelli per eseguire il training del modello.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-181">**Last algorithm** displays the name of the algorithm most recently used by Model Builder to train the model.</span></span>

1. <span data-ttu-id="ceb7a-182">Al termine del training, selezionare il collegamento **Evaluate (valuta** ) per passare al passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-182">Once training is complete, select the **Evaluate** link to move to the next step.</span></span>

## <a name="evaluate-the-model"></a><span data-ttu-id="ceb7a-183">Valutare il modello</span><span class="sxs-lookup"><span data-stu-id="ceb7a-183">Evaluate the model</span></span>

<span data-ttu-id="ceb7a-184">Il risultato del passaggio di training è quello che ha ottenuto le prestazioni migliori.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-184">The result of the training step is the one model that had the best performance.</span></span> <span data-ttu-id="ceb7a-185">Nel passaggio Evaluate di generatore di modelli, la sezione output contiene l'algoritmo utilizzato dal modello con le migliori prestazioni nella **migliore** voce del modello insieme alle metriche nell' **accuratezza del modello migliore**.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-185">In the evaluate step of Model Builder, the output section contains the algorithm used by the best performing model in the **Best Model** entry along with metrics in **Best Model Accuracy**.</span></span> <span data-ttu-id="ceb7a-186">Viene inoltre visualizzata una tabella riepilogativa contenente fino a cinque modelli esplorati e le relative metriche.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-186">Additionally, a summary table containing up to five models that were explored and their metrics is displayed.</span></span>

<span data-ttu-id="ceb7a-187">Se non si è soddisfatti della metrica di accuratezza, è possibile provare a migliorare l'accuratezza del modello aumentando il tempo necessario per il training del modello o l'utilizzo di più dati.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-187">If you're not satisfied with your accuracy metrics, some easy ways to try to improve model accuracy are to increase the amount of time to train the model or use more data.</span></span> <span data-ttu-id="ceb7a-188">In caso contrario, selezionare il collegamento al **codice** per passare al passaggio finale in Generatore di modelli.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-188">Otherwise, select the **code** link to move to the final step in Model Builder.</span></span>

## <a name="add-the-code-to-make-predictions"></a><span data-ttu-id="ceb7a-189">Aggiungere il codice per eseguire stime</span><span class="sxs-lookup"><span data-stu-id="ceb7a-189">Add the code to make predictions</span></span>

<span data-ttu-id="ceb7a-190">Due progetti vengono creati in seguito al processo di training.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-190">Two projects are created as a result of the training process.</span></span>

- <span data-ttu-id="ceb7a-191">RestaurantViolationsML. ConsoleApp: applicazione C# console .NET Core che contiene il codice di training e di utilizzo del modello di esempio.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-191">RestaurantViolationsML.ConsoleApp: A C# .NET Core Console application that contains the model training and sample consumption code.</span></span>
- <span data-ttu-id="ceb7a-192">RestaurantViolationsML. Model: una libreria di classi .NET Standard contenente i modelli di dati che definiscono lo schema dei dati del modello di input e di output, la versione salvata del modello con le prestazioni migliori durante il training e una classe helper denominata `ConsumeModel` per eseguire stime.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-192">RestaurantViolationsML.Model: A .NET Standard class library containing the data models that define the schema of input and output model data, the saved version of the best performing model during training, and a helper class called `ConsumeModel` to make predictions.</span></span>

1. <span data-ttu-id="ceb7a-193">Nel passaggio del codice del generatore di modelli selezionare **Aggiungi progetti** per aggiungere i progetti generati automaticamente alla soluzione.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-193">In the code step of Model Builder, select **Add Projects** to add the autogenerated projects to the solution.</span></span>
1. <span data-ttu-id="ceb7a-194">Aprire il file *Program.cs* nel progetto *RestaurantViolations* .</span><span class="sxs-lookup"><span data-stu-id="ceb7a-194">Open the *Program.cs* file in the *RestaurantViolations* project.</span></span>
1. <span data-ttu-id="ceb7a-195">Aggiungere l'istruzione using seguente per fare riferimento al progetto *RestaurantViolationsML. Model* :</span><span class="sxs-lookup"><span data-stu-id="ceb7a-195">Add the following using statement to reference the *RestaurantViolationsML.Model* project:</span></span>

    [!code-csharp [ProgramUsings](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L2)]

1. <span data-ttu-id="ceb7a-196">Per eseguire una stima sui nuovi dati utilizzando il modello, creare una nuova istanza della classe `ModelInput` all'interno del metodo `Main` dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-196">To make a prediction on new data using the model, create a new instance of the `ModelInput` class inside the `Main` method of your application.</span></span> <span data-ttu-id="ceb7a-197">Si noti che la categoria di rischio non fa parte dell'input.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-197">Notice that the risk category is not part of the input.</span></span> <span data-ttu-id="ceb7a-198">Questo perché il modello genera la stima per l'oggetto.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-198">This is because the model generates the prediction for it.</span></span>

    [!code-csharp [TestData](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L11-L15)]

1. <span data-ttu-id="ceb7a-199">Usare il metodo `Predict` dalla classe `ConsumeModel`.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-199">Use the `Predict` method from the `ConsumeModel` class.</span></span> <span data-ttu-id="ceb7a-200">Il metodo `Predict` carica il modello sottoposto a training, crea una [`PredictionEngine`](xref:Microsoft.ML.PredictionEngine%602) per il modello e la utilizza per eseguire stime sui nuovi dati.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-200">The `Predict` method loads the trained model, creates a [`PredictionEngine`](xref:Microsoft.ML.PredictionEngine%602) for the model, and uses it to make predictions on new data.</span></span>

    [!code-csharp [Prediction](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L17-L24)]

1. <span data-ttu-id="ceb7a-201">Eseguire l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-201">Run the application.</span></span>

    <span data-ttu-id="ceb7a-202">L'output generato dal programma dovrebbe essere simile al frammento di codice seguente:</span><span class="sxs-lookup"><span data-stu-id="ceb7a-202">The output generated by the program should look similar to the snippet below:</span></span>

    ```bash
    Inspection Type: Complaint
    Violation Description: Inadequate sewage or wastewater disposal
    Risk Category: Moderate Risk
    ```

<span data-ttu-id="ceb7a-203">Se in un secondo momento è necessario fare riferimento ai progetti generati all'interno di un'altra soluzione, è possibile trovarli all'interno della directory `C:\Users\%USERNAME%\AppData\Local\Temp\MLVSTools`.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-203">If you need to reference the generated projects at a later time inside of another solution, you can find them inside the `C:\Users\%USERNAME%\AppData\Local\Temp\MLVSTools` directory.</span></span>

<span data-ttu-id="ceb7a-204">La procedura è stata completata.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-204">Congratulations!</span></span> <span data-ttu-id="ceb7a-205">È stato creato un modello di apprendimento automatico per suddividere in categorie il rischio di violazioni di integrità mediante generatore di modelli.</span><span class="sxs-lookup"><span data-stu-id="ceb7a-205">You've successfully built a machine learning model to categorize the risk of health violations using Model Builder.</span></span> <span data-ttu-id="ceb7a-206">Il codice sorgente per questa esercitazione è reperibile nel repository GitHub [DotNet/machinelearning-Samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) .</span><span class="sxs-lookup"><span data-stu-id="ceb7a-206">You can find the source code for this tutorial at the [dotnet/machinelearning-samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) GitHub repository.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="ceb7a-207">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="ceb7a-207">Additional resources</span></span>

<span data-ttu-id="ceb7a-208">Per altre informazioni sugli argomenti presentati in questa esercitazione, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="ceb7a-208">To learn more about topics mentioned in this tutorial, visit the following resources:</span></span>

- [<span data-ttu-id="ceb7a-209">Scenari del generatore di modelli</span><span class="sxs-lookup"><span data-stu-id="ceb7a-209">Model Builder Scenarios</span></span>](../automate-training-with-model-builder.md#scenarios)
- [<span data-ttu-id="ceb7a-210">Classificazione multiclasse</span><span class="sxs-lookup"><span data-stu-id="ceb7a-210">Multiclass Classification</span></span>](../resources/glossary.md#multiclass-classification)
- [<span data-ttu-id="ceb7a-211">Metriche del modello di classificazione multiclasse</span><span class="sxs-lookup"><span data-stu-id="ceb7a-211">Multiclass Classification Model Metrics</span></span>](../resources/metrics.md#evaluation-metrics-for-multi-class-classification)
